!function(e){function t(t){for(var r,o,i=t[0],u=t[1],l=t[2],s=0,d=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(f&&f(t);d.length;)d.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},c=[];var o={3:"sha384-jCD9qCH2bybDJEGMLynT43zVdq8LLgV7J0pghxbjbqIhKCgmzmL7BRcFLi1QMMIE",4:"sha384-6PdHTQIXvb+AjIRUAvfn7OkIDSYdIWgp/stFClMbYVBcjGj6MxJwy4p2ilmZEr4y",5:"sha384-O7GHwHdPt52m0pfD28KBwE1rsPQCSsnFp44Z/nRy1KzguReGHHBi/cEUopRdBnbD",6:"sha384-gBUPJ19Jwo6S+AN79jSQ1g27HyRgmbLKmMV89TpwyxpmBOD19uuuCozQBiDy5/mq",7:"sha384-IKfHoZ5PKLDNEHQ5n7X2gH/DpJOvNNk+RElAaLd3mrcVsKmZkj/W5GvUm3Lj/5CC",8:"sha384-Wc8tuqMkH1XGiyLSJFzMBH/XDZxbw6aS+SXbUxLHmjEV7xvVM9JCAs+SkWFCmBjI",9:"sha384-5OZP5WWAMXvYgR6mjUEusufdPT+INf/QFjTDoz2sP1dxD5mH6UDVB5bdMzb18DsS",10:"sha384-eWWgPwOmcqQVuWe+6dhe5a3mJd6GTGS30B+eL/6Gr5qqpRcx2041WBM1i70ZWz7Q",11:"sha384-DYlLWPaor4YGzrAsfSdkq6b/vTdTaoGtF6JoA3MSvxL2BlRRt4FZo8HdK2fKXi57",12:"sha384-hoX+bE5UuBnWvgNr5JNvKDGTOUNArIKEqEA1TCgCTFpqAlM1MQw0Is5p1w7aJSaR",13:"sha384-Ex+Btwrp3pqCYWYmoPUKjJM2XeAdlhPRmvEOINCmdqE41ikCRz79Zwt+ixt1jvLM",14:"sha384-lGY2Tdg0Tn8L6oLhyd56SGoucMFLFQbR/AX1pFOgpghKMwDoUbtbiBshRmA2fMKH",15:"sha384-/qAAIxpIL3IdwhoYVHH3WvWKcqpx5vN6AwH8DrPZSyhUoJYMIlhnliFqb4asYusU",16:"sha384-ytP7V7TVR6Bwv9zZEjQzGhU1hIvrBoP8oL2uCUiMvmFHtnYZqjkR02jDzgBemUtg",17:"sha384-CFLg+WUHHsAdPheVJe/oaSiIbz6c9mhYfB7EaBR3EslsFVnf6pYVaqXxVgYCHXgH",18:"sha384-U2mqJOixX/qH0KFjceiZWURKWHnfZD0BnXmgrRx0LfwnO4vRbd4iy2ZYtvYbOG0i",19:"sha384-4kb5Emnrq+oIM0rXmTdXdjNCrnWBRsOeVps79SnryIP67f0gitEcFZEqaJxDLBNV",20:"sha384-K7w+OWjRVzygUmN4dp5CKlRAMA3+b20hGPNuXL8EYSFKd32ItXjHadPb/gKPDntZ",21:"sha384-wiG6f9Yv6ZUbhF3Q/Tkg0nwf7WAOfGYaVPcrQNgCj/rcrOvu6QECWMzjuyO0Dr4J",22:"sha384-/ToU4hiPMHhcjRDmbIxn6yP1cbem3nKXkKQuXv88bxFqwV9+g2V6ZouQ3bHZcbu+",23:"sha384-LVS3YtM5zJ1kr7sBjJK0bEllcmAvyhAUNgtUxeuo6mabNUGQnOrKunqSXfVljjaJ",24:"sha384-RRkNqDxw9Vffgjiosds/Eo7Pps3dv+ptuWCbwixtpz3TGzkjbfwg5WF7QgkpKd0S",25:"sha384-tsI3agj/Ezwc0j1oyyWxVDjdihPhZ2D6I6MWhHR+J9TrASUgnsz0LU+itUbPAFOZ",26:"sha384-s8coE+OtcDzXNMroxOeYxu/ww7PSVRYZ63Xnp2jEPljcjAFJULksAYCsj/2+wmap",27:"sha384-jrNoaLzewLH2tbTpBr3ZO1BtSNekFIzpp0AN0ma9pxBdBRfw9zAp0P1nKF53/Zw7",28:"sha384-VcpBz89y9hUlsoU9AgCMhyJs1mN9wyzRgJK7Vu1D53eImBXb5cR9RPaLpKpZKee0",29:"sha384-SRj/QvFRb6+grtNaxDIhh3IMjIaIJEgjoG7pIrkTz4dJkDAfczYAJn9Hwfc3iIgE",30:"sha384-nToreGS/PvzuaEIzxC9mS8VYcfOT1Euug10IY4YhauvWZKmprqDjKX7zUBBhEsgu",31:"sha384-ZWJQQWkRded0vMw/rppAZCeo3ZX0HAviuEY31uBuTrOguUdD+1fknGEvAFOE0Gk9",32:"sha384-tuPrZY1kt1YFdd8jIDWl+voBI++BvZatQ0EBpZ+NmarJ2Ojr1w/KJGU3DeTzAy1G",33:"sha384-fErhU40qWyh4o2x9gPUOw1vMajB+xsPDjL49ieovY+DxoinuhjvsjO0O2Acc/Xop",34:"sha384-x7p7db5ZUExp5HUxbU7n6PZ69/e+scPZNCnuWT0dhwCsavs8m5C1Bv5UHoIQDxwB",35:"sha384-qL4jF23dJig9/dXOr4y/0HnOvmSHwebPZqmvMbLEvoOWiPftXh9rY8zu+aVbEsA8",36:"sha384-8YPjFE3ButtQRPqHYoYUu0gYGCV+/s2cXpgp1j645edeTBI7nQVU6yNOwNCu2JUV",37:"sha384-oeEzuZMts/PmUP/wLJ4LYzK+v8QkiJ39kYna8uK8bDI3Y2aljy4vJkiOqB5CQpdQ",38:"sha384-wFxzSZw039qNXF+vQNpfN5jGy8KIzjvnphAfS+xGYUS1aUbqqjadA3+2a6PoD3HN",39:"sha384-GL2r3jAMbl05jSCHeEdzB6nvnXC/hnaXjmoyGoYCDVhW+bGiOZEl19txJzgzIt3x",40:"sha384-Hm26jrNieLht/Fm6NEx7l6d5gpEcKIaAJWbTZC0Hdn7dQY7etRdY5vcDKdh7/GaX",41:"sha384-r9yGKq9pB89JJ6s566qg9xGtPjzMS83haCowSFsEyE6Be/AaLvL6A1L2IzF+7/JD",42:"sha384-/FeIaXQPN+Ke5dldrXvrz6a+RXBePPC6ZgnvElMaEntt3REARXEhCvReNyNy5xmx",43:"sha384-Mk8/PzjB1+gtITJIwxwAd8qq4gtMlD+oKivW4zs9aNduJrCfx6uryAnbMHE8rKGJ",44:"sha384-4NmjbbctZoIDpI0oYrdhc/KAjiPf0YFpCtVigm9oQ8LS6c2I65UQb9imdosFyT8a",45:"sha384-MhrA5nbvQW2mdGVTVXegVG1q5/DQaR+uKKl/Oc4w0t4f7sBe3RybrNG0nRwaTyvl",46:"sha384-zDBi4NGBvvUXFeF4YVnbw2iuJ/IQKKHkBt2B7sTEfnAWBtQs0o1+d26FtSL11mvR",47:"sha384-qpwA3ju66S4sFA54xhgbDR2FWQ8oees5mspSjsTYeNrHqVGPIgZ6vM/a+GrjQ+uX",48:"sha384-lzE4hvJAZ5pAMaS9mzwMyM5zpC9UEkRqxN/h+PfAyADbUGqOEb6y0BjgjFBbusSN",49:"sha384-SrW76mG7Yck3Ypz94SZKPFai4cEjq9M0jfNSbbN4/JonPEQT9d835Ka84t7hdrNL",50:"sha384-xibs8GsIE0MalEkx0KpALjrfAnyC4Yy0egjFUjEwqPzCI8lgGuPqD9x+w16PL/gy",51:"sha384-DJRLDSISQvSbE55pIhyXdFpVlGAACG44tYj7hLjAbDB6BHWLE30klV82n25s3DCV",52:"sha384-U4pd5yl/7d5llkFlRP7HDgVdPsPTB+PSv0eO//y4C6cDP8sT6eUDyBXpxyRFOIXl",53:"sha384-Qb1icXL0UfoBIbbUmFAtPj0KJHtKT6kquKY/BUpQCCfsKxuTUZ+yXE9HJCBCt3Z8",54:"sha384-tyfZIUbZ973Hc5dfktJZx085I9tXPfiOM5dVOBN3OWG3tR4wwLHLxb5Sqhr7YQqL",55:"sha384-xFyzbmJBSRTG14bxUD8LSZKU7ZEluzXuxAop/aVnTdQC46AbJ5lHQYc9VA4SEaKm",56:"sha384-mMdknU2E4wRoaJzhJ8YOIwURCQ7+kMh9V0+h7jNwt183u+Cy0dRkq8aHfH2Rvj8H",57:"sha384-NEt3FPcS/KPgd/pM94ECv4qW9lScMQl2SmuOShvOJACYHM5BYQjdUqYq3mITbYHv",58:"sha384-uWC7Mq/iGBjutexYRHujyFw21gpgGD5yvJ5vfklZiQohGHCIEYRM/FRlaXq2m2SJ",59:"sha384-T9qk/wd1Z1Dj2qbO46IFc+43mf7uFrUQS3NsST3sLNjUM9Q7kgsxhn5zh4dfrtxm",60:"sha384-JOeri0ApfHIKIcjmItSP3S0HeP+WVC5UgizagKpZlGoOWurnN6K0JpQi84VOHwfc",61:"sha384-INSJAEMy/PN+MEIfj0xRJAmO4SKCKkcCvDeWRRZHE0lvxFVLN+uZSlstLJt7eCw0",62:"sha384-HyReR/16KttPy4N2qtQb1xjwMKFcAGg3XwUFSaWX19AFiS+HMT2BuZWOy3XKkg6x",63:"sha384-Y0hiKbFd98+RwoftdYstfAU5Pv8ZQy99HI2skeXAkKrgjC7rjUkJXKLw4DFrjxbN",64:"sha384-6dpxYT+ACA0U76AJP6taqIqGMgPMRQFDgzxvZMr2nxb0Az6HMwJ9TpS3MA3izqPh"};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(e){return i.p+""+({}[e]||e)+"."+{3:"8cc6bd05",4:"289eac7a",5:"34349e75",6:"87e23fae",7:"ce6bb801",8:"4fb07aef",9:"947f57b2",10:"c500f9e0",11:"6e754a52",12:"2de2dcec",13:"26218c77",14:"4232a5ec",15:"609df72e",16:"012fa836",17:"bdebd471",18:"08ebfe2c",19:"16f6169c",20:"d736650b",21:"10671e7d",22:"a56c611e",23:"66ca65c5",24:"30469ae3",25:"ac5f5d69",26:"b6da30c6",27:"1e187bdf",28:"1dbedd03",29:"57a08404",30:"051b1870",31:"94cd7924",32:"c82c4169",33:"fec249b2",34:"091970ef",35:"990b39c7",36:"6bd0e35d",37:"99015436",38:"41c9f701",39:"459f1e59",40:"628e857b",41:"184cdca1",42:"e893aea6",43:"a458ed20",44:"37493299",45:"4deed603",46:"4c1a2f55",47:"26991b7c",48:"e415b576",49:"59a11d7d",50:"56cee7c7",51:"eb96219e",52:"896d8463",53:"6e331f91",54:"752e1167",55:"ac9be0c7",56:"92580cea",57:"ba7fd9cf",58:"fe25594a",59:"fbd3d022",60:"f764d01c",61:"9d38de72",62:"ac5ad630",63:"81184869",64:"c6d1b7db"}[e]+".chunk.js"}(e),0!==u.src.indexOf(window.location.origin+"/")&&(u.crossOrigin="anonymous");var l=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(s);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",l.name="ChunkLoadError",l.type=r,l.request=c,n[1](l)}a[e]=void 0}};var s=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,u.integrity=o[e],u.crossOrigin="anonymous",document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window.webpackJsonp=window.webpackJsonp||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var f=l;c.push([0,2]),n()}({"+wUL":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"CLIENT_ID",(function(){return m})),n.d(r,"CLIENT_TYPE",(function(){return p})),n.d(r,"CLIENT_SECRET",(function(){return b})),n.d(r,"APP_VERSION",(function(){return v})),n.d(r,"APP_NAME",(function(){return h})),n.d(r,"API_URL",(function(){return g})),n.d(r,"SECURE_URL",(function(){return O})),n.d(r,"LOCALES",(function(){return y})),n.d(r,"API_VERSION",(function(){return j})),n.d(r,"DATE_VERSION",(function(){return E})),n.d(r,"CHANGELOG_PATH",(function(){return x})),n.d(r,"VERSION_PATH",(function(){return w})),n.d(r,"SENTRY_RELEASE",(function(){return C})),n.d(r,"SENTRY_DSN",(function(){return k}));n("pNMO"),n("4Brf"),n("tjZM"),n("3I1R"),n("7+kd"),n("0oug"),n("KhsS"),n("gOCb"),n("a57n"),n("GXvd"),n("I1Gw"),n("gXIK"),n("lEou"),n("gbiT"),n("ma9I"),n("qHT+"),n("piMb"),n("yyme"),n("TeQF"),n("fbCW"),n("x0AG"),n("BIHw"),n("XbcX"),n("QWBl"),n("pjDv"),n("yq1k"),n("yXV3"),n("4mDm"),n("oVuX"),n("uqXc"),n("2B1R"),n("Xe3L"),n("E9XD"),n("9N29"),n("Junv"),n("+2oP"),n("Rfxz"),n("ToJy"),n("94Xl"),n("pDQq"),n("QGkA"),n("c9m3"),n("wZ/5"),n("gtqK"),n("rOQg"),n("tCCV"),n("rMz7"),n("9LPj"),n("7+zs"),n("DQNa"),n("tW5y"),n("sMBO"),n("DEfu"),n("Tskq"),n("Uydy"),n("eajv"),n("n/mU"),n("PqOI"),n("QNnp"),n("/5zm"),n("CsgD"),n("9mRW"),n("QFcT"),n("vAFs"),n("a5NK"),n("yiG3"),n("kNcU"),n("KvGi"),n("AmFO"),n("eJiR"),n("I9xj"),n("tl/u"),n("qePV"),n("NbN+"),n("8AyJ"),n("i6QF"),n("kSko"),n("WDsR"),n("r/Vq"),n("5uH8"),n("w1rZ"),n("JevA"),n("toAj"),n("VC3L"),n("zKZe"),n("Eqjn"),n("HRxU"),n("eoL8"),n("5xtp"),n("T63A"),n("3KgV"),n("wfmh"),n("5DmW"),n("27RR"),n("cDke"),n("NBAS"),n("Kxld"),n("yQYn"),n("4h0Y"),n("5D5o"),n("tkto"),n("v5b1"),n("W/eh"),n("zuhW"),n("r5Og"),n("ExoC"),n("07d7"),n("B6y2"),n("rNhl"),n("4l63"),n("5s+n"),n("p532"),n("pv2x"),n("SuFq"),n("PzqY"),n("rBZX"),n("XUE8"),n("nkod"),n("f3jH"),n("x2An"),n("25bX"),n("G/JM"),n("1t3B"),n("ftMj"),n("i5pp"),n("TWNs"),n("rB9j"),n("U3f4"),n("JfAA"),n("YGK4"),n("9bJ7"),n("inlA"),n("9tb/"),n("JTJg"),n("PKPk"),n("Rm1S"),n("hDyC"),n("TZCg"),n("2A+d"),n("OM9Z"),n("UxlC"),n("hByQ"),n("EnZy"),n("LKBx"),n("SYor"),n("HiXI"),n("7ueG"),n("GKVU"),n("E5NM"),n("BNMt"),n("zHFu"),n("x83w"),n("l2dK"),n("GRPF"),n("xdBZ"),n("mRH6"),n("yWo2"),n("IxXR"),n("TFPT"),n("Zk8X"),n("z8NH"),n("SpvK"),n("/Yfv"),n("iwkZ"),n("FDzp"),n("XMab"),n("ilnZ"),n("hMMk"),n("+ywr"),n("moxL"),n("qXVe"),n("c162"),n("waxf"),n("0TkE"),n("Onu3"),n("1dYe"),n("IL/d"),n("gvgV"),n("6R/c"),n("YL0P"),n("X5Zq"),n("MoCz"),n("P8wP"),n("7JcK"),n("ypFw"),n("JaFt"),n("zSZm"),n("PF2M"),n("KVSy"),n("ZJ55"),n("IZzc"),n("Fwt+"),n("s5qe"),n("cvf0"),n("ENF9"),n("H+LF"),n("FZtP"),n("3bBZ"),n("Ew+T"),n("n5b4"),n("Kz25"),n("vxnP"),n("mGGf");var a=n("i8i4"),c=n.n(a),o=n("q1tI"),i=n.n(o),u=(n("ls82"),n("wSuE")),l=(n("pZvr"),n("sQ7P")),s=n("U0S0"),f=n("6lBS"),d=n("g5XH"),m="WebContacts",p=1,b="",v="0.0.0",h="proton-contacts",g="https://protonmail.blue/api",O="https://secure.protonmail.blue",y={},j="3",E="Mon, 16 Dec 2019 21:04:00 GMT",x="assets/changelog.tpl.html",w="assets/version.json",C="",k="",P=n("LTi8"),N=n("VjqJ"),D=n("yoKv"),I=n("4p7I"),S=n("mLw1"),A=n("mBH9"),M=n("pW7U"),T=n("p2/2"),L=n("f6D/"),K=n("XTKM"),G=n("/kVl"),R=n("Iivb"),F=n("FZZp"),U=n("Xrgn"),B=n("+q81"),z=n("8hY9"),V=n("bf08"),W=n("veyU"),Y=Object(o.createContext)(),H=function(e){var t=e.children,n=Object(F.a)().subscribe,r=Object(U.a)((function(){return Object(B.a)(Object(z.a)({max:10}))}));return Object(o.useLayoutEffect)((function(){return n((function(e){var t=e.Contacts;if(Array.isArray(t)){var n=!0,a=!1,c=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var u=o.value,l=u.ID,s=u.Action,f=u.Contact;r.has(l)&&(s===V.t.DELETE&&r.delete(l),s===V.t.UPDATE&&r.set(l,{value:f,status:W.a.RESOLVED}))}}catch(d){a=!0,c=d}finally{try{n||null==i.return||i.return()}finally{if(a)throw c}}}}))}),[]),i.a.createElement(Y.Provider,{value:r},t)},X=n("VkAN"),J=n.n(X),Q=n("lSNA"),Z=n.n(Q),q=n("J4zp"),_=n.n(q),$=n("whF5"),ee=n("KAzH"),te=n("F9b+"),ne=n("X9p3"),re=n("yfEu"),ae=n("7xJH"),ce=n("nitM"),oe=n("wc4/"),ie=n("eBbU"),ue=n("27li"),le=n("ImWu"),se=n("LKB7"),fe=n("DIu/"),de=n("RIqP"),me=n.n(de);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=["fn","email","tel","adr"],he=function(e){return ve.includes(e)},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return e.value})).map((function(e){return Array.isArray(e.value)?e:be({},e,{value:e.value.toString()})})).map((function(e){var t=e.field,n=e.value;return"adr"!==t||Array.isArray(n)?e:be({},e,{value:n.split(",").slice(0,6)})}))},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=ve.reduce((function(e,t){return e[t]=0,e}),Object.create(null));return e.map((function(e){return ve.includes(e.field)?be({},e,{pref:t[e.field]=t[e.field]+1}):e}))},ye=function(e,t){return+e.pref<=+t.pref},je=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=1,n=!1;!n;)e.includes("item".concat(t))?t++:n=!0;return"item".concat(t)},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e.group}));return e.map((function(e){if(!["email"].includes(e.field)||e.group)return e;var n=je(t);return t.push(n),be({},e,{group:n})}))},xe=function(e,t){return(e.find((function(e){return e.field===t}))||{}).value},we=function(e,t){return Oe(e).filter((function(e){return e.field===t})).sort(ye).map((function(e){return e.value}))},Ce=n("+AqD"),ke=n("o0o1"),Pe=n.n(ke),Ne=n("UeCU"),De=n.n(Ne),Ie=n("HlEg"),Se=function(e){var t=function(e){try{return e.getValues()}catch(r){var t=e.jCal||[],n=_()(t,4)[3];return[void 0===n?"":n]}}(e).map((function(e){return Array.isArray(e)?e:"string"==typeof e?e:e.toString()}));return _()(t,1)[0]},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toLowerCase().replace("x-","")},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e.length?e[0]:"":e},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(Boolean).map((function(e){return e.trim()})).join(", ")},Le="1*",Ke="*",Ge={fn:{cardinality:Le},n:{cardinality:"*1"},nickname:{cardinality:Ke},photo:{cardinality:Ke},bday:{cardinality:"*1"},anniversary:{cardinality:"*1"},gender:{cardinality:"*1"},adr:{cardinality:Ke},tel:{cardinality:Ke},email:{cardinality:Ke},impp:{cardinality:Ke},lang:{cardinality:Ke},tz:{cardinality:Ke},geo:{cardinality:Ke},title:{cardinality:Ke},role:{cardinality:Ke},logo:{cardinality:Ke},org:{cardinality:Ke},member:{cardinality:Ke},related:{cardinality:Ke},categories:{cardinality:Ke},note:{cardinality:Ke},prodid:{cardinality:"*1"},rev:{cardinality:"*1"},sound:{cardinality:Ke},uid:{cardinality:"*1"},clientpidmap:{cardinality:Ke},url:{cardinality:Ke},version:{cardinality:"1"},key:{cardinality:Ke},fburl:{cardinality:Ke},caladruri:{cardinality:Ke},caluri:{cardinality:Ke}},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith("x-")},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new De.a.Component(De.a.parse(e)),n=t.getAllProperties();return n.reduce((function(e,t){var n=t.name.split("."),r=n[1]?n[1]:n[0],a=t.getParameter("type"),c=t.getParameter("pref"),o="string"==typeof c&&he(r)?+c:void 0;if(!r)return e;if(!Re(r)&&!Ge[r])return e;var i={pref:o,field:r,group:n[1]?n[0]:void 0,type:a,value:Se(t)};return e.push(i),e}),[]).sort(ye)},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new De.a.Component("vcard");if(!e.some((function(e){return"version"===e.field}))){var n=new De.a.Property("version");n.setValue("4.0"),t.addProperty(n)}return e.reduce((function(e,t){var n=t.field,r=t.type,a=t.pref,c=t.value,o=[t.group,n].filter(Boolean).join("."),i=new De.a.Property(o);return i.setValue(c),r&&i.setParameter("type",r),a&&i.setParameter("pref",""+a),e.addProperty(i),e}),t)},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return t.forEach((function(t){var n=t.field,r=(Ge[n]||{}).cardinality;[Le,Ke].includes(void 0===r?Ke:r)?e.push(t):e.find((function(e){return e.field===n}))||e.push(t)})),e}),[])},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e.match(/BEGIN:VCARD/g)&&e.match(/BEGIN:VCARD/g).length===(e.match(/END:VCARD/g)||[]).length},Ve=function(e){var t;return Pe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pe.a.awrap(Object(Ie.a)(e));case 2:if(t=n.sent,ze(t)){n.next=5;break}throw new Error("Error when reading vcf file");case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}))};function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=function e(t){var n=!1,r=t.reduce((function(e,t){var r=e.connected,a=e.newConnections,c=function(e,t){var n=!0,r=!1,a=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;if(void 0!==t[i])return t[i]}}catch(u){r=!0,a=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return-1}(t,r);if(-1!==c){a[c]=Object(Ce.e)([].concat(me()(t),me()(a[c])));var o=!0,i=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var f=l.value;void 0===r[f]&&(r[f]=c)}}catch(h){i=!0,u=h}finally{try{o||null==s.return||s.return()}finally{if(i)throw u}}n=!0}else{var d=!0,m=!1,p=void 0;try{for(var b,v=t[Symbol.iterator]();!(d=(b=v.next()).done);d=!0){r[b.value]=a.length}}catch(h){m=!0,p=h}finally{try{d||null==v.return||v.return()}finally{if(m)throw p}}a.push(t)}return e}),{connected:Object.create(null),newConnections:[]}).newConnections;return n?e(r):t},Xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("adr"===t){var r=n.map((function(t){return!t.map((function(t,n){var r=Array.isArray(t),a=Array.isArray(e[n]);return r&&a?e[n].some((function(e){return!t.map(se.g).includes(Object(se.g)(e))})):!(!r&&!a)||Object(se.g)(t)!==Object(se.g)(e[n])})).filter(Boolean).length})).filter(Boolean),a=!r.length;return{isNewValue:a,newValue:a?e:void 0}}if("email"===t){var c=!n.map((function(e){return e.trim()})).includes(e.trim());return{isNewValue:c,newValue:c?e:void 0}}var o=!n.map(se.g).includes(Object(se.g)(e));return{isNewValue:o,newValue:o?e:void 0}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return[];var t=e.reduce((function(e,t,n){var r=e.mergedContact,a=e.mergedProperties,c=e.mergedPropertiesPrefs,o=e.mergedGroups;if(0===n){r.push.apply(r,me()(t));var i=!0,u=!1,l=void 0;try{for(var s,f=t[Symbol.iterator]();!(i=(s=f.next()).done);i=!0){var d=s.value,m=d.pref,p=d.field,b=d.value,v=d.group;a[p]?(a[p].push(b),he(p)&&c[p].push(m)):(a[p]=[b],he(p)&&(c[p]=[m])),"email"===p&&(o[b]=v)}}catch(T){u=!0,l=T}finally{try{i||null==f.return||f.return()}finally{if(u)throw l}}}else{var h=t.filter((function(e){return"email"===e.field})).map((function(e){return{email:e.value,group:e.group}})).reduce((function(e,t){var n=t.email,r=t.group;return Object.values(o).includes(r)?e[r]=o[n]||je(Object.values(o)):e[r]=r,e}),Object.create(null)),g=!0,O=!1,y=void 0;try{for(var j,E=t[Symbol.iterator]();!(g=(j=E.next()).done);g=!0){var x=j.value,w=x.pref,C=x.field,k=x.group,P=x.value,N=k?h[k]:k;if(a[C]){var D=Xe(P,C,a[C]),I=D.isNewValue,S=D.newValue,A=he(C)?Math.max.apply(Math,me()(c[C]))+1:void 0,M=Re(C)||[Ke,Le].includes(Ge[C].cardinality);I&&M&&(r.push(Ye({},x,{pref:A,value:S,group:N})),a[C].push(S),he(C)&&(c[C]=[A]),N&&"email"===C&&(o[P]=N))}else r.push(Ye({},x,{pref:w,group:N})),a[C]=[P],he(C)&&(c[C]=[w]),N&&"email"===C&&(o[P]=N)}}catch(T){O=!0,y=T}finally{try{g||null==E.return||E.return()}finally{if(O)throw y}}}return e}),{mergedContact:[],mergedProperties:Object.create(null),mergedPropertiesPrefs:Object.create(null),mergedGroups:Object.create(null)}),n=t.mergedContact;return n},Qe=n("0U2K"),Ze=n("rbcQ"),qe=n("9C/b"),_e=n("b9ZJ"),$e=n.n(_e),et=n("QWsV"),tt=n.n(et),nt=n("ai43"),rt=n("zI3M"),at=n("pVnL"),ct=n.n(at),ot=n("QILm"),it=n.n(ot),ut=n("pIIs"),lt=n("/z5T"),st=n("ncqd"),ft=n("+Vas"),dt=n("FbvF"),mt=n("sjWO"),pt=n("YJeA"),bt=n("CzMN"),vt=n("Md23"),ht=n("e2Bf"),gt=n("0xu3");function Ot(){var e=J()(["Delete"]);return Ot=function(){return e},e}var yt=function(e){var t=e.file,n=e.iconName,r=e.className,a=e.clear,c=void 0===a?Object($.c)("Action").t(Ot()):a,o=e.onClear,u=it()(e,["file","iconName","className","clear","onClear"]),l=Object(Ie.b)(t.name),s=_()(l,2),f=s[0],d=s[1];return i.a.createElement("div",ct()({className:"flex bordered-container w100 ".concat(r)},u),i.a.createElement("div",{className:"p0-5 flex flex-item-noshrink w10"},i.a.createElement(vt.a,{name:n,className:"mauto"})),i.a.createElement("div",{className:"message-attachmentInfo p0-5 flex flex-nowrap w90"},i.a.createElement("div",{className:"flex-item-fluid pr1"},i.a.createElement("div",{className:"ellipsis",title:f},f),i.a.createElement("div",null,"".concat(d.toUpperCase()," - ").concat(Object(gt.a)(t.size)))),i.a.createElement(ht.a,{className:"flex-item-noshrink",onClick:o},c)))};function jt(){var e=J()(["Select file from computer"]);return jt=function(){return e},e}function Et(){var e=J()(["We support importing CSV files from Outlook, Outlook Express, Yahoo! Mail, Hotmail, Eudora and some other apps. We also support importing vCard 4.0. (UTF-8 encoding)."]);return Et=function(){return e},e}var xt=function(e){var t=e.attached,n=e.file,r=e.onAttach,a=e.onClear;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ft.a,{learnMore:"https://protonmail.com/support/knowledge-base/adding-contacts/"},Object($.c)("Description").t(Et())),i.a.createElement(pt.a,{className:"flex"},t?i.a.createElement(yt,{file:n,iconName:"contacts-groups",onClear:a}):i.a.createElement(bt.a,{className:"center",accept:".csv, .vcf",id:"import-contacts",onChange:r},Object($.c)("Action").t(jt()))))};xt.PropTypes={files:[]};var wt=xt,Ct=n("/hVJ"),kt=n("Z/R7"),Pt=n("h075"),Nt=n("fTXG");function Dt(){var e=J()(["VALUES"]);return Dt=function(){return e},e}function It(){var e=J()(["VCARD FIELD"]);return It=function(){return e},e}function St(){var e=J()(["CSV FIELD"]);return St=function(){return e},e}function At(){var e=J()(["IMPORT"]);return At=function(){return e},e}var Mt=function(e){var t=e.disabledPrevious,n=e.disabledNext,r=e.onPrevious,a=e.onNext,c=it()(e,["disabledPrevious","disabledNext","onPrevious","onNext"]);return i.a.createElement("thead",c,i.a.createElement("tr",null,i.a.createElement(Nt.a,{type:"header",className:"w15 aligncenter"},Object($.c)("TableHeader").t(At())),i.a.createElement(Nt.a,{type:"header",className:"aligncenter"},Object($.c)("TableHeader").t(St())),i.a.createElement(Nt.a,{type:"header",className:"aligncenter"},Object($.c)("TableHeader").t(It())),i.a.createElement(Nt.a,{type:"header",className:"w30 aligncenter"},i.a.createElement("div",{className:"inline-flex"},i.a.createElement("span",{className:"flex-item-centered-vert mr0-5"},Object($.c)("TableHeader").t(Dt())),i.a.createElement("span",{className:"flex flex-nowrap"},i.a.createElement(ht.a,{disabled:t,icon:i.a.createElement(vt.a,{name:"caret",className:"flex-item-noshrink rotateZ-90"}),onClick:r}),i.a.createElement(ht.a,{disabled:n,icon:i.a.createElement(vt.a,{name:"caret",className:"flex-item-noshrink rotateZ-270"}),onClick:a}))))))};Mt.defaultPropTypes={disabledPrevious:!0,disabledNext:!0};var Tt=Mt,Lt=n("ErEO"),Kt=n("tWpJ"),Gt=n("dVIL"),Rt=n("SI5Q");function Ft(){var e=J()(["Sound"]);return Ft=function(){return e},e}function Ut(){var e=J()(["Categories"]);return Ut=function(){return e},e}function Bt(){var e=J()(["Related"]);return Bt=function(){return e},e}function zt(){var e=J()(["IMPP"]);return zt=function(){return e},e}function Vt(){var e=J()(["Member"]);return Vt=function(){return e},e}function Wt(){var e=J()(["Logo"]);return Wt=function(){return e},e}function Yt(){var e=J()(["Geo"]);return Yt=function(){return e},e}function Ht(){var e=J()(["Timezone"]);return Ht=function(){return e},e}function Xt(){var e=J()(["Language"]);return Xt=function(){return e},e}function Jt(){var e=J()(["Gender"]);return Jt=function(){return e},e}function Qt(){var e=J()(["URL"]);return Qt=function(){return e},e}function Zt(){var e=J()(["Note"]);return Zt=function(){return e},e}function qt(){var e=J()(["Role"]);return qt=function(){return e},e}function _t(){var e=J()(["Title"]);return _t=function(){return e},e}function $t(){var e=J()(["Anniversary"]);return $t=function(){return e},e}function en(){var e=J()(["Birthday"]);return en=function(){return e},e}function tn(){var e=J()(["Organization"]);return tn=function(){return e},e}function nn(){var e=J()(["Photo"]);return nn=function(){return e},e}function rn(){var e=J()(["Address"]);return rn=function(){return e},e}function an(){var e=J()(["Phone"]);return an=function(){return e},e}function cn(){var e=J()(["Email"]);return cn=function(){return e},e}function on(){var e=J()(["Nickname"]);return on=function(){return e},e}function un(){var e=J()(["Compact name"]);return un=function(){return e},e}function ln(){var e=J()(["Name"]);return ln=function(){return e},e}function sn(){var e=J()(["Logo"]);return sn=function(){return e},e}function fn(){var e=J()(["Geo"]);return fn=function(){return e},e}function dn(){var e=J()(["Timezone"]);return dn=function(){return e},e}function mn(){var e=J()(["Language"]);return mn=function(){return e},e}function pn(){var e=J()(["Gender"]);return pn=function(){return e},e}function bn(){var e=J()(["URL"]);return bn=function(){return e},e}function vn(){var e=J()(["Note"]);return vn=function(){return e},e}function hn(){var e=J()(["Member"]);return hn=function(){return e},e}function gn(){var e=J()(["Role"]);return gn=function(){return e},e}function On(){var e=J()(["Title"]);return On=function(){return e},e}function yn(){var e=J()(["Anniversary"]);return yn=function(){return e},e}function jn(){var e=J()(["Birthday"]);return jn=function(){return e},e}function En(){var e=J()(["Organization"]);return En=function(){return e},e}function xn(){var e=J()(["Photo"]);return xn=function(){return e},e}function wn(){var e=J()(["Logo"]);return wn=function(){return e},e}function Cn(){var e=J()(["Geo"]);return Cn=function(){return e},e}function kn(){var e=J()(["Timezone"]);return kn=function(){return e},e}function Pn(){var e=J()(["Language"]);return Pn=function(){return e},e}function Nn(){var e=J()(["Gender"]);return Nn=function(){return e},e}function Dn(){var e=J()(["URL"]);return Dn=function(){return e},e}function In(){var e=J()(["Note"]);return In=function(){return e},e}function Sn(){var e=J()(["Member"]);return Sn=function(){return e},e}function An(){var e=J()(["Role"]);return An=function(){return e},e}function Mn(){var e=J()(["Title"]);return Mn=function(){return e},e}function Tn(){var e=J()(["Anniversary"]);return Tn=function(){return e},e}function Ln(){var e=J()(["Birthday"]);return Ln=function(){return e},e}function Kn(){var e=J()(["Organization"]);return Kn=function(){return e},e}function Gn(){var e=J()(["Photo"]);return Gn=function(){return e},e}function Rn(){var e=J()(["Address"]);return Rn=function(){return e},e}function Fn(){var e=J()(["Phone"]);return Fn=function(){return e},e}function Un(){var e=J()(["Email"]);return Un=function(){return e},e}function Bn(){var e=J()(["Name"]);return Bn=function(){return e},e}function zn(){var e=J()(["Sound"]);return zn=function(){return e},e}function Vn(){var e=J()(["Categories"]);return Vn=function(){return e},e}function Wn(){var e=J()(["Related"]);return Wn=function(){return e},e}function Yn(){var e=J()(["IMPP"]);return Yn=function(){return e},e}function Hn(){var e=J()(["Member"]);return Hn=function(){return e},e}function Xn(){var e=J()(["Logo"]);return Xn=function(){return e},e}function Jn(){var e=J()(["Geo"]);return Jn=function(){return e},e}function Qn(){var e=J()(["Timezone"]);return Qn=function(){return e},e}function Zn(){var e=J()(["Language"]);return Zn=function(){return e},e}function qn(){var e=J()(["Gender"]);return qn=function(){return e},e}function _n(){var e=J()(["URL"]);return _n=function(){return e},e}function $n(){var e=J()(["Note"]);return $n=function(){return e},e}function er(){var e=J()(["Role"]);return er=function(){return e},e}function tr(){var e=J()(["Title"]);return tr=function(){return e},e}function nr(){var e=J()(["Anniversary"]);return nr=function(){return e},e}function rr(){var e=J()(["Birthday"]);return rr=function(){return e},e}function ar(){var e=J()(["Organization"]);return ar=function(){return e},e}function cr(){var e=J()(["Photo"]);return cr=function(){return e},e}function or(){var e=J()(["Address"]);return or=function(){return e},e}function ir(){var e=J()(["Phone"]);return ir=function(){return e},e}function ur(){var e=J()(["Email"]);return ur=function(){return e},e}function lr(){var e=J()(["Nickname"]);return lr=function(){return e},e}function sr(){var e=J()(["Compact name"]);return sr=function(){return e},e}function fr(){var e=J()(["Name"]);return fr=function(){return e},e}var dr=function(){return[{text:Object($.c)("Contact field label").t(xn()),value:"photo"},{text:Object($.c)("Contact field label").t(En()),value:"org"},{text:Object($.c)("Contact field label").t(jn()),value:"bday"},{text:Object($.c)("Contact field label").t(yn()),value:"anniversary"},{text:Object($.c)("Contact field label").t(On()),value:"title"},{text:Object($.c)("Contact field label").t(gn()),value:"role"},{text:Object($.c)("Contact field label").t(hn()),value:"member"},{text:Object($.c)("Contact field label").t(vn()),value:"note"},{text:Object($.c)("Contact field label").t(bn()),value:"url"},{text:Object($.c)("Contact field label").t(pn()),value:"gender"},{text:Object($.c)("Contact field label").t(mn()),value:"lang"},{text:Object($.c)("Contact field label").t(dn()),value:"tz"},{text:Object($.c)("Contact field label").t(fn()),value:"geo"},{text:Object($.c)("Contact field label").t(sn()),value:"logo"}]},mr=function(){return{fn:Object($.c)("Contact field label").t(ln()),n:Object($.c)("Contact field label").t(un()),nickname:Object($.c)("Contact field label").t(on()),email:Object($.c)("Contact field label").t(cn()),tel:Object($.c)("Contact field label").t(an()),adr:Object($.c)("Contact field label").t(rn()),photo:Object($.c)("Contact field label").t(nn()),org:Object($.c)("Contact field label").t(tn()),bday:Object($.c)("Contact field label").t(en()),anniversary:Object($.c)("Contact field label").t($t()),title:Object($.c)("Contact field label").t(_t()),role:Object($.c)("Contact field label").t(qt()),note:Object($.c)("Contact field label").t(Zt()),url:Object($.c)("Contact field label").t(Qt()),gender:Object($.c)("Contact field label").t(Jt()),lang:Object($.c)("Contact field label").t(Xt()),tz:Object($.c)("Contact field label").t(Ht()),geo:Object($.c)("Contact field label").t(Yt()),logo:Object($.c)("Contact field label").t(Wt()),member:Object($.c)("Contact field label").t(Vt()),impp:Object($.c)("Contact field label").t(zt()),related:Object($.c)("Contact field label").t(Bt()),categories:Object($.c)("Contact field label").t(Ut()),sound:Object($.c)("Contact field label").t(Ft())}},pr=function(e){var t=e.value,n=e.onChangeField,r=[{text:Object($.c)("Contact field label").t(fr()),value:"fn"},{text:Object($.c)("Contact field label").t(sr()),value:"n"},{text:Object($.c)("Contact field label").t(lr()),value:"nickname"},{text:Object($.c)("Contact field label").t(ur()),value:"email"},{text:Object($.c)("Contact field label").t(ir()),value:"tel"},{text:Object($.c)("Contact field label").t(or()),value:"adr"},{text:Object($.c)("Contact field label").t(cr()),value:"photo"},{text:Object($.c)("Contact field label").t(ar()),value:"org"},{text:Object($.c)("Contact field label").t(rr()),value:"bday"},{text:Object($.c)("Contact field label").t(nr()),value:"anniversary"},{text:Object($.c)("Contact field label").t(tr()),value:"title"},{text:Object($.c)("Contact field label").t(er()),value:"role"},{text:Object($.c)("Contact field label").t($n()),value:"note"},{text:Object($.c)("Contact field label").t(_n()),value:"url"},{text:Object($.c)("Contact field label").t(qn()),value:"gender"},{text:Object($.c)("Contact field label").t(Zn()),value:"lang"},{text:Object($.c)("Contact field label").t(Qn()),value:"tz"},{text:Object($.c)("Contact field label").t(Jn()),value:"geo"},{text:Object($.c)("Contact field label").t(Xn()),value:"logo"},{text:Object($.c)("Contact field label").t(Hn()),value:"member"},{text:Object($.c)("Contact field label").t(Yn()),value:"impp"},{text:Object($.c)("Contact field label").t(Wn()),value:"related"},{text:Object($.c)("Contact field label").t(Vn()),value:"categories"},{text:Object($.c)("Contact field label").t(zn()),value:"sound"}];return i.a.createElement(Gt.a,{className:"pt0"},i.a.createElement(Rt.a,{value:t,options:r,onChange:function(e){var t=e.target;return n(t.value)}}))};function br(){var e=J()(["Emergency"]);return br=function(){return e},e}function vr(){var e=J()(["Agent"]);return vr=function(){return e},e}function hr(){var e=J()(["Me"]);return hr=function(){return e},e}function gr(){var e=J()(["Sweetheart"]);return gr=function(){return e},e}function Or(){var e=J()(["Date"]);return Or=function(){return e},e}function yr(){var e=J()(["Crush"]);return yr=function(){return e},e}function jr(){var e=J()(["Muse"]);return jr=function(){return e},e}function Er(){var e=J()(["Kin"]);return Er=function(){return e},e}function xr(){var e=J()(["Sibling"]);return xr=function(){return e},e}function wr(){var e=J()(["Sibling"]);return wr=function(){return e},e}function Cr(){var e=J()(["Parent"]);return Cr=function(){return e},e}function kr(){var e=J()(["Child"]);return kr=function(){return e},e}function Pr(){var e=J()(["Neighbor"]);return Pr=function(){return e},e}function Nr(){var e=J()(["Co-resident"]);return Nr=function(){return e},e}function Dr(){var e=J()(["Colleague"]);return Dr=function(){return e},e}function Ir(){var e=J()(["Co-worker"]);return Ir=function(){return e},e}function Sr(){var e=J()(["Met"]);return Sr=function(){return e},e}function Ar(){var e=J()(["Friend"]);return Ar=function(){return e},e}function Mr(){var e=J()(["Acquaintance"]);return Mr=function(){return e},e}function Tr(){var e=J()(["Contact"]);return Tr=function(){return e},e}function Lr(){var e=J()(["Other"]);return Lr=function(){return e},e}function Kr(){var e=J()(["Work"]);return Kr=function(){return e},e}function Gr(){var e=J()(["Home"]);return Gr=function(){return e},e}function Rr(){var e=J()(["Address"]);return Rr=function(){return e},e}function Fr(){var e=J()(["Pager"]);return Fr=function(){return e},e}function Ur(){var e=J()(["Fax"]);return Ur=function(){return e},e}function Br(){var e=J()(["Main"]);return Br=function(){return e},e}function zr(){var e=J()(["Mobile"]);return zr=function(){return e},e}function Vr(){var e=J()(["Other"]);return Vr=function(){return e},e}function Wr(){var e=J()(["Work"]);return Wr=function(){return e},e}function Yr(){var e=J()(["Home"]);return Yr=function(){return e},e}function Hr(){var e=J()(["Phone"]);return Hr=function(){return e},e}function Xr(){var e=J()(["Other"]);return Xr=function(){return e},e}function Jr(){var e=J()(["Work"]);return Jr=function(){return e},e}function Qr(){var e=J()(["Home"]);return Qr=function(){return e},e}function Zr(){var e=J()(["Email"]);return Zr=function(){return e},e}function qr(){var e=J()(["Yomi"]);return qr=function(){return e},e}function _r(){var e=J()(["Name"]);return _r=function(){return e},e}function $r(){var e=J()(["Pager"]);return $r=function(){return e},e}function ea(){var e=J()(["Fax"]);return ea=function(){return e},e}function ta(){var e=J()(["Other"]);return ta=function(){return e},e}function na(){var e=J()(["Yomi"]);return na=function(){return e},e}function ra(){var e=J()(["Main"]);return ra=function(){return e},e}function aa(){var e=J()(["Mobile"]);return aa=function(){return e},e}function ca(){var e=J()(["Personal"]);return ca=function(){return e},e}function oa(){var e=J()(["Work"]);return oa=function(){return e},e}var ia=function(){return{fn:[{text:Object($.c)("Property type").t(_r()),value:""},{text:Object($.c)("Property type").t(qr()),value:"yomi"}],n:[],nickname:[],email:[{text:Object($.c)("Property type").t(Zr()),value:""},{text:Object($.c)("Property type").t(Qr()),value:"home"},{text:Object($.c)("Property type").t(Jr()),value:"work"},{text:Object($.c)("Property type").t(Xr()),value:"other"}],tel:[{text:Object($.c)("Property type").t(Hr()),value:""},{text:Object($.c)("Property type").t(Yr()),value:"home"},{text:Object($.c)("Property type").t(Wr()),value:"work"},{text:Object($.c)("Property type").t(Vr()),value:"other"},{text:Object($.c)("Property type").t(zr()),value:"cell"},{text:Object($.c)("Property type").t(Br()),value:"main"},{text:Object($.c)("Property type").t(Ur()),value:"fax"},{text:Object($.c)("Property type").t(Fr()),value:"pager"}],adr:[{text:Object($.c)("Property type").t(Rr()),value:""},{text:Object($.c)("Property type").t(Gr()),value:"home"},{text:Object($.c)("Property type").t(Kr()),value:"work"},{text:Object($.c)("Property type").t(Lr()),value:"other"}],bday:[],anniversary:[],gender:[],lang:[],tz:[],geo:[],title:[],role:[],logo:[],photo:[],org:[],related:[{text:Object($.c)("Property type").t(Tr()),value:"contact"},{text:Object($.c)("Property type").t(Mr()),value:"acquaintance"},{text:Object($.c)("Property type").t(Ar()),value:"friend"},{text:Object($.c)("Property type").t(Sr()),value:"met"},{text:Object($.c)("Property type").t(Ir()),value:"co-worker"},{text:Object($.c)("Property type").t(Dr()),value:"colleague"},{text:Object($.c)("Property type").t(Nr()),value:"co-resident"},{text:Object($.c)("Property type").t(Pr()),value:"neighbor"},{text:Object($.c)("Property type").t(kr()),value:"child"},{text:Object($.c)("Property type").t(Cr()),value:"parent"},{text:Object($.c)("Property type").t(wr()),value:"sibling"},{text:Object($.c)("Property type").t(xr()),value:"spouse"},{text:Object($.c)("Property type").t(Er()),value:"kin"},{text:Object($.c)("Property type").t(jr()),value:"muse"},{text:Object($.c)("Property type").t(yr()),value:"crush"},{text:Object($.c)("Property type").t(Or()),value:"date"},{text:Object($.c)("Property type").t(gr()),value:"sweetheart"},{text:Object($.c)("Property type").t(hr()),value:"me"},{text:Object($.c)("Property type").t(vr()),value:"agent"},{text:Object($.c)("Property type").t(br()),value:"emergency"}],member:[],note:[],url:[]}},ua=function(e){var t=e.field,n=e.value,r=e.onChangeType,a=ia();return i.a.createElement(Gt.a,{className:"pt0"},i.a.createElement(Rt.a,{value:n,options:a[t],onChange:function(e){var t=e.target;return r(t.value)}}))},la=n("NpuA"),sa=n.n(la),fa=["name","initials","short name","maiden name","group membership","mileage","billing information","directory server","sensitivity","priority","subject"],da=function(e){switch(e.toLowerCase()){case"home":return"home";case"business":case"work":return"work";case"mobile":case"cell":return"cell";case"other":return"other";case"main":case"primary":return"main";case"company main":return"work";case"pager":return"pager";case"home fax":case"work fax":return"fax";default:return""}},ma=function(e){return{header:e.header,value:e.value,checked:!0,pref:1,field:"fn",type:"main",combineInto:"fn-main",combineIndex:e.index}},pa=function(e){return{header:e.header,value:e.value,checked:!0,pref:2,field:"fn",type:"yomi",combineInto:"fn-yomi",combineIndex:e.index}},ba=function(e){return{header:e.header,value:e.value,checked:!0,field:"n",combineInto:"n",combineIndex:e.index}},va=function(e){var t=e.pref;return{pref:t,header:e.header,value:e.value,checked:!0,field:"email",type:e.type,group:t}},ha=function(e){return{pref:e.pref,header:e.header,value:e.value,checked:!0,field:"tel",type:e.type}},ga=function(e){var t=e.pref,n=e.header,r=e.type,a=e.value,c=e.index;return{pref:t,header:n,value:a,checked:!0,field:"adr",type:r,combineInto:"adr-".concat(r),combineIndex:c}},Oa=function(e){return{pref:e.pref,header:e.header,value:e.value,checked:!0,field:"org",combineInto:"org",combineIndex:e.index}},ya=function(e){var t=e.original,n=e.standard,r=Object(se.g)(n),a=t;if(["title","name prefix"].includes(r))return function(e){return[ma({header:a,value:e,index:0}),ba({header:a,value:e,index:3})]};if(["first name","given name"].includes(r))return function(e){return[ma({header:a,value:e,index:1}),ba({header:a,value:e,index:1})]};if(["middle name","additional name"].includes(r))return function(e){return[ma({header:a,value:e,index:2}),ba({header:a,value:e,index:2})]};if(["last name","family name"].includes(r))return function(e){return[ma({header:a,value:e,index:3}),ba({header:a,value:e,index:0})]};if(["suffix","name suffix"].includes(r))return function(e){return[ma({header:a,value:e,index:4}),ba({header:a,value:e,index:4})]};if(["given yomi","given name yomi"].includes(r))return function(e){return pa({header:a,value:e,index:0})};if(["middle name yomi","additional name yomi"].includes(r))return function(e){return pa({header:a,value:e,index:1})};if(["surname yomi","family name yomi"].includes(r))return function(e){return pa({header:a,value:e,index:2})};if(/^company\s?(\d*)/.test(r)){var c=r.match(/^company\s?(\d*)/),o=_()(c,2)[1];return function(e){return Oa({pref:o,header:a,value:e,index:0})}}if(/^department\s?(\d*)/.test(r)){var i=r.match(/^department\s?(\d*)/),u=_()(i,2)[1];return function(e){return Oa({pref:u,header:a,value:e,index:1})}}if(/^(\w+)?\s?e-?mail\s?(\d*)/.test(r)){var l=r.match(/^(\w+)?\s?e-?mail\s?(\d*)/),s=_()(l,3),f=s[1],d=s[2];return function(e){return va({pref:d,header:a,value:e,type:f?da(f):""})}}if(/^(\w+\s*\w+)?\s?phone\s?(\d*)$/.test(r)){var m=r.match(/^(\w+\s*\w+)?\s?phone\s?(\d*)$/),p=_()(m,3),b=p[1],v=p[2];return function(e){return ha({pref:v,header:a,value:e,type:b?da(b):""})}}if(/^(\w+)?\s?fax\s?(\d*)$/.test(r)){var h=r.match(/^(\w+)?\s?fax\s?(\d*)$/),g=_()(h,3)[2];return function(e){return ha({pref:g,header:a,value:e,type:"fax"})}}if(/^(\w+)?\s?pager\s?(\d*)$/.test(r)){var O=r.match(/^(\w+)?\s?pager\s?(\d*)$/),y=_()(O,3)[2];return function(e){return ha({pref:y,header:a,value:e,type:"pager"})}}if(/^callback|telex\s?(\d*)$/.test(r)){var j=r.match(/^callback|telex\s?(\d*)$/),E=_()(j,2)[1];return function(e){return ha({pref:E,header:a,value:e,type:"other"})}}if(/^(\w*)\s?po box\s?(\d*)$/.test(r)){var x=r.match(/^(\w*)\s?po box\s?(\d*)$/),w=_()(x,3),C=w[1],k=w[2];return function(e){return ga({pref:k,header:a,type:da(C),value:e,index:0})}}if(/^(\w*)\s?extended address\s?(\d*)$/.test(r)){var P=r.match(/^(\w*)\s?extended address\s?(\d*)$/),N=_()(P,3),D=N[1],I=N[2];return function(e){return ga({pref:I,header:a,type:da(D),value:e,index:1})}}if(/^(\w*)\s?street\s?(\d*)$/.test(r)){var S=r.match(/^(\w*)\s?street\s?(\d*)$/),A=_()(S,3),M=A[1],T=A[2];return function(e){return ga({pref:T,header:a,type:da(M),value:e,index:2})}}if(/^(\w*)\s?city\s?(\d*)$/.test(r)){var L=r.match(/^(\w*)\s?city\s?(\d*)$/),K=_()(L,3),G=K[1],R=K[2];return function(e){return ga({pref:R,header:a,type:da(G),value:e,index:3})}}if(/^(\w*)\s?state\s?(\d*)$/.test(r)){var F=r.match(/^(\w*)\s?state\s?(\d*)$/),U=_()(F,3),B=U[1],z=U[2];return function(e){return ga({pref:z,header:a,type:da(B),value:e,index:4})}}if(/^(\w*)\s?postal code\s?(\d*)$/.test(r)){var V=r.match(/^(\w*)\s?postal code\s?(\d*)$/),W=_()(V,3),Y=W[1],H=W[2];return function(e){return ga({pref:H,header:a,type:da(Y),value:e,index:5})}}if(/^(\w*)\s?country|region\s?(\d*)$/.test(r)){var X=r.match(/^(\w*)\s?country\/region\s?(\d*)$/),J=_()(X,3),Q=J[1],Z=J[2];return function(e){return ga({pref:Z,header:a,type:da(Q),value:e,index:6})}}return"nickname"===r?function(e){return{header:a,value:e,checked:!0,field:"nickname"}}:"imaddress"===r?function(e){return{header:a,value:e,checked:!0,field:"impp"}}:"job title"===r?function(e){return{header:a,value:e,checked:!0,field:"title"}}:"role"===r?function(e){return{header:a,value:e,checked:!0,field:"role"}}:r.includes("relation")?function(e){return{header:a,value:e,checked:!0,field:"related"}}:"manager's name"===r?function(e){return{header:a,value:e,checked:!0,field:"related",type:"co-worker"}}:"assistant's name"===r?function(e){return{header:a,value:e,checked:!0,field:"related",type:"agent"}}:"spouse"===r?function(e){return{header:a,value:e,checked:!0,field:"related",type:"spouse"}}:"birthday"===r?function(e){return{header:a,value:e,checked:!0,field:"bday"}}:"anniversary"===r?function(e){return{header:a,value:e,checked:!0,field:"anniversary"}}:r.includes("web")?function(e){return{header:a,value:e,checked:!0,field:"url"}}:"photo"===r?function(e){return{header:a,value:e,checked:!0,field:"photo"}}:"logo"===r?function(e){return{header:a,value:e,checked:!0,field:"logo"}}:"location"===r?function(e){return{header:a,value:e,checked:!0,field:"geo",type:"main"}}:"office location"===r?function(e){return{header:a,value:e,checked:!0,field:"geo",type:"work"}}:"notes"===r||r.includes("custom field")?function(e){return{header:a,value:e,checked:!0,field:"note"}}:function(e){return{header:a,value:e,checked:!0,field:"note",custom:!0}}},ja=function(e){return e[0].checked?e[0].value:""},Ea={fn:function(e){return e.reduce((function(e,t){var n=t.value,r=t.checked;return n&&r?e+" ".concat(n):e}),"").trim()},n:function(e){var t=new Array(5).fill("");return e.forEach((function(e){var n=e.value,r=e.checked,a=e.combineIndex;r&&(t[a]=n)})),t},adr:function(e){var t=new Array(7).fill("");return e.forEach((function(e){var n=e.value,r=e.checked,a=e.combineIndex;r&&(t[a]=n)})),t},org:function(e){var t=new Array(2).fill("");return e.forEach((function(e){var n=e.value,r=e.checked,a=e.combineIndex;r&&(t[a]=n)})),t.filter(Boolean).join(";")},email:ja,tel:ja,nickname:ja,photo:ja,bday:ja,anniversary:ja,title:ja,role:ja,note:ja,url:ja,gender:ja,lang:ja,tz:ja,geo:ja,logo:ja,member:ja,impp:ja,related:ja,categories:ja,sound:ja,custom:function(e){var t=e[0],n=t.header;return t.value?"".concat(n,": ").concat(ja(e)):""}},xa={fn:function(e){return e.reduce((function(e,t){var n=t.value,r=t.checked;return n&&r?e+" ".concat(n):e}),"").trim()},n:function(e){var t=new Array(5).fill("");return e.forEach((function(e){var n=e.value,r=e.checked,a=e.combineIndex;r&&(t[a]=n)})),t.filter(Boolean).join(", ")},adr:function(e){var t=new Array(7).fill("");return e.forEach((function(e){var n=e.value,r=e.checked,a=e.combineIndex;r&&(t[a]=n)})),t.filter(Boolean).join(", ")},org:function(e){var t=new Array(2).fill("");return e.forEach((function(e){var n=e.value,r=e.checked,a=e.combineIndex;r&&(t[a]=n)})),t.filter(Boolean).join("; ")},nickname:function(e){return ja(e)[0]},email:ja,tel:ja,photo:ja,bday:ja,anniversary:ja,title:ja,role:ja,note:ja,url:ja,gender:ja,lang:ja,tz:ja,geo:ja,logo:ja,member:ja,impp:ja,related:ja,categories:ja,sound:ja,custom:function(e){var t=e[0],n=t.header,r=t.value;return t.checked&&r?"".concat(n,": ").concat(ja(e)):""}};function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ca=function(e){var t,n,r,a,c;return Pe.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Pe.a.awrap(new Promise((function(t,n){sa.a.parse(e,{header:!1,dynamicTyping:!1,complete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data,r=void 0===n?[]:n,a=e.errors,c=void 0===a?[]:a;return t({headers:r[0],contacts:r.slice(1),errors:c})},error:n,skipEmptyLines:!0})})));case 2:if(t=o.sent,n=t.headers,r=t.contacts,!t.errors.length){o.next=8;break}throw new Error("Error when reading csv file");case 8:return a=n.length,c=r.map((function(e){return e.slice(0,a)})).filter((function(e){return e.length===a})),o.abrupt("return",{headers:n,contacts:c});case 11:case"end":return o.stop()}}))},ka=function(e){var t=e.headers,n=void 0===t?[]:t,r=e.contacts,a=void 0===r?[]:r;if(!a.length)return[];var c=function(e){var t=e.headers,n=e.contacts;if(!n.length)return{headers:t,contacts:n};var r=t.map((function(e){return e.replace("_"," ").toLowerCase()})),a=r.reduce((function(e,t,r){var a=e.beRemoved,c=e.beChanged,o=n[0][r];if(function(e,t){return!t.some((function(t){return""!==t[e]}))}(r,n)&&(a[r]=!0),fa.includes(t)||t.startsWith("im")||t.includes("event"))return a[r]=!0,e;if("address"===t&&(c[r]="street"),"zip"===t&&(c[r]="postal code"),"county"===t&&(c[r]="state"),/^address\s?(\d+)? - type$/.test(t)){var i=t.match(/^address\s?\d+? - type$/),u=_()(i,2)[1],l=u||"";return a[r]=!0,a[r+1]=!0,c[r+2]=(Object(se.d)(da(o))+" Street ".concat(l)).trim(),c[r+3]=(Object(se.d)(da(o))+" City ".concat(l)).trim(),c[r+4]=(Object(se.d)(da(o))+" PO Box ".concat(l)).trim(),c[r+5]=(Object(se.d)(da(o))+" State ".concat(l)).trim(),c[r+6]=(Object(se.d)(da(o))+" Postal Code ".concat(l)).trim(),c[r+7]=(Object(se.d)(da(o))+" Country/Region ".concat(l)).trim(),c[r+8]=(Object(se.d)(da(o))+" Extended Address ".concat(l)).trim(),e}if(/^organization\s?\d+? - (\w+)$/.test(t)){var s=t.match(/^organization\s?\d+? - (\w+)$/),f=_()(s,2)[1];return"name"===f?c[r]="Company":"title"===f?c[r]="Job Title":"department"===f?c[r]="Department":"job description"===f?c[r]="Role":a[r]=!0,e}if(/(.*) - type$/i.test(t)){var d=t.match(/(.*) - type$/i),m=_()(d,2)[1];return a[r]=!0,c[r+1]=(Object(se.d)(da(o))+" "+m).trim(),e}return e}),{beRemoved:Object.create(null),beChanged:Object.create(null)}),c=a.beRemoved,o=a.beChanged;return{headers:r.map((function(e,n){return{original:t[n],standard:o[n]?o[n]:e}})).filter((function(e,t){return!c[t]})),contacts:n.map((function(e){return e.filter((function(e,t){return!c[t]}))}))}}({headers:n,contacts:a}),o=c.headers,i=c.contacts,u=o.map(ya);return i.map((function(e){return e.map((function(e,t){return u[t](e)})).flat()})).map((function(e){return e.filter((function(e){return!!e}))}))},Pa=function(e){var t=e.headers,n=void 0===t?[]:t,r=e.contacts,a=void 0===r?[]:r,c=ka({headers:n,contacts:a});if(!c.length)return[];for(var o=[],i=c[0].reduce((function(e,t,n){var r=t.combineInto,a=t.combineIndex;return r?(e[r]||(e[r]=[]),e[r][a]=n,e):(o.push(n),e)}),{}),u=0,l=Object.keys(i);u<l.length;u++){var s=l[u];i[s]=i[s].filter((function(e){return null!==e}))}var f=a.map((function(){return[]})),d=!0,m=!1,p=void 0;try{for(var b,v=function(){var e=_()(b.value,2),t=e[0],n=e[1];f.forEach((function(e){return e.push([])})),n.forEach((function(e){f.forEach((function(n,r){return n[t].push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c[r][e]))}))}))},h=Object.values(i).entries()[Symbol.iterator]();!(d=(b=h.next()).done);d=!0)v()}catch(j){m=!0,p=j}finally{try{d||null==h.return||h.return()}finally{if(m)throw p}}for(var g=function(){var e=y[O];f.forEach((function(t,n){return t.push([c[n][e]])}))},O=0,y=o;O<y.length;O++)g();return f},Na=function(e){if(!e.length)return{};var t=e[0],n=t.pref,r=t.field,a=t.type;return t.custom?{pref:n,field:r,type:a,value:Ea.custom(e),display:xa.custom(e)}:{pref:n,field:r,type:a,value:Ea[r](e),display:xa[r](e)}},Da=function(e){var t=e.preVcards,n=e.onToggle,r=e.onChangeField,a=e.onChangeType,c=Na(t),o=c.field,u=c.type,l=c.display;return t.map((function(e,c){var s=e.checked,f=e.header;return i.a.createElement("tr",{key:c.toString()},i.a.createElement("td",{className:"aligncenter"},i.a.createElement(Kt.a,{checked:s,onChange:function(){return n(c)}})),i.a.createElement("td",null,f),0===c?i.a.createElement(i.a.Fragment,null,i.a.createElement("td",{rowSpan:t.length},i.a.createElement("div",{className:"flex"},i.a.createElement(pr,{value:o,onChangeField:r}),void 0!==u?i.a.createElement(ua,{field:o,value:u,onChangeType:a}):null)),i.a.createElement("td",{rowSpan:t.length},l)):null)}))},Ia=function(e){var t=e.loading,n=e.contact,r=e.onToggle,a=e.onChangeField,c=e.onChangeType;return i.a.createElement("tbody",null,t?i.a.createElement(Lt.a,{colSpan:4}):n&&n.map((function(e,t){return i.a.createElement(Da,{key:t.toString(),preVcards:e,onToggle:r(t),onChangeField:a(t),onChangeType:c(t)})})))};Ia.defaultPropTypes={disabledPrevious:!0,disabledNext:!0};var Sa=Ia;function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ta=function(e,t,n){return e.map((function(e,r){return r!==t?e:e.map((function(e){return function(e,t){var n={fn:["","yomi"],n:[],nickname:[],email:["","home","work","other"],tel:["","home","work","other","cell","main","fax","pager"],adr:["","home","work","other"],bday:[],anniversary:[],gender:[],lang:[],tz:[],geo:[],title:[],role:[],logo:[],org:[],related:["contact","acquaintance","friend","met","co-worker","colleague","co-resident","neighbor","child","parent","sibling","spouse","kin","muse","crush","date","sweetheart","me","agent","emergency"],member:[],note:[],url:[]};return Ma({},e,{field:t,type:n[t].includes(e.type)?e.type:n[t].length?n[t][0]:void 0,custom:!1})}(e,n)}))}))},La=function(e,t,n){return e.map((function(e,r){return r!==t?e:e.map((function(e){return function(e,t){return Ma({},e,{type:t})}(e,n)}))}))};function Ka(){var e=J()(["No contacts to be imported"]);return Ka=function(){return e},e}function Ga(){var e=J()(["Also, we have automatically matched CSV fields with vCard fields. You can review and change this matching manually."]);return Ga=function(){return e},e}function Ra(){var e=J()(["We have detected the following fields in the CSV file you uploaded. Check the ones you want to import."]);return Ra=function(){return e},e}function Fa(){var e=J()(["First name and last name cannot be unchecked at the same time"]);return Fa=function(){return e},e}var Ua=function(e){var t=e.file,n=e.onSetVcardContacts,r=Object(ut.a)().createNotification,a=Object(Ct.a)(!0),c=_()(a,2),u=c[0],l=c[1],s=Object(o.useState)(0),f=_()(s,2),d=f[0],m=f[1],p=Object(o.useState)([]),b=_()(p,2),v=b[0],h=b[1];return Object(o.useEffect)((function(){l(function(){var e;return Pe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e=Pa(t),h(e);case 2:case"end":return n.stop()}}))}())}),[]),Object(o.useEffect)((function(){n(function(e){return e.map((function(e){return e.map(Na)})).sort((function(e,t){return e.pref<=t.pref}))}(v))}),[v]),i.a.createElement(i.a.Fragment,null,i.a.createElement(ft.a,null,Object($.c)("Description of the purpose of the import CSV modal").t(Ra())),i.a.createElement(ft.a,null,Object($.c)("Description of the purpose of the import CSV modal").t(Ga())),i.a.createElement(kt.a,null,i.a.createElement(Tt,{disabledPrevious:u||0===d,disabledNext:u||0===v.length||d+1===v.length,onNext:function(){return m((function(e){return e+1}))},onPrevious:function(){return m((function(e){return e-1}))}}),i.a.createElement(Sa,{loading:u,contact:v&&v[d],onToggle:function(e){return function(t){if("fn-main"===v[0][e][t].combineInto){var n=v[0][e],a=n.findIndex((function(e){return"first name"===e.header.toLowerCase()})),c=n.findIndex((function(e){return"last name"===e.header.toLowerCase()})),o=-1!==a&&n[a].checked,i=-1!==c&&n[c].checked;if(!o&&t===c||!i&&t===a)return r({type:"error",text:Object($.c)("Error notification").t(Fa())})}h(v.map((function(n){return function(e,t){var n=_()(t,2),r=n[0],a=n[1];return e.map((function(e,t){return t!==r?e:e.map((function(e,t){return t!==a?e:Ma({},e,{checked:!e.checked})}))}))}(n,[e,t])})))}},onChangeField:function(e){return function(t){return h(v.map((function(n){return Ta(n,e,t)})))}},onChangeType:function(e){return function(t){return h(v.map((function(n){return La(n,e,t)})))}}})),!u&&!v.length&&i.a.createElement(Pt.a,{className:"aligncenter"},Object($.c)("Info").t(Ka())))},Ba=n("k7CA");function za(){var e=J()(["Failed"]);return za=function(){return e},e}function Va(){var e=J()(["Completed"]);return Va=function(){return e},e}function Wa(){var e=J()(["Progress"]);return Wa=function(){return e},e}var Ya=function(e){var t=e.id,n=e.alt,r=e.displayDuring,a=void 0===r?Object($.c)("Progress bar description").t(Wa()):r,c=e.displaySuccess,o=void 0===c?Object($.c)("Progress bar description").t(Va()):c,u=e.displayFailed,l=void 0===u?Object($.c)("Progress bar description").t(za()):u,s=e.value,f=e.max,d=void 0===f?100:f,m=e.endPostponed,p=void 0!==m&&m,b=e.failed,v=void 0!==b&&b,h=it()(e,["id","alt","displayDuring","displaySuccess","displayFailed","value","max","endPostponed","failed"]),g=s<d||p,O=g?i.a.createElement(le.a,null):v?i.a.createElement(vt.a,{name:"off",fill:"warning",size:100,alt:"".concat(n,"-finished")}):i.a.createElement(vt.a,{name:"on",fill:"success",size:100,alt:"".concat(n,"-finished")}),y=v?l:o;return i.a.createElement("div",{className:"aligncenter"},O,i.a.createElement("progress",ct()({className:"progress-contact w100 mt1","aria-describedby":t,value:s,max:d},h)),i.a.createElement("p",{"aria-atomic":"true","aria-live":"polite",id:"id"},g?"".concat(a,": ").concat(s,"%"):y))},Ha=n("I7cj"),Xa=n("KeOk");function Ja(){var e=J()(["Click for details"]);return Ja=function(){return e},e}var Qa=function(e){var t=e.errors,n=void 0===t?[]:t,r=e.loading,a=e.summary,c=void 0===a?Object($.c)("Info on errors").t(Ja()):a;return!!n.length&&!r&&i.a.createElement(Ha.a,null,i.a.createElement(Xa.a,null,c),i.a.createElement(pt.a,null,n.sort((function(e,t){return e.index-t.index})).map((function(e){var t=e.index,n=e.message;return i.a.createElement("div",{key:t},n)}))))},Za=n("3fNN"),qa=n("pqLH"),_a=n("Kv4S"),$a=n("ID4j"),ec=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return"proton-web-".concat(e()).concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())},tc=["bday","anniversary","gender","lang","tz","geo","title","role","photo","logo","org","member","note","url"],nc=["key","x-pm-mimetype","x-pm-encrypt","x-pm-sign","x-pm-scheme","x-pm-tls"],rc=["version","prodid","categories"],ac=["version","prodid","fn","uid","email"].concat(nc),cc=0,oc=1,ic=0,uc=1;function lc(){var e=J()(["Unknown"]);return lc=function(){return e},e}var sc=V.k.CLEAR_TEXT,fc=V.k.ENCRYPTED_AND_SIGNED,dc=V.k.SIGNED,mc=function(e){return e.reduce((function(e,t){var n=t.field;return rc.includes(n)?(e.toClearText.push(t),e):ac.includes(n)?(e.toSign.push(t),e):(e.toEncryptAndSign.push(t),e)}),{toEncryptAndSign:[],toSign:[],toClearText:[]})},pc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=[],a=mc(e),c=a.toEncryptAndSign,o=void 0===c?[]:c,i=a.toSign,u=void 0===i?[]:i,l=a.toClearText,s=void 0===l?[]:l;if(o.length>0){var f=Ue(o).toString();r.push(Object(_a.a)({data:f,publicKeys:n,privateKeys:t,armor:!0,detached:!0}).then((function(e){var t=e.data,n=e.signature;return{Type:fc,Data:t,Signature:n}})))}if(u.length>0){var d=u.some((function(e){return"uid"===e.field})),m=u.some((function(e){return"fn"===e.field}));if(!d){var p=ec();u.push({field:"uid",value:p})}if(!m){var b=Object($.c)("Default display name vcard").t(lc());u.push({field:"fn",value:b})}var v=Ue(u).toString();r.push(Object($a.g)({data:v,privateKeys:t,armor:!0,detached:!0}).then((function(e){var t=e.signature;return{Type:dc,Data:v,Signature:t}})))}if(s.length>0){var h=Ue(s).toString();r.push({Type:sc,Data:h,Signature:null})}return Promise.all(r)},bc=function(e,t){var n,r,a,c,o,i;return Pe.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n=t.privateKey,r=t.publicKey,a=ge(e),c=Oe(a),o=Ee(c),u.next=6,Pe.a.awrap(pc(o,[n],[r]));case 6:return i=u.sent,u.abrupt("return",{Cards:i});case 8:case"end":return u.stop()}}))},vc=function(){var e,t,n,r,a,c=arguments;return Pe.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:[],t=c.length>1?c[1]:void 0,n=t.privateKey,r=t.publicKey,a=e.reduce((function(e,t){return e.push(bc(t,{privateKey:n,publicKey:r})),e}),[]),o.abrupt("return",Promise.all(a));case 4:case"end":return o.stop()}}))},hc=V.k.CLEAR_TEXT,gc=function(e){return e.some((function(e){var t=e.field;return e.value&&"categories"===t}))},Oc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var n=t.contact,r=n.Cards;return n.error?e:(r.some((function(e){var t=e.Type,n=e.Data;return t===hc&&n.includes("CATEGORIES")}))?e.withCategories.push(t):e.withoutCategories.push(t),e)}),{withCategories:[],withoutCategories:[]})},yc=function(e,t,n){return 0==+n?0:Math.min(Math.floor((+e+t)/n*100),100)},jc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){var n=t.allocated,r=t.successful,a=t.failed,c=t.total;return e.combinedTotal+=c,e.combinedAllocations+=n,e.progresses.push(yc(r,a,c)),e}),{combinedTotal:0,combinedAllocations:0,progresses:[]}),n=t.combinedTotal,r=t.combinedAllocations,a=t.progresses;if(1!==r&&e.length)throw new Error("Allocations must add up to one");if(!n)return 0;var c=e.reduce((function(e,t,r){return e+t.allocated*(!t.total&&n?100:a[r])}),0);return Math.round(c)};function Ec(){var e=J()(["Some contacts could not be imported. Click for details"]);return Ec=function(){return e},e}function xc(){var e=J()(["No contacts imported"]);return xc=function(){return e},e}function wc(){var e=J()([""," out of "," contact successfully imported."]);return wc=function(){return e},e}function Cc(){var e=J()(["Encrypting and importing contacts... This may take a few minutes. When the process is completed, you can close this modal."]);return Cc=function(){return e},e}function kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kc(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nc(){var e=J()(["Contact "," from your list could not be imported. ",""]);return Nc=function(){return e},e}function Dc(){var e=J()(["Contact "," from your list could not be encrypted."]);return Dc=function(){return e},e}function Ic(){var e=J()(["Contact "," from your list could not be parsed. ",""]);return Ic=function(){return e},e}var Sc=oc,Ac=ic,Mc=uc,Tc=V.b.SINGLE_SUCCESS,Lc=function(e,t){return Object($.c)("Info on errors importing contacts").t(Ic(),e,t)},Kc=function(e){return Object($.c)("Info on errors importing contacts").t(Dc(),e)},Gc=function(e,t){return Object($.c)("Info on errors importing contacts").t(Nc(),e,t)},Rc=function(e){var t=e.isVcf,n=e.file,r=void 0===n?"":n,a=e.vcardContacts,c=e.privateKey,u=e.onFinish,l=Object(Ba.a)(),s=Object(Ct.a)(!0),f=_()(s,2),d=f[0],m=f[1],p=Object(o.useState)({total:a.length,parsed:a.map((function(e,t){return{index:t,contact:e}})),encrypted:[],submitted:[],failedOnEncrypt:[],failedOnParse:[],failedOnSubmit:[]}),b=_()(p,2),v=b[0],h=b[1];Object(o.useEffect)((function(){var e,n,o,i,s,f,d,p=new AbortController,b=function(e){var t=e.signal,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("END:VCARD");return t.pop(),t.map((function(e){return e.trim()+"\r\nEND:VCARD"}))}(r);return!t.aborted&&h(Pc({},v,{total:n.length})),t.aborted?[]:n.reduce((function(e,n,r){try{if(n.includes("VERSION:2.1")||n.includes("VERSION:3.0"))throw new Error("vCard versions < 4.0 not supported");var a=Fe(n);e.push({index:r,contact:a})}catch(o){var c=o.message;!t.aborted&&h((function(e){return Pc({},e,{failedOnParse:[].concat(me()(e.failedOnParse),[{index:r,message:Lc(r+1,c)}])})}))}return e}),[])},g=function(e,t,n){var r,a,o,i;return Pe.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r=e.contact,a=e.index,o=n.signal,u.prev=2,u.next=5,Pe.a.awrap(bc(r,{privateKey:c,publicKey:t}));case 5:return i=u.sent,!o.aborted&&h((function(e){return Pc({},e,{encrypted:[].concat(me()(e.encrypted),[i])})})),u.abrupt("return",{index:a,contact:i});case 10:return u.prev=10,u.t0=u.catch(2),!o.aborted&&h((function(e){return Pc({},e,{failedOnEncrypt:[].concat(me()(e.failedOnEncrypt),[{index:a,message:Kc(a+1)}])})})),u.abrupt("return",{index:a,contact:{error:!0}});case 14:case"end":return u.stop()}}),null,null,[[2,10]])},O=function(){var e,t,n,r,a=arguments;return Pe.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:[],t=a.length>1?a[1]:void 0,n=a.length>2?a[2]:void 0,!(r=n.signal).aborted){c.next=5;break}return c.abrupt("return",[]);case 5:return c.abrupt("return",Promise.all(e.map((function(e){return g(e,t,{signal:r})}))));case 6:case"end":return c.stop()}}))},y=function(){var e,t,n,r,a,o,i,u,l,s,f,d,m,p=arguments;return Pe.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:e=p.length>0&&void 0!==p[0]?p[0]:[],t=p.length>1?p[1]:void 0,n=t.signal,r=c.toPublic(),a=Object(Ce.a)(e,5),o=[],i=!0,u=!1,l=void 0,b.prev=8,s=a[Symbol.iterator]();case 10:if(i=(f=s.next()).done){b.next=21;break}if(d=f.value,!n.aborted){b.next=14;break}return b.abrupt("return",[]);case 14:return b.next=16,Pe.a.awrap(O(d,r,{signal:n}));case 16:m=b.sent,o.push.apply(o,me()(m));case 18:i=!0,b.next=10;break;case 21:b.next=27;break;case 23:b.prev=23,b.t0=b.catch(8),u=!0,l=b.t0;case 27:b.prev=27,b.prev=28,i||null==s.return||s.return();case 30:if(b.prev=30,!u){b.next=33;break}throw l;case 33:return b.finish(30);case 34:return b.finish(27);case 35:return b.abrupt("return",o);case 36:case"end":return b.stop()}}),null,null,[[8,23,27,35],[28,,30,34]])},j=function(e,t){var n,r,a,c,o,i,u,s,f;return Pe.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(n=e.contacts,r=void 0===n?[]:n,a=e.labels,!(c=t.signal).aborted&&r.length){d.next=4;break}return d.abrupt("return");case 4:return o=r.map((function(e){return e.index})),d.next=7,Pe.a.awrap((m=Object(Za.a)({Contacts:r.map((function(e){return e.contact})),Overwrite:Sc,Labels:a,timeout:36e5}),l(Pc({},m,{signal:p.signal}))));case 7:if(d.t0=function(e){return e.Response},i=d.sent.Responses.map(d.t0),!c.aborted){d.next=11;break}return d.abrupt("return");case 11:u=i.reduce((function(e,t,n){var r=t.Code,a=t.Error,c=t.Contact,i=(c=void 0===c?{}:c).ID,u=o[n];return r===Tc?e.submittedBatch.push(i):e.failedOnSubmitBatch.push({index:u,message:Gc(u+1,a)}),e}),{submittedBatch:[],failedOnSubmitBatch:[]}),s=u.submittedBatch,f=u.failedOnSubmitBatch,h((function(e){return Pc({},e,{submitted:[].concat(me()(e.submitted),me()(s)),failedOnSubmit:[].concat(me()(e.failedOnSubmit),me()(f))})}));case 13:case"end":return d.stop()}var m}))},E=function(e,t){var n,r,a,c,o,i,u;return Pe.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=e.contacts,r=void 0===n?[]:n,a=e.labels,!(c=t.signal).aborted){l.next=4;break}return l.abrupt("return");case 4:o=Object(Ce.a)(r,100),i=o.length,u=0;case 7:if(!(u<i)){l.next=13;break}return l.next=10,Pe.a.awrap(Promise.all([j({contacts:o[u],labels:a},{signal:c}),Object(qa.b)(100)]));case 10:u++,l.next=7;break;case 13:case"end":return l.stop()}}))};return m((e=p,Pe.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.signal,o=t?b({signal:n}):a.map((function(e,t){return{index:t,contact:e}})),t&&!n.aborted&&h((function(e){return Pc({},e,{parsed:o})})),r.next=5,Pe.a.awrap(y(o,{signal:n}));case 5:return i=r.sent,s=Oc(i),f=s.withCategories,d=s.withoutCategories,r.next=9,Pe.a.awrap(E({contacts:f,labels:Mc},{signal:n}));case 9:return r.next=11,Pe.a.awrap(E({contacts:d,labels:Ac},{signal:n}));case 11:if(r.t0=!n.aborted,!r.t0){r.next=15;break}return r.next=15,Pe.a.awrap(u());case 15:case"end":return r.stop()}})))),function(){p.abort()}}),[]);var g=jc([{allocated:.05,successful:v.parsed.length,failed:v.failedOnParse.length,total:v.total},{allocated:.9,successful:v.encrypted.length,failed:v.failedOnEncrypt.length,total:v.total-v.failedOnParse.length},{allocated:.05,successful:v.submitted.length,failed:v.failedOnSubmit.length,total:v.total-v.failedOnParse.length-v.failedOnEncrypt.length}]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ft.a,null,Object($.c)("Description").t(Cc())),i.a.createElement(Ya,{id:"progress-import-contacts",alt:"contact-loader",value:g,displaySuccess:Object($.c)("Progress bar description").ngettext(Object($.msgid)(wc(),v.submitted.length,v.total),"".concat(v.submitted.length," out of ").concat(v.total," contacts successfully imported."),v.submitted.length),displayFailed:Object($.c)("Progress bar description").t(xc()),failed:!v.submitted.length,endPostponed:d}),i.a.createElement(Qa,{loading:d,errors:[].concat(me()(v.failedOnParse),me()(v.failedOnEncrypt),me()(v.failedOnSubmit)),summary:Object($.c)("Info on errors importing contacts").t(Ec())}))},Fc=n("BN5H");function Uc(){var e=J()(["We picked up at least one group/organization from the list of contacts you are importing. Take the time to review how we should import these groups."]);return Uc=function(){return e},e}var Bc=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(ft.a,null,Object($.c)("Description").t(Uc())),i.a.createElement(Pt.a,null,i.a.createElement(Fc.a,null)))};function zc(){var e=J()(["Create"]);return zc=function(){return e},e}function Vc(){var e=J()(["Close"]);return Vc=function(){return e},e}function Wc(){var e=J()(["Cancel"]);return Wc=function(){return e},e}function Yc(){var e=J()(["Import"]);return Yc=function(){return e},e}function Hc(){var e=J()(["File selected appears to be corrupted"]);return Hc=function(){return e},e}function Xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qc(){var e=J()(["We only support importing files smaller than 10 MB. Please split your contacts into several smaller files."]);return Qc=function(){return e},e}function Zc(){var e=J()(["File is too big!"]);return Zc=function(){return e},e}function qc(){var e=J()(["Go back"]);return qc=function(){return e},e}function _c(){var e=J()(["No .csv or .vcf file selected"]);return _c=function(){return e},e}function $c(){var e=J()(["Import"]);return $c=function(){return e},e}function eo(){var e=J()(["Import groups"]);return eo=function(){return e},e}function to(){var e=J()(["Importing contacts"]);return to=function(){return e},e}function no(){var e=J()(["Import CSV file"]);return no=function(){return e},e}function ro(){var e=J()(["Import contacts"]);return ro=function(){return e},e}function ao(){var e=J()(["Import contacts"]);return ao=function(){return e},e}var co=10*Math.pow(V.d,2),oo=function(e){var t,n=e.userKeysList,r=it()(e,["userKeysList"]),a=(t={},Z()(t,1,Object($.c)("Title").t(ao())),Z()(t,2,Object($.c)("Title").t(ro())),Z()(t,3,Object($.c)("Title").t(no())),Z()(t,4,Object($.c)("Title").t(to())),Z()(t,5,Object($.c)("Title").t(eo())),t),c=Object(te.a)().createModal,u=Object(ut.a)().createNotification,l=Object(F.a)().call,s=Object(o.useState)(1),f=_()(s,2),d=f[0],m=f[1],p=Object(o.useState)({}),b=_()(p,2),v=b[0],h=b[1],g=Object(o.useState)([]),O=_()(g,2),y=O[0],j=O[1],E=Object(o.useState)(!1),x=_()(E,2),w=x[0],C=x[1],k=function(){if(d<=2){var e=i.a.createElement(lt.a,{disabled:1===d,type:"submit"},Object($.c)("Action").t($c())),t=function(){h({}),m(1)};return{content:i.a.createElement(wt,{attached:2===d,file:v.attached,onAttach:function(e){var n=e.target,r=Object(Ie.b)(n.files[0].name),a=_()(r,2)[1],o=["csv","vcf"].includes(a.toLowerCase())?n.files[0]:null;return n.files.length&&!o?u({type:"error",text:Object($.c)("Error notification").t(_c())}):o.size>co?c(i.a.createElement(st.a,{onConfirm:t,onClose:t,confirm:Object($.c)("Action").t(qc()),close:null,title:Object($.c)("Title").t(Zc())},i.a.createElement(ft.a,{type:"error"},Object($.c)("Error info").t(Qc())))):(m(2),void h({attached:o,extension:a}))},onClear:t}),submit:e,onSubmit:function(){var e,n;return Pe.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,"csv"!==v.extension){r.next=9;break}return r.next=4,Pe.a.awrap(Ca(v.attached));case 4:e=r.sent,h(Jc({},v,{read:e})),m(3),r.next=14;break;case 9:return r.next=11,Pe.a.awrap(Ve(v.attached));case 11:n=r.sent,h(Jc({},v,{read:n})),m(4);case 14:r.next=21;break;case 16:r.prev=16,r.t0=r.catch(0),u({type:"error",text:Object($.c)("Error notification").t(Hc())}),m(1),t();case 21:case"end":return r.stop()}}),null,null,[[0,16]])}}}if(3===d){var a=i.a.createElement(lt.a,{disabled:!y.length,type:"submit"},Object($.c)("Action").t(Yc()));return{content:i.a.createElement(Ua,{file:v.read,vcardContacts:y,onSetVcardContacts:j}),submit:a,onSubmit:function(){return m(4)}}}if(4===d){var o=!w&&i.a.createElement(dt.a,null,Object($.c)("Action").t(Wc())),s=i.a.createElement(lt.a,{loading:!w,type:"submit"},Object($.c)("Action").t(Vc()));return{content:i.a.createElement(Rc,{isVcf:"vcf"===v.extension,file:v.read,vcardContacts:y,onSetVcardContacts:j,privateKey:n[0].privateKey,onFinish:function(){return Pe.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.awrap(l());case 2:C(!0);case 3:case"end":return e.stop()}}))}}),close:o,submit:s,onSubmit:r.onClose}}if(5===d){var f=i.a.createElement(lt.a,{type:"submit"},Object($.c)("Action").t(zc()));return{content:i.a.createElement(Bc,{vcardContacts:y}),submit:f,onSubmit:function(){return Pe.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.awrap(l());case 2:r.onClose();case 3:case"end":return e.stop()}}))}}}}(),P=k.content,N=it()(k,["content"]);return i.a.createElement(mt.a,ct()({title:a[d]},N,r),P)},io=n("+Ln1"),uo=n("z5T1"),lo=n("dAix"),so=n("xsSi"),fo=n("x4CE"),mo=n("Um+v"),po=n("Y6df"),bo=n("uqVu"),vo=n("rN/M"),ho=n("4+6U"),go=n("Se/U");function Oo(){var e=J()(["Upload picture"]);return Oo=function(){return e},e}var yo=function(e){var t=e.value,n=e.onChange;return i.a.createElement("div",null,t?i.a.createElement("img",{src:t}):i.a.createElement(ht.a,{onClick:n},Object($.c)("Action").t(Oo())))},jo=n("i9+t");function Eo(){var e=J()(["Extended address"]);return Eo=function(){return e},e}function xo(){var e=J()(["Post office box"]);return xo=function(){return e},e}function wo(){var e=J()(["Country"]);return wo=function(){return e},e}function Co(){var e=J()(["Postal code"]);return Co=function(){return e},e}function ko(){var e=J()(["Region"]);return ko=function(){return e},e}function Po(){var e=J()(["City"]);return Po=function(){return e},e}function No(){var e=J()(["Street address"]);return No=function(){return e},e}var Do=function(e){var t=e.value,n=e.onChange,r=Object(o.useState)(function(e){var t=Array.isArray(e)?e:e.split(",");return Array.from({length:7}).map((function(e,n){return t[n]||""}))}(t)),a=_()(r,2),c=a[0],u=a[1],l=function(e){return function(t){var r=t.target,a=me()(c);a[e]=r.value,u(a),n(a)}};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"mb1"},i.a.createElement(vo.a,{id:"street",value:c[2],placeholder:Object($.c)("Label").t(No()),onChange:l(2)})),i.a.createElement("div",{className:"mb1"},i.a.createElement(vo.a,{id:"locality",value:c[3],placeholder:Object($.c)("Label").t(Po()),onChange:l(3)})),i.a.createElement("div",{className:"mb1"},i.a.createElement("label",{className:"small opacity-50",htmlFor:"region"}),i.a.createElement(vo.a,{id:"region",value:c[4],placeholder:Object($.c)("Label").t(ko()),onChange:l(4)})),i.a.createElement("div",{className:"mb1"},i.a.createElement(vo.a,{id:"postalCode",value:c[5],placeholder:Object($.c)("Label").t(Co()),onChange:l(5)})),i.a.createElement("div",{className:Object(jo.a)([(c[0]||c[1])&&"mb1"])},i.a.createElement(vo.a,{id:"country",value:c[6],placeholder:Object($.c)("Label").t(wo()),onChange:l(6)})),c[0]?i.a.createElement("div",{className:Object(jo.a)([c[1]&&"mb1"])},i.a.createElement(vo.a,{id:"postBox",value:c[0],placeholder:Object($.c)("Label").t(xo()),onChange:l(0)})):null,c[1]?i.a.createElement("div",null,i.a.createElement(vo.a,{id:"extended",value:c[1],placeholder:Object($.c)("Label").t(Eo()),onChange:l(1)})):null)},Io=n("2PQF"),So=n("LJWS");function Ao(){var e=J()(["Upload picture"]);return Ao=function(){return e},e}function Mo(){var e=J()(["Upload picture"]);return Mo=function(){return e},e}function To(){var e=J()(["Image URL"]);return To=function(){return e},e}function Lo(){var e=J()(["Add image URL"]);return Lo=function(){return e},e}function Ko(){var e=J()(["Save"]);return Ko=function(){return e},e}function Go(){var e=J()(["Image upload failed"]);return Go=function(){return e},e}function Ro(){var e=J()(["Edit image"]);return Ro=function(){return e},e}var Fo=function(e){var t=e.url,n=e.onSubmit,r=e.onClose,a=it()(e,["url","onSubmit","onClose"]),c=Object(o.useState)(t),u=_()(c,2),l=u[0],s=u[1],f=Object($.c)("Title").t(Ro()),d=Object(ut.a)().createNotification;return i.a.createElement(mt.a,ct()({title:f,onSubmit:function(){n(l),r()},submit:Object($.c)("Action").t(Ko()),onClose:r},a),i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,{htmlFor:"contactImageModal-input-url"},Object($.c)("Label").t(Lo())),i.a.createElement(Io.a,null,i.a.createElement(vo.a,{id:"contactImageModal-input-url",value:l,onChange:function(e){var t=e.target;return s(t.value)},placeholder:Object($.c)("Placeholder").t(To())}))),i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,{htmlFor:"contactImageModal-input-file"},Object($.c)("Label").t(Mo())),i.a.createElement(Io.a,null,i.a.createElement(bt.a,{id:"contactImageModal-input-file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(){var e;return Pe.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pe.a.awrap(Object(So.b)({original:a.result,maxWidth:180,maxHeight:180,finalMimeType:"image/jpeg",encoderOptions:1,bigResize:!0}));case 3:e=t.sent,n(e),r(),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(0),d({text:Object($.c)("Error").t(Go()),type:"error"}),t.t0;case 12:case"end":return t.stop()}}),null,null,[[0,8]])},a.readAsDataURL(t)}},Object($.c)("Action").t(Ao())))))};Fo.defaultProps={url:""};var Uo=Fo,Bo=function(e){var t=e.field,n=e.value,r=e.uid,a=e.onChange,c=it()(e,["field","value","uid","onChange"]),o=Object(te.a)().createModal,u=mr(),l=function(e){var t=e.target;return a({value:t.value,uid:r})};if("email"===t)return i.a.createElement(fo.a,ct()({value:n,placeholder:u.email,onChange:l},c));if("tel"===t)return i.a.createElement(mo.a,ct()({value:n,placeholder:u.tel,onChange:l},c));if("adr"===t){return i.a.createElement(Do,{value:n,onChange:function(e){return a({value:e,uid:r})}})}if("note"===t)return i.a.createElement(po.a,ct()({value:n,placeholder:u.note,onChange:l},c));if("bday"===t||"anniversary"===t){var s=""===n?new Date:Object(ho.a)(n);if(Object(go.a)(s)){return i.a.createElement(bo.a,ct()({placeholder:u[t],value:s,onChange:function(e){return a({value:e.toISOString(),uid:r})}},c))}}if("photo"===t||"logo"===t){return i.a.createElement(yo,ct()({value:n,onChange:function(){o(i.a.createElement(Uo,{url:n,onSubmit:function(e){return a({uid:r,value:e})}}))}},c))}return i.a.createElement(vo.a,ct()({value:n,placeholder:u[t],onChange:l},c))},zo=function(e){var t=e.field,n=e.type,r=it()(e,["field","type"]),a=mr(),c=a[n]||n||a[t];return i.a.createElement("label",ct()({className:"capitalize"},r),c)},Vo=function(e){var t=e.field,n=e.uid,r=e.type,a=void 0===r?"":r,c=e.onChange,o=ia(),u=dr();return u.map((function(e){return e.value})).includes(t)?i.a.createElement(Gt.a,{className:"pt0 mr1"},i.a.createElement(Rt.a,{value:t,options:u,onChange:function(e){var t=e.target;return c({value:t.value,key:"field",uid:n})}})):"fn"!==t&&o[t].map((function(e){return e.value})).includes(a)?i.a.createElement(Gt.a,{className:"pt0 mr1"},i.a.createElement(Rt.a,{value:a,options:o[t],onChange:function(e){var t=e.target;return c({value:t.value,key:"type",uid:n})}})):i.a.createElement(zo,{field:t,type:a})};function Wo(){var e=J()(["Delete"]);return Wo=function(){return e},e}function Yo(){var e=J()(["Clear"]);return Yo=function(){return e},e}function Ho(){var e=J()(["Edit"]);return Ho=function(){return e},e}var Xo=function(e){var t=e.property,n=e.onChange,r=e.onRemove,a=e.isOrderable,c=void 0!==a&&a,o=Object(te.a)().createModal,u=t.field,l=t.uid,s=t.value,f=Ae(Me(t.type)),d=!["fn"].includes(u),m=["photo","logo"].includes(u)&&t.value,p=[["photo","logo"].includes(u)&&!!s&&{text:Object($.c)("Action").t(Ho()),onClick:function(){o(i.a.createElement(Uo,{url:t.value,onSubmit:function(e){return n({uid:l,value:e})}}))}},m&&{text:Object($.c)("Action").t(Yo()),onClick:function(){n({uid:l,value:""})}},d&&{text:Object($.c)("Action").t(Wo()),onClick:function(){r(t.uid)}}].filter(Boolean);return i.a.createElement("div",{className:"flex flex-nowrap flex-item-noshrink"},c?i.a.createElement(lo.a,{key:"icon"},i.a.createElement("div",{className:"cursor-row-resize mr0-5 flex flex-item-noshrink mb1"},i.a.createElement(vt.a,{name:"text-justify",className:"mtauto mbauto"}))):i.a.createElement("div",{className:"mr0-5 flex flex-items-center flex-item-noshrink"},i.a.createElement(vt.a,{name:"text-justify nonvisible"})),i.a.createElement("div",{className:"flex flex-nowrap flex-items-center onmobile-flex-column w95"},i.a.createElement("span",{className:"w30 flex flex-nowrap mb1"},i.a.createElement(Vo,{field:u,type:f,uid:t.uid,onChange:n})),i.a.createElement("span",{className:"w50 mb1"},i.a.createElement("div",{className:"mr1"},i.a.createElement(Bo,{field:u,value:t.value,uid:t.uid,onChange:n}))),i.a.createElement("span",{className:"w20 mb1"},p.length>0&&i.a.createElement("div",{className:"flex flex-item-noshrink flex-items-start"},i.a.createElement(so.a,{list:p})))))},Jo=n("iCC2");function Qo(){var e=J()(["Encrypted data with verified digital signature"]);return Qo=function(){return e},e}var Zo=function(e){var t=Object.assign({},e);return i.a.createElement(Jo.a,ct()({},t,{title:Object($.c)("Tooltip").t(Qo())}),i.a.createElement(vt.a,{name:"lock",className:"flex flex-item-centered"}))};function qo(){var e=J()(["Add"]);return qo=function(){return e},e}function _o(){var e=J()(["Other information"]);return _o=function(){return e},e}function $o(){var e=J()(["Addresses"]);return $o=function(){return e},e}function ei(){var e=J()(["Phone numbers"]);return ei=function(){return e},e}function ti(){var e=J()(["Email addresses"]);return ti=function(){return e},e}function ni(){var e=J()(["Display name"]);return ni=function(){return e},e}var ri={fn:"contact",email:"email",tel:"phone",adr:"address",other:"info"},ai=function(e){var t=e.properties,n=e.field,r=e.onChange,a=e.onOrderChange,c=e.onAdd,u=e.onRemove,l={fn:Object($.c)("Title").t(ni()),email:Object($.c)("Title").t(ti()),tel:Object($.c)("Title").t(ei()),adr:Object($.c)("Title").t($o()),other:Object($.c)("Title").t(_o())},s=n?l[n]:l.other,f=n?ri[n]:ri.other,d=n?[n]:tc,m=t.filter((function(e){var t=e.field;return d.includes(t)})),p=!d.includes("fn"),b=Object(o.useMemo)((function(){return m.map((function(e){return i.a.createElement(Xo,{key:e.uid,property:e,onChange:r,onRemove:u,onAdd:c,isOrderable:!!a})}))}),[m,r,u,c,!!a]),v=Object(o.useCallback)((function(e){var t=e.newIndex,r=e.oldIndex,c=Object(Ce.c)(m,r,t);a(n,c)}),[m,n]);return i.a.createElement("div",{className:"border-bottom mb1"},i.a.createElement("h3",{className:"mb1 flex flex-nowrap flex-items-center flex-item-noshrink"},i.a.createElement(vt.a,{className:"mr0-5 flex-item-noshrink",name:f}),i.a.createElement("span",{className:"mr0-5"},s),!["fn","email"].includes(n)&&i.a.createElement(Zo,{scrollContainerClass:"pm-modalContentInner",className:"flex flex-item-centered-vert flex-item-noshrink"})),a?i.a.createElement(io.a,{helperClass:"row--orderable",onSortEnd:v,useDragHandle:!0},i.a.createElement("div",null,b.map((function(e,t){return i.a.createElement(uo.a,{key:e.key,index:t},e)})))):i.a.createElement("div",null,b),p&&i.a.createElement("div",{className:"flex flex-nowrap flex-item-noshrink"},i.a.createElement("div",{className:"mr0-5 flex flex-items-center flex-item-noshrink"},i.a.createElement(vt.a,{name:"text-justify nonvisible"})),i.a.createElement("div",{className:"flex flex-nowrap w95"},i.a.createElement(lt.a,{className:"mb1",onClick:c},Object($.c)("Action").t(qo())))))},ci=n("iylp"),oi=n("WjHO");function ii(){var e=J()(["Upgrade ProtonMail"]);return ii=function(){return e},e}function ui(){var e=J()(["Unlock access to encrypted contact details such as phone numbers and addresses with ProtonMail Plus."]);return ui=function(){return e},e}function li(){var e=J()(["Upgrade to a paid plan"]);return li=function(){return e},e}var si=function(){var e=Object($.c)("Title").t(li());return i.a.createElement("div",{className:"rounded bg-global-altgrey color-white p1 mb1 flex"},i.a.createElement("div",{className:"flex-autogrid onmobile-flex-column w100"},i.a.createElement("div",{className:"flex-autogrid-item flex flex-column flex-spacebetween"},i.a.createElement("h4",null,e),i.a.createElement("div",{className:"mb2"},Object($.c)("Info").t(ui())),i.a.createElement("div",null,i.a.createElement(lt.a,{onClick:function(){return Object(f.h)("/settings/subscription")}},Object($.c)("Action").t(ii())))),i.a.createElement("div",{className:"flex-autogrid-item flex flex-column flex-items-end"},i.a.createElement("img",{className:"h100",src:oi.a,alt:e,style:{maxHeight:"200px"}}))))};function fi(){var e=J()(["Email address, phone number and address at the top of their respective list are automatically set as the default information and will be displayed in the contact information's summary section."]);return fi=function(){return e},e}function di(){var e=J()(["Save"]);return di=function(){return e},e}function mi(){var e=J()(["Contact saved"]);return mi=function(){return e},e}function pi(){var e=J()(["Contact could not be saved"]);return pi=function(){return e},e}function bi(){var e=J()(["Add new contact"]);return bi=function(){return e},e}function vi(){var e=J()(["Edit contact details"]);return vi=function(){return e},e}function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oi=[{field:"fn",value:""},{field:"email",value:""}],yi=oc,ji=cc,Ei=uc,xi=ic,wi=V.b.SINGLE_SUCCESS,Ci=[{text:Object($.c)("Contact field label").t(Bn()),value:"fn"},{text:Object($.c)("Contact field label").t(Un()),value:"email"},{text:Object($.c)("Contact field label").t(Fn()),value:"tel"},{text:Object($.c)("Contact field label").t(Rn()),value:"adr"},{text:Object($.c)("Contact field label").t(Gn()),value:"photo"},{text:Object($.c)("Contact field label").t(Kn()),value:"org"},{text:Object($.c)("Contact field label").t(Ln()),value:"bday"},{text:Object($.c)("Contact field label").t(Tn()),value:"anniversary"},{text:Object($.c)("Contact field label").t(Mn()),value:"title"},{text:Object($.c)("Contact field label").t(An()),value:"role"},{text:Object($.c)("Contact field label").t(Sn()),value:"member"},{text:Object($.c)("Contact field label").t(In()),value:"note"},{text:Object($.c)("Contact field label").t(Dn()),value:"url"},{text:Object($.c)("Contact field label").t(Nn()),value:"gender"},{text:Object($.c)("Contact field label").t(Pn()),value:"lang"},{text:Object($.c)("Contact field label").t(kn()),value:"tz"},{text:Object($.c)("Contact field label").t(Cn()),value:"geo"},{text:Object($.c)("Contact field label").t(wn()),value:"logo"}].map((function(e){return e.value})),ki=dr().map((function(e){return e.value})),Pi="contact-property",Ni=function(e){var t=e.contactID,n=e.properties,r=void 0===n?[]:n,a=e.onAdd,c=e.history,u=it()(e,["contactID","properties","onAdd","history"]),l=Object(Ba.a)(),s=Object(ut.a)().createNotification,f=Object(Ct.a)(),d=_()(f,2),m=d[0],p=d[1],b=Object(ce.b)(),v=_()(b,1)[0],h=Object(F.a)().call,g=Object(oe.c)(v),O=_()(g,2),y=O[0],j=O[1],E=Object(o.useState)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.filter((function(e){var t=e.field;return Ci.includes(t)})).map((function(e){return gi({},e,{uid:Object(jo.b)(Pi)})})):Oi.map((function(e){return gi({},e,{uid:Object(jo.b)(Pi)})}))}(r)),x=_()(E,2),w=x[0],C=x[1],k=t?Object($.c)("Title").t(vi()):Object($.c)("Title").t(bi()),P=function(e){C(w.filter((function(t){return t.uid!==e})))},N=function(e){return function(){if(!e){var t=Object(ci.c)(0,ki.length-1);return C([].concat(me()(w),[{field:ki[t],value:"",uid:Object(jo.b)(Pi)}]))}C([].concat(me()(w),[{field:e,value:"",uid:Object(jo.b)(Pi)}]))}},D=function(e){var t=e.uid,n=e.value,r=e.key,a=void 0===r?"value":r,c=w.map((function(e){return e.uid===t?gi({},e,Z()({},a,n)):e}));C(c)},I=Object(o.useCallback)((function(e,t){var n=w.filter((function(t){return t.field!==e}));n.unshift.apply(n,me()(t)),C(n)}),[w]);return i.a.createElement(mt.a,ct()({loading:m||j,onSubmit:function(){return p(Pe.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return e=r.filter((function(e){var t=e.field;return!Ci.includes(t)})),p.next=3,Pe.a.awrap(vc([w.concat(e)],y[0]));case 3:return n=p.sent,o=gc(e)?Ei:xi,p.next=7,Pe.a.awrap(l(Object(Za.a)({Contacts:n,Overwrite:t?yi:ji,Labels:o})));case 7:if(i=p.sent,f=_()(i.Responses,1),d=f[0].Response,m=(d=void 0===d?{}:d).Code,b=d.Contact,v=(b=void 0===b?{}:b).ID,m===wi){p.next=17;break}return u.onClose(),p.abrupt("return",s({text:Object($.c)("Error").t(pi()),type:"error"}));case 17:return p.next=19,Pe.a.awrap(h());case 19:t||(a(),c.push("/contacts/".concat(v))),u.onClose(),s({text:Object($.c)("Success").t(mi())});case 22:case"end":return p.stop()}})));var e,n,o,i,f,d,m,b,v},title:k,submit:Object($.c)("Action").t(di())},u),i.a.createElement(ft.a,null,Object($.c)("Info").t(fi())),i.a.createElement(ai,{properties:w,field:"fn",onChange:D,onRemove:P}),i.a.createElement(ai,{properties:w,field:"email",onChange:D,onRemove:P,onOrderChange:I,onAdd:N("email")}),v.hasPaidMail?i.a.createElement(i.a.Fragment,null,i.a.createElement(ai,{properties:w,field:"tel",onChange:D,onRemove:P,onOrderChange:I,onAdd:N("tel")}),i.a.createElement(ai,{properties:w,field:"adr",onChange:D,onRemove:P,onOrderChange:I,onAdd:N("adr")}),i.a.createElement(ai,{properties:w,onChange:D,onRemove:P,onAdd:N()})):i.a.createElement(si,null))},Di=n("7tJ6"),Ii=n("qnyA"),Si=n("/iWM"),Ai=n("YJ1i"),Mi=n("f6q+"),Ti=n("rhx2");function Li(){var e=J()(["Add"]);return Li=function(){return e},e}function Ki(){var e=J()(["No contacts added yet"]);return Ki=function(){return e},e}function Gi(){var e=J()(["Add email address"]);return Gi=function(){return e},e}function Ri(){var e=J()(["Color"]);return Ri=function(){return e},e}function Fi(){var e=J()(["Name"]);return Fi=function(){return e},e}function Ui(){var e=J()(["Name"]);return Ui=function(){return e},e}function Bi(){var e=J()(["Save"]);return Bi=function(){return e},e}function zi(){var e=J()(["Contact group created"]);return zi=function(){return e},e}function Vi(){var e=J()(["Contact group updated"]);return Vi=function(){return e},e}function Wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hi(){var e=J()(["Create new group"]);return Hi=function(){return e},e}function Xi(){var e=J()(["Edit contact group"]);return Xi=function(){return e},e}function Ji(){var e=J()(["Delete"]);return Ji=function(){return e},e}function Qi(){var e=J()(["Action"]);return Qi=function(){return e},e}function Zi(){var e=J()(["Address"]);return Zi=function(){return e},e}function qi(){var e=J()(["Name"]);return qi=function(){return e},e}var _i=function(e){var t=e.contactEmails,n=e.onDelete,r=[Object($.c)("Table header").t(qi()),Object($.c)("Table header").t(Zi()),Object($.c)("Table header").t(Qi())];return i.a.createElement(kt.a,{className:"noborder"},i.a.createElement(Ii.a,{cells:r}),i.a.createElement(Si.a,null,t.map((function(e){var t=e.ID,r=e.Name,a=e.Email,c=[i.a.createElement("div",{className:"ellipsis mw100",key:t,title:r},r),i.a.createElement("div",{className:"ellipsis mw100",key:t,title:a},a),i.a.createElement(Ai.a,{key:t,onClick:n(t)},Object($.c)("Action").t(Ji()))];return i.a.createElement(Mi.a,{key:t,cells:c})}))))},$i=function(e){return e.map((function(e){return e.ID}))},eu=function(e){var t=e.contactGroupID,n=it()(e,["contactGroupID"]),r=Object(o.useState)(!1),a=_()(r,2),c=a[0],u=a[1],l=Object(F.a)().call,s=Object(Ba.a)(),f=Object(ut.a)().createNotification,d=Object(ae.a)(),m=_()(d,1)[0],p=Object(ne.a)(),b=_()(p,1)[0],v=t&&m.find((function(e){return e.ID===t})),h=t&&b.filter((function(e){var n=e.LabelIDs;return(void 0===n?[]:n).includes(t)})),g=t?Object($.c)("Title").t(Xi()):Object($.c)("Title").t(Hi()),O=Object(o.useState)({name:t?v.Name:"",color:t?v.Color:V.y[Object(ci.c)(0,V.y.length-1)],contactEmails:t?h:[]}),y=_()(O,2),j=y[0],E=y[1],x=j.contactEmails.map((function(e){return e.ID})),w=Object(Ce.d)(b,"Email").filter((function(e){var t=e.ID;return!x.includes(t)})).map((function(e){var t=e.ID,n=e.Email,r=e.Name;return{text:n===r?"<".concat(n,">"):"".concat(r," <").concat(n,">"),value:t}}));return Object(o.useEffect)((function(){w.length&&E(Yi({},j,{contactEmailID:w[0].value}))}),[j.contactEmails.length]),i.a.createElement(mt.a,ct()({onSubmit:function(){var e,r,a,c,o,i;return Pe.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,u(!0),e={Name:j.name,Color:j.color},d.next=5,Pe.a.awrap(s(t?Object(Di.e)(t,e):Object(Di.a)(e)));case 5:return r=d.sent,a=r.Label,c=(void 0===a?{}:a).ID,o=$i(j.contactEmails),i=t?Object(Ce.b)($i(h),o):[],d.next=13,Pe.a.awrap(Promise.all([o.length&&s(Object(Za.e)({LabelID:c,ContactEmailIDs:o})),i.length&&s(Object(Za.i)({LabelID:c,ContactEmailIDs:i}))].filter(Boolean)));case 13:return d.next=15,Pe.a.awrap(l());case 15:n.onClose(),f({text:t?Object($.c)("Notification").t(Vi()):Object($.c)("Notification").t(zi())}),d.next=23;break;case 19:throw d.prev=19,d.t0=d.catch(0),u(!1),d.t0;case 23:case"end":return d.stop()}}),null,null,[[0,19]])},loading:c,submit:Object($.c)("Action").t(Bi()),title:g},n),i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,{htmlFor:"contactGroupName"},Object($.c)("Label for contact group name").t(Ui())),i.a.createElement(Io.a,null,i.a.createElement(vo.a,{id:"contactGroupName",placeholder:Object($.c)("Placeholder for contact group name").t(Fi()),value:j.name,onChange:function(e){var t=e.target;return E(Yi({},j,{name:t.value}))}}))),i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,{htmlFor:"contactGroupColor"},Object($.c)("Label for contact group color").t(Ri())),i.a.createElement(Io.a,null,i.a.createElement(Ti.a,{selected:j.color,onChange:function(e){return function(){return E(Yi({},j,{color:e}))}}}))),w.length?i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,{htmlFor:"contactGroupEmail"},Object($.c)("Label").t(Gi())),i.a.createElement(Io.a,null,i.a.createElement(Rt.a,{id:"contactGroupEmail",value:j.contactEmailID,options:w,onChange:function(e){var t=e.target;return E(Yi({},j,{contactEmailID:t.value}))}}),j.contactEmails.length?null:i.a.createElement("div",{className:"mt1"},Object($.c)("Info").t(Ki()))),i.a.createElement("div",{className:"ml1"},i.a.createElement(lt.a,{onClick:function(){var e=b.find((function(e){return e.ID===j.contactEmailID})),t=j.contactEmails.find((function(e){return e.ID===j.contactEmailID}));if(e&&!t){var n=me()(j.contactEmails);n.push(e),E(Yi({},j,{contactEmails:n}))}}},Object($.c)("Action").t(Li())))):null,j.contactEmails.length?i.a.createElement(_i,{contactEmails:j.contactEmails,onDelete:function(e){return function(){var t=j.contactEmails.findIndex((function(t){return t.ID===e}));if(t>-1){var n=me()(j.contactEmails);n.splice(t,1),E(Yi({},j,{contactEmails:n}))}}}}):null)},tu=function(e){var t=e.children,n=e.onClick,r=it()(e,["children","onClick"]);return i.a.createElement("label",{onClick:n},i.a.createElement("input",ct()({type:"checkbox",className:"item-checkbox sr-only"},r)),i.a.createElement("span",{className:"item-icon flex-item-noshrink rounded50 bg-white inline-flex"},i.a.createElement("span",{className:"mauto item-abbr"},t),i.a.createElement("span",{className:"item-icon-fakecheck mauto"},i.a.createElement(vt.a,{name:"on",className:"item-icon-fakecheck-icon"}))))},nu=function(e){var t=e.name,n=e.color,r=it()(e,["name","color"]);return i.a.createElement(Jo.a,ct()({title:t},r),i.a.createElement(vt.a,{name:"contacts-groups",color:n}))},ru=function(e){var t=e.style,n=e.contactID,r=e.hasPaidMail,a=e.contactGroupsMap,c=e.contact,o=e.onClick,u=e.onCheck,l=c.ID,s=c.Name,f=c.LabelIDs,d=void 0===f?[]:f,m=c.emails,p=void 0===m?[]:m,b=c.isChecked;return i.a.createElement("div",{style:t,key:l,onClick:function(){return o(l)},className:Object(jo.a)(["item-container item-contact cursor-pointer bg-global-white",n===l&&"item-is-selected"])},i.a.createElement("div",{className:"flex flex-nowrap"},i.a.createElement(tu,{checked:b,onChange:u,onClick:function(e){return e.stopPropagation()},"data-contact-id":l},Object(se.e)(s)),i.a.createElement("div",{className:"flex-item-fluid pl1 flex flex-column flex-spacebetween conversation-titlesender"},i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:Object(jo.a)(["flex flex-item-fluid w0",d.length&&"pr1"])},i.a.createElement("span",{className:"bold inbl mw100 ellipsis"},s)),r&&d.length?i.a.createElement("div",null,d.map((function(e){if(!a[e])return null;var t=a[e],n=t.Color,r=t.Name;return i.a.createElement(nu,{scrollContainerClass:"contacts-list",key:e,name:r,color:n})}))):null),i.a.createElement("div",{className:"mw100 ellipsis",title:p.join(", ")},Object(se.a)(p)))))};function au(){var e=J()(["You can either update your search query or ","."]);return au=function(){return e},e}function cu(){var e=J()(["No results found"]);return cu=function(){return e},e}function ou(){var e=J()(["Clear it"]);return ou=function(){return e},e}function iu(){var e=J()(["You can "," to add a contact."]);return iu=function(){return e},e}function uu(){var e=J()(["Your contact group is empty"]);return uu=function(){return e},e}function lu(){var e=J()(["Edit your group"]);return lu=function(){return e},e}function su(){var e=J()(["You can either "," or "," from a file."]);return su=function(){return e},e}function fu(){var e=J()(["Your address book is empty"]);return fu=function(){return e},e}function du(){var e=J()(["Import contact"]);return du=function(){return e},e}function mu(){var e=J()(["Add a contact"]);return mu=function(){return e},e}function pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var bu,vu=Object(qe.a)((function(e){var t=e.totalContacts,n=e.totalContactsInGroup,r=e.contacts,a=e.contactGroupsMap,c=e.onCheck,u=e.onClearSearch,l=e.onClearSelection,s=e.user,f=e.userKeysList,d=e.loadingUserKeys,m=e.history,p=e.contactID,b=e.contactGroupID,v=e.location,h=e.isDesktop,g=void 0===h||h,O=Object(o.useRef)(null),y=Object(o.useRef)(null),j=Object(o.useState)(),E=_()(j,2),x=E[0],w=E[1],C=Object(te.a)().createModal,k=function(e){var t=e.target,n=e.nativeEvent.shiftKey,a=t.getAttribute("data-contact-id"),o=[a];if(x&&n){var i=r.findIndex((function(e){return e.ID===a})),u=r.findIndex((function(e){return e.ID===x}));o.push.apply(o,me()(r.slice(Math.min(i,u),Math.max(i,u)+1).map((function(e){return e.ID}))))}w(a),c(o,t.checked)},P=function(e){l(),m.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},v,{pathname:"/contacts/".concat(e)}))};if(Object(o.useEffect)((function(){var e=setTimeout((function(){if(p&&t){var e=r.findIndex((function(e){var t=e.ID;return p===t}));O.current.scrollToRow(e)}}),200);return function(){clearTimeout(e)}}),[p]),!t){var N=i.a.createElement("button",{key:"add",type:"button",className:"color-primary ml0-5 mr0-5 underline",onClick:function(){C(i.a.createElement(Ni,{history:m,onAdd:u}))}},Object($.c)("Action").t(mu())),D=i.a.createElement("button",{key:"import",type:"button",className:"color-primary ml0-5 mr0-5 underline",onClick:function(){C(i.a.createElement(oo,{userKeysList:f}))},disabled:d},Object($.c)("Action").t(du()));return i.a.createElement("div",{className:"p2 flex w100"},i.a.createElement(Qe.a,{title:Object($.c)("Info message").t(fu()),url:nt.a,className:"mtauto mbauto"},i.a.createElement("div",{className:"flex flex-items-center"},Object($.c)("Actions message").jt(su(),N,D))))}if(!r.length){if(b&&!n){var I=i.a.createElement("button",{key:"add",type:"button",className:"color-primary ml0-5 mr0-5 underline",onClick:function(){return function(e){C(i.a.createElement(eu,{contactGroupID:e}))}(b)}},Object($.c)("Action").t(lu()));return i.a.createElement("div",{className:"p2 aligncenter w100"},i.a.createElement(Qe.a,{title:Object($.c)("Info message").t(uu()),url:nt.a},i.a.createElement("div",{className:"flex flex-items-center"},Object($.c)("Actions message").jt(iu(),I))))}var S=i.a.createElement(Ze.a,{key:"add",onClick:u,className:"ml0-25 bold"},Object($.c)("Action").t(ou()));return i.a.createElement("div",{className:"p2 aligncenter w100"},i.a.createElement(Qe.a,{title:Object($.c)("Info message").t(cu()),url:rt.a},i.a.createElement("div",{className:"flex flex-items-center"},Object($.c)("Actions message").jt(au(),S))))}return i.a.createElement("div",{ref:y,className:"items-column-list".concat(g?"":"--mobile")},i.a.createElement(tt.a,null,(function(e){var t=e.height,n=e.width;return i.a.createElement($e.a,{className:"contacts-list no-outline",ref:O,rowRenderer:function(e){var t=e.index,n=e.style,c=e.key;return i.a.createElement(ru,{style:n,key:c,contactID:p,hasPaidMail:!!s.hasPaidMail,contactGroupsMap:a,contact:r[t],onClick:P,onCheck:k})},rowCount:r.length,height:t,width:n,rowHeight:70})})))})),hu=n("3rzI"),gu=n("F/2c"),Ou=function(e){var t=Object(o.useContext)(Y),n=Object(Ba.a)(),r=Object(o.useCallback)((function(){return n(Object(Za.d)(e)).then((function(e){return e.Contact}))}),[]);return Object(gu.a)(t,e,r)},yu=n("FaOd");function ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xu=V.k.CLEAR_TEXT,wu=V.k.ENCRYPTED_AND_SIGNED,Cu=V.k.ENCRYPTED,ku=V.k.SIGNED,Pu=(bu={},Z()(bu,wu,(function(e,t){var n,r,a,c,o,i,u,l,s,f;return Pe.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return n=e.Data,r=e.Signature,a=t.publicKeys,c=t.privateKeys,d.prev=2,d.next=5,Pe.a.awrap(Promise.all([Object($a.d)(n),Object($a.e)(r)]));case 5:return o=d.sent,i=_()(o,2),u=i[0],l=i[1],d.next=11,Pe.a.awrap(Object(yu.a)({message:u,privateKeys:c,publicKeys:a,armor:!0,signature:l}));case 11:if(s=d.sent,f=s.data,1===s.verified){d.next=16;break}return d.abrupt("return",{data:f,error:1});case 16:return d.abrupt("return",{data:f});case 19:return d.prev=19,d.t0=d.catch(2),d.abrupt("return",{error:2});case 22:case"end":return d.stop()}}),null,null,[[2,19]])})),Z()(bu,ku,(function(e,t){var n,r,a,c,o;return Pe.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.Data,r=e.Signature,a=t.publicKeys,i.prev=2,i.next=5,Pe.a.awrap(Object($a.e)(r));case 5:return c=i.sent,i.next=8,Pe.a.awrap(Object($a.i)({message:Object($a.a)(n),publicKeys:a,signature:c}));case 8:if(o=i.sent,1===o.verified){i.next=12;break}return i.abrupt("return",{data:n,error:1});case 12:return i.abrupt("return",{data:n});case 15:return i.prev=15,i.t0=i.catch(2),i.abrupt("return",{error:2});case 18:case"end":return i.stop()}}),null,null,[[2,15]])})),Z()(bu,Cu,(function(e,t){var n,r,a,c;return Pe.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.Data,r=t.privateKeys,o.prev=2,o.next=5,Pe.a.awrap(Object($a.d)(n));case 5:a=o.sent,o.next=11;break;case 8:return o.prev=8,o.t0=o.catch(2),o.abrupt("return",{error:2});case 11:return o.prev=11,o.next=14,Pe.a.awrap(Object(yu.a)({message:a,privateKeys:r,armor:!0}));case 14:return c=o.sent,o.abrupt("return",{data:c});case 18:return o.prev=18,o.t1=o.catch(11),o.abrupt("return",{error:4});case 21:case"end":return o.stop()}}),null,null,[[2,8],[11,18]])})),Z()(bu,xu,(function(e){return{data:e.Data}})),bu),Nu=function(e,t){var n,r,a,c,o,i,u,l;return Pe.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=t.publicKeys,r=t.privateKeys,a=e.Cards,s.next=4,Pe.a.awrap(Promise.all(a.map((function(e){return Pe.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(Pu[e.Type]){t.next=2;break}return t.abrupt("return",{error:2});case 2:return t.abrupt("return",Pu[e.Type](e,{publicKeys:n,privateKeys:r}));case 3:case"end":return t.stop()}}))}))));case 4:return c=s.sent,o=c.map((function(e,t){return[wu,Cu].includes(a[t].Type)&&e.data?Eu({},e,{data:e.data.replace(/\nUID:.*\n/i,"\n")}):e})),i=o.reduce((function(e,t){var n=t.data,r=t.error;return r&&e.errors.push(r),n&&e.vcards.push(n),e}),{vcards:[],errors:[]}),u=i.vcards,l=i.errors,s.abrupt("return",{properties:ge(Be(u.map(Fe))),errors:l});case 8:case"end":return s.stop()}}))},Du=n("fa3+");function Iu(){var e=J()(["Learn more"]);return Iu=function(){return e},e}function Su(){var e=J()(["Error: the encrypted content failed decryption and cannot be read."]);return Su=function(){return e},e}function Au(){var e=J()(["Learn more"]);return Au=function(){return e},e}function Mu(){var e=J()(["Error: the encrypted content failed decryption and cannot be read."]);return Mu=function(){return e},e}function Tu(){var e=J()(["Learn more"]);return Tu=function(){return e},e}function Lu(){var e=J()(["Warning: the verification of this contact's signature failed."]);return Lu=function(){return e},e}var Ku=function(e){var t=e.errors;return t.includes(1)?i.a.createElement("div",{className:"bg-global-attention p1"},i.a.createElement(vt.a,{name:"attention",className:"mr1"}),i.a.createElement("span",{className:"mr1"},Object($.c)("Warning").t(Lu())),i.a.createElement(Du.a,{url:"https://protonmail.com/support/knowledge-base/encrypted-contacts/"},Object($.c)("Link").t(Tu()))):t.includes(2)?i.a.createElement("div",{className:"bg-global-warning p1"},i.a.createElement(vt.a,{name:"attention",className:"mr1"}),i.a.createElement("span",{className:"mr1"},Object($.c)("Warning").t(Mu())),i.a.createElement(Du.a,{url:"https://protonmail.com/support/knowledge-base/encrypted-contacts/"},Object($.c)("Link").t(Au()))):t.includes(4)?i.a.createElement("div",{className:"bg-global-warning p1"},i.a.createElement(vt.a,{name:"attention",className:"mr1"}),i.a.createElement("span",{className:"mr1"},Object($.c)("Warning").t(Su())),i.a.createElement(Du.a,{url:"https://protonmail.com/support/knowledge-base/encrypted-contacts/"},Object($.c)("Link").t(Iu()))):null};Ku.defaultProps={errors:[]};var Gu=Ku,Ru=n("0Zqm"),Fu=n("D5Se"),Uu=n("1s5H");function Bu(){var e=J()(["Load photo"]);return Bu=function(){return e},e}var zu=function(e){var t=e.photo,n=e.name,r=Object(o.useState)(!Object(Uu.d)(t)),a=_()(r,2),c=a[0],u=a[1],l=Object(o.useState)({src:t}),s=_()(l,2),f=s[0],d=s[1],m=Object(Fu.a)(),p=_()(m,2),b=p[0].ShowImages,v=p[1],h=Object(Ct.a)(!0),g=_()(h,2),O=g[0],y=g[1],j=v||O,E=b&V.V.REMOTE||c;if(Object(o.useEffect)((function(){if(t&&E){var e,n,r,a,c;y(Pe.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Pe.a.awrap(Object(So.d)(t));case 2:if(e=o.sent,n=e.src,r=e.width,a=e.height,!(r<=180&&a<=180)){o.next=8;break}return o.abrupt("return",d({src:n,width:r,height:a,isSmall:!0}));case 8:return o.next=10,Pe.a.awrap(Object(So.b)({original:t,maxWidth:180,maxHeight:180,bigResize:!0}));case 10:c=o.sent,d({src:c});case 12:case"end":return o.stop()}})).catch(ci.b))}}),[t,E]),!t)return i.a.createElement("div",{className:"rounded50 bordered bg-white-dm ratio-container-square mb0"},i.a.createElement("span",{className:"inner-ratio-container flex"},i.a.createElement("span",{className:"mauto color-global-border h1"},Object(se.e)(n))));if(E){if(j)return i.a.createElement(le.a,null);var x={backgroundImage:"url(".concat(f.src,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat"};return f.isSmall?i.a.createElement("div",{className:"rounded50 ratio-container-square mb0"},i.a.createElement("span",{className:"inner-ratio-container flex"},i.a.createElement("div",{className:"mbauto mtauto center",style:{width:"".concat(f.width,"px")}},i.a.createElement("div",{className:"rounded50 ratio-container-square",style:x},i.a.createElement("span",{className:"inner-ratio-container"}))))):i.a.createElement("div",{className:"rounded50 ratio-container-square",style:x},i.a.createElement("span",{className:"inner-ratio-container"}))}return i.a.createElement("div",{className:"rounded50 bordered bg-white-dm ratio-container-square mb0"},i.a.createElement("span",{className:"inner-ratio-container flex"},i.a.createElement("span",{className:"mauto color-global-border"},i.a.createElement(ht.a,{onClick:function(){return u(!0)}},Object($.c)("Action").t(Bu())))))},Vu=(n("Cq9y"),function(e){var t=e.properties,n=e.leftBlockWidth,r=void 0===n?"w30":n,a=Object(ce.b)(),c=_()(a,1)[0].hasPaidMail,o=xe(t,"photo"),u=xe(t,"fn"),l=xe(t,"email"),s=xe(t,"tel"),f=xe(t,"adr"),d=xe(t,"org"),m=[l&&{icon:"email",component:i.a.createElement("a",{href:"mailto:".concat(l),title:l},l)},c&&s&&{icon:"phone",component:i.a.createElement("a",{href:"tel:".concat(s)},s)},c&&f&&{icon:"address",component:Te(f)},c&&d&&{icon:"organization",component:d}].filter(Boolean);return i.a.createElement("div",{className:"contactsummary-container flex flex-nowrap p1 mb1 border-bottom"},i.a.createElement("div",{className:Object(jo.a)(["aligncenter contactsummary-photo-container",r])},i.a.createElement(zu,{photo:o,name:u})),i.a.createElement("div",{className:"pl1"},i.a.createElement("h2",{className:"mb0-5 ellipsis"},u),i.a.createElement("ul",{className:"unstyled m0"},m.map((function(e){var t=e.icon,n=e.component;return i.a.createElement("li",{key:t,className:"flex flex-nowrap flex-items-center mb0-5"},i.a.createElement(vt.a,{name:t,className:"mr0-5"}),i.a.createElement("span",{className:"ellipsis"},n))})))))}),Wu=n("NTy5"),Yu=n("SJRE"),Hu=n("o4nY"),Xu=n("+QFM"),Ju=n("sWYD"),Qu=n("voWS"),Zu=n("Xksw"),qu=n("wJ4K"),_u=n("TQRW");function $u(){var e=J()(["Please select which email address or addresses to add to this group."]);return $u=function(){return e},e}function el(){var e=J()(["Add to group"]);return el=function(){return e},e}function tl(){var e=J()(["Apply"]);return tl=function(){return e},e}function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var al=function(e){var t=e.contacts,n=e.onSubmit,r=it()(e,["contacts","onSubmit"]),a=Object(ne.a)(),c=_()(a,1)[0],u=Object(o.useState)(t.map((function(e){return rl({},e,{contactEmails:c.filter((function(t){return t.ContactID===e.ID})).map((function(e){return rl({},e,{isChecked:!0})}))})}))),l=_()(u,2),s=l[0],f=l[1],d=function(e,t){return function(n){var r=n.target,a=me()(s),c=s.findIndex((function(t){return t.ID===e})),o=s[c].contactEmails.findIndex((function(e){return e.ID===t}));a[c].contactEmails[o].isChecked=r.checked,f(a)}};return i.a.createElement(mt.a,ct()({submit:Object($.c)("Action").t(tl()),title:Object($.c)("Title").t(el()),onSubmit:function(){var e=s.reduce((function(e,t){return t.contactEmails.forEach((function(t){var n=t.isChecked,r=it()(t,["isChecked"]);n&&e.push(r)})),e}),[]);n(e),r.onClose()}},r),i.a.createElement(ft.a,null,Object($.c)("Info").t($u())),s.filter((function(e){var t=e.contactEmails;return(void 0===t?[]:t).length>1})).map((function(e){var t=e.ID,n=e.Name,r=e.contactEmails,a=void 0===r?[]:r;return i.a.createElement(Fc.a,{key:t,className:"border-bottom"},i.a.createElement(Gt.a,{className:"bold pt0"},n),i.a.createElement(Io.a,{className:"flex flex-column w100"},a.map((function(e){var n=e.ID,r=e.Email,a=e.isChecked;return i.a.createElement("label",{key:n,className:"mb1",htmlFor:n},i.a.createElement(Kt.a,{id:n,checked:a,className:"mr0-5",onChange:d(t,n)}),i.a.createElement("span",null,r))}))))})))},cl=n("CP+6"),ol=function(e){var t=e.buttonRef,n=e.caretClassName,r=void 0===n?"":n,a=e.children,c=e.isOpen,o=it()(e,["buttonRef","caretClassName","children","isOpen"]);return i.a.createElement("button",ct()({type:"button",role:"button",ref:t},o),a,i.a.createElement(cl.a,{isOpen:c,className:Object(jo.a)(["ml0-25 expand-caret mtauto mbauto",r])}))};function il(){var e=J()(["Apply"]);return il=function(){return e},e}function ul(){var e=J()(["Filter groups"]);return ul=function(){return e},e}function ll(){var e=J()(["Create a new contact group"]);return ll=function(){return e},e}function sl(){var e=J()(["Add to group"]);return sl=function(){return e},e}function fl(){var e=J()(["Contact group apply"]);return fl=function(){return e},e}function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ml=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((function(e,n){var r=n.ContactID;if(e.duplicate[r]=(e.duplicate[r]||0)+1,2===e.duplicate[r]){var a=t.find((function(e){return e.ID===r}));e.contacts.push(a)}return e}),{contacts:[],duplicate:Object.create(null)})},pl=function(e){var t=e.children,n=e.className,r=e.contactEmails,a=e.disabled,c=e.forToolbar,u=void 0!==c&&c,l=Object(o.useState)(""),s=_()(l,2),f=s[0],d=s[1],m=Object(Ct.a)(),p=_()(m,2),b=p[0],v=p[1],h=Object(Zu.a)(),g=h.anchorRef,O=h.isOpen,y=h.toggle,j=h.close,E=Object(ut.a)().createNotification,x=Object(F.a)().call,w=Object(Ba.a)(),C=Object(te.a)().createModal,k=Object(re.a)(),P=_()(k,1)[0],N=Object(ae.a)(),D=_()(N,1)[0],I=Object(o.useState)(Object.create(null)),S=_()(I,2),A=S[0],M=S[1],T=Object(o.useState)(Object(jo.b)("contactGroupDropdown")),L=_()(T,1)[0],K=function(e){return function(t){var n=t.target;return M(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},A,Z()({},e,+n.checked)))}};Object(o.useEffect)((function(){O&&M(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length&&e.length?e.reduce((function(e,n){var r=n.ID,a=t.filter((function(e){var t=e.LabelIDs;return(void 0===t?[]:t).includes(r)}));return e[r]=a.length?t.length===a.length?1:2:0,e}),Object.create(null)):Object.create(null)}(D,r))}),[D,r,O]);var G=Object(o.useMemo)((function(){if(!Array.isArray(D))return[];var e=Object(se.g)(f);return e.length?D.filter((function(t){var n=t.Name;return Object(se.g)(n).includes(e)})):D}),[f,D]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ol,{caretClassName:u?"toolbar-icon":"",className:n,disabled:a,buttonRef:g,isOpen:O,onClick:y},t),i.a.createElement(qu.a,{id:"contact-group-dropdown",isOpen:O,anchorRef:g,onClose:j,autoClose:!1},i.a.createElement("div",{className:"flex flex-spacebetween pt1 pl1 pr1 mb1"},i.a.createElement("strong",null,Object($.c)("Label").t(sl())),i.a.createElement(Jo.a,{title:Object($.c)("Info").t(ll())},i.a.createElement(Ai.a,{className:"pm-button--primary pm-button--for-icon",onClick:function(){C(i.a.createElement(eu,null)),j()}},i.a.createElement(vt.a,{name:"contacts-groups",fill:"light"}),"+"))),i.a.createElement("div",{className:"pl1 pr1 mb1"},i.a.createElement(_u.a,{value:f,onChange:d,autoFocus:!0,placeholder:Object($.c)("Placeholder").t(ul())})),i.a.createElement("div",{className:"mb1 dropDown-content dropDown-content--narrow"},i.a.createElement("ul",{className:"unstyled m0 pl1 pr1 dropDown-contentInner"},G.map((function(e){var t=e.ID,n=e.Name,r=e.Color,a="".concat(L).concat(t);return i.a.createElement("li",{key:t,className:"flex flex-nowrap border-bottom border-bottom--dashed pt0-5 pb0-5"},i.a.createElement("label",{htmlFor:a,className:"flex flex-item-fluid flex-nowrap"},i.a.createElement(vt.a,{name:"contacts-groups",className:"mr0-5 mtauto mbauto flex-item-noshrink",color:r}),i.a.createElement("span",{className:"ellipsis flex-item-fluid",title:n},n)),i.a.createElement(Kt.a,{className:"flex flex-item-noshrink mtauto mbauto",id:a,checked:1===A[t],indeterminate:2===A[t],onChange:K(t)}))})))),i.a.createElement("div",{className:"aligncenter mb1"},i.a.createElement(Ai.a,{loading:b,className:"pm-button--primary",onClick:function(){return v(Pe.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=me()(r),t=ml(r,P),!(n=t.contacts).length){c.next=6;break}return c.next=5,Pe.a.awrap(new Promise((function(e,t){C(i.a.createElement(al,{contacts:n,onSubmit:e,onClose:t}))})));case 5:e=c.sent;case 6:return a=Object.entries(A),c.next=9,Pe.a.awrap(Promise.all(a.map((function(t){var n=_()(t,2),r=n[0],a=n[1];if(2===a)return Promise.resolve();if(1===a){var c=e.filter((function(e){var t=e.LabelIDs;return!(void 0===t?[]:t).includes(r)})).map((function(e){return e.ID}));return c.length?w(Object(Za.e)({LabelID:r,ContactEmailIDs:c})):Promise.resolve()}var o=e.filter((function(e){var t=e.LabelIDs;return(void 0===t?[]:t).includes(r)})).map((function(e){return e.ID}));return o.length?w(Object(Za.i)({LabelID:r,ContactEmailIDs:o})):Promise.resolve()}))));case 9:return c.next=11,Pe.a.awrap(x());case 11:E({text:Object($.c)("Info").ngettext(Object($.msgid)(fl()),"Contact groups apply",a.length)}),j();case 13:case"end":return c.stop()}})));var e,t,n,a}},Object($.c)("Action").t(il())))))},bl=n("FilX"),vl=n("dG5C"),hl=n("pdRq"),gl=V.R.TYPE_INTERNAL,Ol=V.x.ENABLE_ENCRYPTION,yl=function(e){return e.RecipientType===gl},jl=function(e){return yl(e)&&!e.Keys.some((function(e){return e.Flags&Ol}))},El=function(){var e,t,n,r=arguments;return Pe.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=r.length>0&&void 0!==r[0]?r[0]:[]).length){a.next=3;break}return a.abrupt("return",!1);case 3:return t=e.map((function(e){return Object(hl.c)(e)})),a.next=6,Pe.a.awrap(Promise.all(t));case 6:return n=a.sent,a.abrupt("return",!n.some((function(e){return!e})));case 8:case"end":return a.stop()}}))},xl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e.length)return!1;var n=t.map((function(e){return Object(vl.j)(Object(vl.b)(e))}));return!e.some((function(e){return n.includes(e)}))},wl=n("0BWK");function Cl(){var e=J()(["Plain text"]);return Cl=function(){return e},e}function kl(){var e=J()(["Automatic"]);return kl=function(){return e},e}var Pl=function(e){var t=e.value,n=e.onChange,r=e.disabled,a=[{text:Object($.c)("MIME type").t(kl()),value:""},{text:Object($.c)("MIME type").t(Cl()),value:V.D.PLAINTEXT}];return i.a.createElement(Rt.a,{value:t,options:a,disabled:r,onChange:function(e){var t=e.target;return n(t.value)}})},Nl=n("UPgO"),Dl=n("Y/Ll");function Il(){var e=J()(["Use global default (",")"]);return Il=function(){return e},e}var Sl=function(e){var t=e.value,n=e.onChange,r=Object(Fu.a)(),a=_()(r,2),c=a[0].PGPScheme,o=a[1],u=c===V.K.SEND_PGP_INLINE?"PGP/Inline":"PGP/MIME",l=[{value:"",text:Object($.c)("Default encryption scheme").t(Il(),u)},{value:"pgp-mime",text:"PGP/MIME"},{value:"pgp-inline",text:"PGP/Inline"}];return i.a.createElement(Rt.a,{options:l,disabled:o,value:t,onChange:function(e){var t=e.target;return n(t.value)}})},Al=n("Cphr"),Ml=n("qrfN"),Tl=n("l+59");function Ll(){var e=J()(["This key is expired"]);return Ll=function(){return e},e}function Kl(){var e=J()(["This key is revoked"]);return Kl=function(){return e},e}function Gl(){var e=J()(["This key is assigned to ",""]);return Gl=function(){return e},e}var Rl=function(e){var t,n,r,a=e.publicKey,c=e.isRevoked,o=e.isExpired,u=e.email,l=it()(e,["publicKey","isRevoked","isExpired","email"]),s=i.a.createElement(vt.a,ct()({name:"attention",fill:"attention"},l)),f=(t=u,n=a.users,!(r=(void 0===n?[]:n).reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.userId,r=void 0===n?{}:n;if(!r||!r.userid)return e;var a=/<([^>]*)>/.exec(r.userid)||[],c=_()(a,2),o=c[1],i=void 0===o?r.userid:o;return e.push(i),e}),[])).includes(t)&&r);if(f){var d=f.join(", ");return i.a.createElement(Jo.a,{title:Object($.c)("PGP key warning").t(Gl(),d)},s)}return c?i.a.createElement(Jo.a,{title:Object($.c)("PGP key warning").t(Kl())},s):o?i.a.createElement(Jo.a,{title:Object($.c)("PGP key warning").t(Ll())},s):null};function Fl(){var e=J()(["Trusted"]);return Fl=function(){return e},e}function Ul(){var e=J()(["Primary"]);return Ul=function(){return e},e}function Bl(){var e=J()(["Remove"]);return Bl=function(){return e},e}function zl(){var e=J()(["Untrust"]);return zl=function(){return e},e}function Vl(){var e=J()(["Trust"]);return Vl=function(){return e},e}function Wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hl(){var e=J()(["Make primary"]);return Hl=function(){return e},e}function Xl(){var e=J()(["Download"]);return Xl=function(){return e},e}function Jl(){var e=J()(["Actions"]);return Jl=function(){return e},e}function Ql(){var e=J()(["Status"]);return Ql=function(){return e},e}function Zl(){var e=J()(["Type"]);return Zl=function(){return e},e}function ql(){var e=J()(["Created"]);return ql=function(){return e},e}function _l(){var e=J()(["Fingerprint"]);return _l=function(){return e},e}var $l=function(e){var t=e.model,n=e.setModel,r=Object(o.useState)([]),a=_()(r,2),c=a[0],u=a[1],l=[Object($.c)("Table header").t(_l()),Object($.c)("Table header").t(ql()),Object($.c)("Table header").t(Zl()),Object($.c)("Table header").t(Ql()),Object($.c)("Table header").t(Jl())];return Object(o.useEffect)((function(){var e;Pe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pe.a.awrap(Promise.all(t.keys.map((function(e,n){var r,a,c,o,i,u,l,s,f,d;return Pe.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,r=+Object(Ml.a)(),a=e.getCreationTime(),m.next=5,Pe.a.awrap(e.getExpirationTime("encrypt"));case 5:return c=m.sent,o=!(a<=r&&r<=c),m.next=9,Pe.a.awrap(e.isRevoked());case 9:return i=m.sent,u=e.getAlgorithmInfo(),l=Object(Tl.a)(u),s=e.getFingerprint(),f=!n&&!o&&t.isPGPExternal,d=t.isPGPInternal&&t.trustedFingerprints.includes(s),m.abrupt("return",{publicKey:e,fingerprint:s,algo:l,creationTime:a,isPrimary:f,isExpired:o,isRevoked:i,isTrusted:d});case 18:return m.prev=18,m.t0=m.catch(0),m.abrupt("return",!1);case 21:case"end":return m.stop()}}),null,null,[[0,18]])}))));case 2:e=n.sent,u(e.filter(Boolean));case 4:case"end":return n.stop()}}))}),[t.keys,t.trustedFingerprints]),i.a.createElement(kt.a,null,i.a.createElement(Ii.a,{cells:l}),i.a.createElement(Si.a,null,c.map((function(e,r){var a=e.fingerprint,c=e.algo,o=e.creationTime,u=e.isPrimary,l=e.publicKey,s=e.isExpired,f=e.isRevoked,d=e.isTrusted,m=new Date(o),p=[{text:Object($.c)("Action").t(Xl()),onClick:function(){var e,n;return Pe.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:e=new Blob([l.armor()],{type:"data:text/plain;charset=utf-8;"}),n="publickey - ".concat(t.email," - 0x").concat(a.slice(0,8).toUpperCase(),".asc"),Object(Ru.a)(e,n);case 3:case"end":return r.stop()}}))}},r>0&&!s&&t.isPGPInternal&&{text:Object($.c)("Action").t(Hl()),onClick:function(){n(Yl({},t,{keys:Object(Ce.c)(t.keys,r,0)}))}},t.isPGPInternal&&!d&&{text:Object($.c)("Action").t(Vl()),onClick:function(){n(Yl({},t,{trustedFingerprints:[].concat(me()(t.trustedFingerprints),[a])}))}},t.isPGPInternal&&d&&{text:Object($.c)("Action").t(zl()),onClick:function(){n(Yl({},t,{trustedFingerprints:t.trustedFingerprints.filter((function(e){return e!==a}))}))}},t.isPGPExternal&&{text:Object($.c)("Action").t(Bl()),onClick:function(){var e=me()(t.keys);e.splice(r,1),n(Yl({},t,{keys:e}))}}].filter(Boolean),b=[i.a.createElement("div",{key:a,title:a,className:"flex flex-nowrap"},i.a.createElement(Rl,{className:"mr0-5 flex-item-noshrink",publicKey:l,isExpired:s,isRevoked:f,email:t.email}),i.a.createElement("span",{className:"flex-item-fluid ellipsis"},a)),Object(go.a)(m)?Object(Ju.a)(m,"PP",{locale:Qu.a}):"-",c,i.a.createElement(i.a.Fragment,{key:a},u?i.a.createElement(Al.a,null,Object($.c)("Key badge").t(Ul())):null,d?i.a.createElement(Al.a,null,Object($.c)("Key badge").t(Fl())):null),i.a.createElement(so.a,{key:a,className:"pm-button--small",list:p})];return i.a.createElement(Mi.a,{key:a,cells:b})}))))};function es(){var e=J()(["Select the PGP scheme to be used when signing or encrypting to a user. Note that PGP/Inline forces plain text messages"]);return es=function(){return e},e}function ts(){var e=J()(["Cryptographic scheme"]);return ts=function(){return e},e}function ns(){var e=J()(["Upload a public key to enable sending end-to-end encrypted emails to this email"]);return ns=function(){return e},e}function rs(){var e=J()(["Public keys"]);return rs=function(){return e},e}function as(){var e=J()(["Digitally signing emails helps authentify that messages are sent by you"]);return as=function(){return e},e}function cs(){var e=J()(["Sign emails"]);return cs=function(){return e},e}function os(){var e=J()(["Email encryption forces email signature to help authenticate your sent messages"]);return os=function(){return e},e}function is(){var e=J()(["Encrypt emails"]);return is=function(){return e},e}function us(){var e=J()(["All uploaded keys are expired or revoked! Encryption is automatically disabled."]);return us=function(){return e},e}function ls(){var e=J()(["Only change these settings if you are using PGP with non-ProtonMail recipients."]);return ls=function(){return e},e}function ss(){var e=J()(["To use Address Verification, you must trust one or more available public keys, including the primary key for this address. This prevents the encrypted keys from being faked."]);return ss=function(){return e},e}function fs(){var e=J()(["This address is disabled. To be able to send to this address, the owner must first enable the address."]);return fs=function(){return e},e}function ds(){var e=J()(["Address Verification with Trusted Keys is enabled for this address. To be able to send to this address, first trust public keys that can be used for sending."]);return ds=function(){return e},e}function ms(){var e=J()(["Setting up PGP allows you to send end-to-end encrypted emails with a non-Protonmail user that uses a PGP compatible service."]);return ms=function(){return e},e}function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vs(){var e=J()(["Invalid public key file"]);return vs=function(){return e},e}var hs,gs=function(e){var t=e.model,n=e.setModel,r=Object(ut.a)().createNotification;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ft.a,{learnMore:"https://protonmail.com/support/knowledge-base/how-to-use-pgp/"},Object($.c)("Info").t(ms())),t.keys.length&&t.noPrimary?i.a.createElement(ft.a,{type:"warning"},Object($.c)("Info").t(ds())):null,t.pgpAddressDisabled?i.a.createElement(ft.a,{type:"warning"},Object($.c)("Info").t(fs())):null,t.isPGPInternal?i.a.createElement(ft.a,{learnMore:"https://protonmail.com/support/knowledge-base/address-verification/"},Object($.c)("Info").t(ss())):null,t.isPGPExternal&&!t.sign?i.a.createElement(ft.a,{learnMore:"https://protonmail.com/support/knowledge-base/how-to-use-pgp/"},Object($.c)("Info").t(ls())):null,t.keysExpired?i.a.createElement(ft.a,{type:"warning",learnMore:"https://protonmail.com/support/knowledge-base/how-to-use-pgp/"},Object($.c)("Info").t(us())):null,t.isPGPExternal?i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,{htmlFor:"encrypt-toggle"},Object($.c)("Label").t(is()),i.a.createElement(bl.a,{className:"ml0-5",title:Object($.c)("Tooltip").t(os())})),i.a.createElement(Io.a,null,i.a.createElement(Nl.a,{id:"encrypt-toggle",checked:t.encrypt,disabled:!t.keys.length||t.keysExpired,onChange:function(e){var r=e.target;return n(bs({},t,{encrypt:r.checked,sign:!!r.checked||t.sign}))}}))):null,t.isPGPExternal?i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,{htmlFor:"sign-toggle"},Object($.c)("Label").t(cs()),i.a.createElement(bl.a,{className:"ml0-5",title:Object($.c)("Tooltip").t(as())})),i.a.createElement(Io.a,null,i.a.createElement(Nl.a,{id:"sign-toggle",checked:t.sign,disabled:t.encrypt,onChange:function(e){var r=e.target;return n(bs({},t,{sign:r.checked,mimeType:""}))}}))):null,i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,null,Object($.c)("Label").t(rs()),i.a.createElement(bl.a,{className:"ml0-5",title:Object($.c)("Tooltip").t(ns())})),i.a.createElement(Io.a,null,t.isPGPExternal?i.a.createElement(Dl.a,{onFiles:function(e){if(!e.length)return r({type:"error",text:Object($.c)("Error").t(vs())});var a=t.keys.map((function(e){return e.getFingerprint()})),c=e.reduce((function(e,t){var n=t.getFingerprint();return a.includes(n)?(e.toUpdate.push(t),e):(e.toAdd.push(t),e)}),{toAdd:[],toUpdate:[]}),o=c.toAdd,i=c.toUpdate,u=t.keys.map((function(e){var t=e.getFingerprint(),n=i.find((function(e){return e.getFingerprint()===t}));return n||e})).concat(o);n(bs({},t,{keys:u}))},multiple:!0}):null)),t.keys.length?i.a.createElement($l,{model:t,setModel:n}):null,t.isPGPExternal?i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,null,Object($.c)("Label").t(ts()),i.a.createElement(bl.a,{className:"ml0-5",title:Object($.c)("Tooltip").t(es())})),i.a.createElement(Io.a,null,i.a.createElement(Sl,{value:t.scheme,onChange:function(e){return n(bs({},t,{scheme:e}))}}))):null)};function Os(){var e=J()(["Show advanced PGP settings"]);return Os=function(){return e},e}function ys(){var e=J()(["Hide advanced PGP settings"]);return ys=function(){return e},e}function js(){var e=J()(["Automatic indicates that the format in the composer is used to send to this user. Plain text indicates that the message will always be converted to plain text on send."]);return js=function(){return e},e}function Es(){var e=J()(["Email format"]);return Es=function(){return e},e}function xs(){var e=J()(["PGP/MIME automatically sends the message using the current composer mode. Please note that ProtonMail always signs PGP/MIME messages."]);return xs=function(){return e},e}function ws(){var e=J()(["PGP/Inline is only compatible with Plain Text format. Please note that ProtonMail always signs PGP/Inline messages."]);return ws=function(){return e},e}function Cs(){var e=J()(["Select the email format you want to be used by default when sending an email to this email address."]);return Cs=function(){return e},e}function ks(){var e=J()(["Email settings (",")"]);return ks=function(){return e},e}function Ps(){var e=J()(["Save"]);return Ps=function(){return e},e}function Ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Is(){var e=J()(["Preferences saved"]);return Is=function(){return e},e}var Ss=V.K.SEND_PGP_INLINE,As=V.K.SEND_PGP_MIME,Ms=uc,Ts=ic,Ls=(hs={},Z()(hs,Ss,"pgp-inline"),Z()(hs,As,"pgp-mime"),hs),Ks=function(e){var t=e.userKeysList,n=e.contactID,r=e.properties,a=e.emailProperty,c=it()(e,["userKeysList","contactID","properties","emailProperty"]),u=Object(Ba.a)(),l=Object(F.a)().call,s=Object(Ct.a)(),f=_()(s,2),d=f[0],m=f[1],p=Object(ut.a)().createNotification,b=Object(Fu.a)(),v=_()(b,2),h=v[0],g=h.PGPScheme,O=h.Sign,y=v[1],j=Object(o.useState)(!1),E=_()(j,2),x=E[0],w=E[1],C=a.value,k=a.group,P=Object(o.useState)({keys:[]}),N=_()(P,2),D=N[0],I=N[1],S=D.isPGPExternal&&D.sign,A="pgp-inline"===(D.scheme||Ls[g]),M=function(e){var t=function(t,n){return{field:"key",value:"data:application/pgp-keys;base64,".concat(Object(vl.j)(Object(vl.b)(t.toPacketlist().write()))),group:e,pref:"".concat(n+1)}};return D.isPGPExternal?D.keys.map(t):D.keys.filter((function(e){return D.trustedFingerprints.includes(e.getFingerprint())})).map(t)};return Object(o.useEffect)((function(){var e,t,n,a,c,o,i,l,s,f,d,p,b,v,h,g;y||m(Pe.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return e=r.filter((function(e){var t=e.field,n=e.group;return nc.includes(t)&&n===k})).reduce((function(e,t){var n=t.field,r=t.value;if("key"===n&&r){var a=r.split(","),c=_()(a,2)[1],o=void 0===c?"":c,i=Object(vl.d)(Object(vl.g)(o));if(i.length){var u=Object(hl.b)(i).then((function(e){return _()(e,1)[0]})).catch(ci.b);e.contactKeyPromises.push(u)}return e}return"x-pm-encrypt"===n&&r?(e.encrypt="true"===r,e):"x-pm-sign"===n&&r?(e.sign="true"===r,e):"x-pm-scheme"===n&&r?(e.scheme=r,e):"x-pm-mimetype"===n&&r?(e.mimeType=r,e):e}),{contactKeyPromises:[],mimeType:"",encrypt:!1,scheme:"",sign:1===O}),t=e.contactKeyPromises,n=e.mimeType,a=e.encrypt,c=e.scheme,o=e.sign,m.next=3,Pe.a.awrap(Promise.all(t));case 3:return m.t0=Boolean,i=m.sent.filter(m.t0),m.next=7,Pe.a.awrap(Object(wl.a)(u,C));case 7:return l=m.sent,s=yl(l),f=!s,d=l.publicKeys,m.next=13,Pe.a.awrap(Promise.all([(y=l,j=void 0,E=void 0,j=y.Keys,E=void 0===j?[]:j,Promise.all(E.filter((function(e){return e.Flags&Ol})).map((function(e){var t,n;return Pe.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.PublicKey,r.next=3,Pe.a.awrap(Object(vl.m)(t));case 3:return n=r.sent,r.abrupt("return",Object(vl.j)(Object(vl.b)(n)));case 5:case"end":return r.stop()}}))})))),El(i)]));case 13:p=m.sent,b=_()(p,2),v=b[0],h=b[1],g=s?i.map((function(e){return e.getFingerprint()})):[],I({mimeType:n,encrypt:a,scheme:c,sign:o,email:C,keys:s&&!i.length?d:i,trustedFingerprints:g,isPGPExternal:f,isPGPInternal:s,pgpAddressDisabled:jl(l),noPrimary:xl(v,i),keysExpired:h});case 19:case"end":return m.stop()}var y,j,E})))}),[y]),Object(o.useEffect)((function(){var e,t;e=D.keys,Pe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pe.a.awrap(El(e));case 2:!(t=n.sent)&&e.length||I((function(e){return Ds({},e,{encrypt:!1,keysExpired:t})}));case 4:case"end":return n.stop()}}))}),[D.keys]),Object(o.useEffect)((function(){if(S)return A?I((function(e){return Ds({},e,{mimeType:V.D.PLAINTEXT})})):void I((function(e){return Ds({},e,{mimeType:""})}))}),[S,A]),i.a.createElement(mt.a,ct()({loading:d||y,submit:Object($.c)("Action").t(Ps()),onSubmit:function(){return m(Pe.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return e=r.filter((function(e){var t=e.field,n=e.group;return!["email"].concat(me()(nc)).includes(t)||n&&n!==k})),o=[a,D.mimeType&&{field:"x-pm-mimetype",value:D.mimeType,group:k},D.isPGPExternal&&D.encrypt&&{field:"x-pm-encrypt",value:"true",group:k},D.isPGPExternal&&D.sign&&{field:"x-pm-sign",value:"true",group:k},D.isPGPExternal&&D.scheme&&{field:"x-pm-scheme",value:D.scheme,group:k}].concat(me()(M(k))).filter(Boolean),i=e.concat(o),d.next=5,Pe.a.awrap(vc([i],t[0]));case 5:return s=d.sent,f=gc(i)?Ms:Ts,d.next=9,Pe.a.awrap(u(Object(Za.a)({Contacts:s,Overwrite:+!!n,Labels:f})));case 9:return d.next=11,Pe.a.awrap(l());case 11:c.onClose(),p({text:Object($.c)("Success").t(Is())});case 13:case"end":return d.stop()}})));var e,o,i,s,f},title:Object($.c)("Title").t(ks(),C)},c),S?A?i.a.createElement(ft.a,null,Object($.c)("Info").t(ws())):i.a.createElement(ft.a,null,Object($.c)("Info").t(xs())):i.a.createElement(ft.a,null,Object($.c)("Info").t(Cs())),i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,null,Object($.c)("Label").t(Es()),i.a.createElement(bl.a,{className:"ml0-5",title:Object($.c)("Tooltip").t(js())})),i.a.createElement(Io.a,null,i.a.createElement(Pl,{disabled:S,value:D.mimeType,onChange:function(e){return I(Ds({},D,{mimeType:e}))}}))),i.a.createElement("div",{className:"mb1"},i.a.createElement(Ze.a,{onClick:function(){return w(!x)},disabled:d||y},x?Object($.c)("Action").t(ys()):Object($.c)("Action").t(Os()))),x?i.a.createElement(gs,{model:D,setModel:I}):null)};function Gs(){var e=J()(["Email settings"]);return Gs=function(){return e},e}function Rs(){var e=J()(["Contact group"]);return Rs=function(){return e},e}var Fs=function(e){var t=e.property,n=e.properties,r=e.contactID,a=e.contactEmail,c=e.contactGroups,o=void 0===c?[]:c,u=e.userKeysList,l=e.leftBlockWidth,s=void 0===l?"w30":l,f=e.rightBlockWidth,d=void 0===f?"w70":f,m=Object(ce.b)(),p=_()(m,1)[0].hasPaidMail,b=Object(te.a)().createModal,v={work:Object($.c)("Contact type label").t(oa()),home:Object($.c)("Contact type label").t(ca()),cell:Object($.c)("Contact type label").t(aa()),main:Object($.c)("Contact type label").t(ra()),yomi:Object($.c)("Contact type label").t(na()),other:Object($.c)("Contact type label").t(ta()),fax:Object($.c)("Contact type label").t(ea()),pager:Object($.c)("Contact type label").t($r())},h=t.field,g=t.first,O=Ae(Me(t.type)),y=v[O]||O,j=t.value;return i.a.createElement(Fc.a,null,i.a.createElement("div",{className:Object(jo.a)(["flex flex-items-center",s])},i.a.createElement(zo,{field:h,type:y,first:g})),i.a.createElement("div",{className:Object(jo.a)(["flex flex-nowrap flex-items-center pl1",d])},i.a.createElement("span",{className:Object(jo.a)(["mr0-5 flex-item-fluid",!["note"].includes(h)&&"ellipsis"])},function(){if("email"===h)return i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{className:"mr0-5",href:"mailto:".concat(j),title:j},j),o.map((function(e){var t=e.ID,n=e.Name,r=e.Color;return i.a.createElement(nu,{key:t,name:n,color:r})})));if("url"===h)return i.a.createElement("a",{href:j,target:"_blank",rel:"noopener noreferrer"},j);if("tel"===h)return i.a.createElement("a",{href:"tel:".concat(j)},j);if(["bday","anniversary"].includes(h)){var e=[Object(ho.a)(j),new Date(j)].filter(go.a),t=_()(e,1)[0];return t?Object(Ju.a)(t,"PP",{locale:Qu.a}):j}return"logo"===h?i.a.createElement(Wu.a,{src:j}):"adr"===h?Te(j):j}()),i.a.createElement("span",{className:"flex-item-noshrink"},function(){switch(h){case"email":if(!a)return null;return i.a.createElement(Yu.a,null,p?i.a.createElement(pl,{className:"pm-button pm-button--for-icon pm-group-button",contactEmails:[a]},i.a.createElement(Jo.a,{title:Object($.c)("Title").t(Rs())},i.a.createElement(vt.a,{name:"contacts-groups"}))):null,i.a.createElement(Hu.a,{onClick:function(){b(i.a.createElement(Ks,{userKeysList:u,contactID:r,emailProperty:t,properties:n}))},className:"pm-button--for-icon"},i.a.createElement(Jo.a,{title:Object($.c)("Title").t(Gs())},i.a.createElement(vt.a,{name:"settings-singular"}))),i.a.createElement(Xu.a,{className:"pm-button--for-icon pm-group-button",value:j}));case"tel":return i.a.createElement(Xu.a,{className:"pm-button--for-icon",value:j});case"adr":return i.a.createElement(Xu.a,{className:"pm-button--for-icon",value:Te(j)});default:return null}}())))};function Us(){var e=J()(["Other information"]);return Us=function(){return e},e}function Bs(){var e=J()(["Addresses"]);return Bs=function(){return e},e}function zs(){var e=J()(["Phone numbers"]);return zs=function(){return e},e}function Vs(){var e=J()(["Email addresses"]);return Vs=function(){return e},e}var Ws={email:"email",tel:"phone",adr:"address",other:"info"},Ys=function(e){var t=e.properties,n=e.contactID,r=e.contactEmails,a=e.contactGroupsMap,c=void 0===a?{}:a,o=e.field,u=e.userKeysList,l=e.leftBlockWidth,s=void 0===l?"w30":l,f=e.rightBlockWidth,d=void 0===f?"w70":f,m={email:Object($.c)("Title").t(Vs()),tel:Object($.c)("Title").t(zs()),adr:Object($.c)("Title").t(Bs()),other:Object($.c)("Title").t(Us())},p=o?m[o]:m.other,b=o?Ws[o]:Ws.other,v=["photo","org"],h=o?[o]:tc.filter((function(e){return!v.includes(e)})),g=t.filter((function(e){var t=e.field;return h.includes(t)}));return g.length?i.a.createElement("div",{className:"border-bottom mb1"},i.a.createElement("h3",{className:"mb1 flex flex-nowrap flex-items-center"},i.a.createElement(vt.a,{name:b,className:"mr0-5"}),i.a.createElement("span",{className:"mr0-5"},p),"email"===o?null:i.a.createElement(Zo,{className:"flex"})),g.map((function(e,a){var o=r&&r[a],l=o&&o.LabelIDs.map((function(e){return c[e]})).filter(Boolean);return i.a.createElement(Fs,{key:a.toString(),contactID:n,contactEmail:o,contactGroups:l,property:e,properties:t,userKeysList:u,leftBlockWidth:s,rightBlockWidth:d})}))):null};function Hs(){var e=J()(["Export"]);return Hs=function(){return e},e}function Xs(){var e=J()(["Edit"]);return Xs=function(){return e},e}function Js(){var e=J()(["Contact details"]);return Js=function(){return e},e}var Qs=function(e){var t=e.properties,n=void 0===t?[]:t,r=e.contactID,a=e.contactEmails,c=e.contactGroupsMap,o=e.userKeysList,u=e.errors,l=Object(te.a)().createModal,s=Object(ce.b)(),f=_()(s,1)[0];return i.a.createElement("div",{className:"view-column-detail flex-item-fluid scroll-if-needed"},i.a.createElement("div",{className:"flex flex-spacebetween flex-items-center border-bottom"},i.a.createElement("div",{className:"p1"},i.a.createElement("h2",{className:"m0"},Object($.c)("Title").t(Js()))),i.a.createElement("div",{className:"p1"},i.a.createElement(lt.a,{onClick:function(){l(i.a.createElement(Ni,{properties:n,contactID:r}))},className:"mr1"},Object($.c)("Action").t(Xs())),i.a.createElement(ht.a,{onClick:function(){return function(e){var t=e.filter((function(e){var t=e.field;return["fn","email"].includes(t)})).map((function(e){var t=e.value;return Array.isArray(t)?t[0]:t}))[0],n=Ue(e),r=new Blob([n.toString()],{type:"data:text/plain;charset=utf-8;"});Object(Ru.a)(r,"".concat(t,".vcf"))}(n)}},Object($.c)("Action").t(Hs())))),i.a.createElement(Gu,{errors:u}),i.a.createElement(Vu,{properties:n}),i.a.createElement("div",{className:"pl1 pr1"},i.a.createElement(Ys,{userKeysList:o,contactID:r,contactEmails:a,contactGroupsMap:c,properties:n,field:"email"}),f.hasPaidMail?i.a.createElement(i.a.Fragment,null,i.a.createElement(Ys,{contactID:r,properties:n,field:"tel"}),i.a.createElement(Ys,{contactID:r,properties:n,field:"adr"}),i.a.createElement(Ys,{contactID:r,properties:n})):i.a.createElement(si,null)))},Zs=function(e){var t=e.contactID,n=e.contactEmails,r=e.contactGroupsMap,a=e.userKeysList,c=void 0===a?[]:a,u=Object(o.useState)({ID:t}),l=_()(u,2),s=l[0],f=l[1],d=Object(o.useRef)(t),m=Ou(t),p=_()(m,2),b=p[0],v=p[1];Object(o.useEffect)((function(){if(b&&c.length){d.current=b.ID;var e=Object(hu.f)(c),t=e.publicKeys,n=e.privateKeys;Nu(b,{publicKeys:t,privateKeys:n}).then((function(e){var t=e.properties,n=e.error;d.current===b.ID&&f({ID:b.ID,properties:t,error:n})}))}}),[b,c]);var h=s.properties,g=s.errors,O=s.ID;return v||!h||O!==t?i.a.createElement(le.a,null):i.a.createElement(Qs,{properties:h,contactID:t,contactEmails:n,contactGroupsMap:r,userKeysList:c,errors:g})},qs=n("2iEm"),_s=n("pc7d"),$s=n("X8Oj"),ef=n("uLbS"),tf=n("6C09"),nf=n("hGKC");function rf(){var e=J()(["No contacts exported."]);return rf=function(){return e},e}function af(){var e=J()([""," out of "," contacts successfully exported."]);return af=function(){return e},e}function cf(){var e=J()(["Decrypting contacts... This may take a few minutes. When the process is completed, you will be able to download the file with all your contacts exported."]);return cf=function(){return e},e}function of(){var e=J()(["Exporting contacts"]);return of=function(){return e},e}function uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lf(){var e=J()(["Save"]);return lf=function(){return e},e}function sf(){var e=J()(["Cancel"]);return sf=function(){return e},e}var ff=function(e){var t,n,r=e.contactGroupID,a=e.userKeysList,c=e.onSave,u=void 0===c?ci.b:c,l=it()(e,["contactGroupID","userKeysList","onSave"]),s=Object(Ba.a)(),f=Object(re.a)(),d=_()(f,2),m=d[0],p=d[1],b=Object(o.useState)([]),v=_()(b,2),h=v[0],g=v[1],O=Object(o.useState)([]),y=_()(O,2),j=y[0],E=y[1],x=r?m.filter((function(e){var t=e.LabelIDs;return(void 0===t?[]:t).includes(r)})).length:m.length,w=Math.ceil(x/50);return Object(o.useEffect)((function(){var e=new AbortController,t=function(t){return s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uf(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{signal:e.signal}))},n=Object(hu.f)(a),c=n.publicKeys,o=n.privateKeys,i=function(e,n){var a,i,u,l,s,f,d,m,p,b;return Pe.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:return a=n.signal,v.next=3,Pe.a.awrap(t(Object(Za.g)({LabelID:r,Page:e,PageSize:50})));case 3:i=v.sent,u=i.Contacts,l=!0,s=!1,f=void 0,v.prev=8,d=function(){var e,t,n,r,i,u,l,s;return Pe.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(e=p.value,t=e.Cards,n=e.ID,!a.aborted){f.next=3;break}return f.abrupt("return",{v:void 0});case 3:return f.prev=3,f.next=6,Pe.a.awrap(Nu({Cards:t},{publicKeys:c,privateKeys:o}));case 6:if(r=f.sent,i=r.properties,u=void 0===i?[]:i,l=r.errors,!(void 0===l?[]:l).length){f.next=13;break}throw new Error("Error decrypting contact");case 13:s=Ue(u).toString(),!a.aborted&&g((function(e){return[].concat(me()(e),[s])})),f.next=20;break;case 17:f.prev=17,f.t0=f.catch(3),!a.aborted&&E((function(e){return[].concat(me()(e),[n])}));case 20:case"end":return f.stop()}}),null,null,[[3,17]])},m=u[Symbol.iterator]();case 11:if(l=(p=m.next()).done){v.next=20;break}return v.next=14,Pe.a.awrap(d());case 14:if("object"!=typeof(b=v.sent)){v.next=17;break}return v.abrupt("return",b.v);case 17:l=!0,v.next=11;break;case 20:v.next=26;break;case 22:v.prev=22,v.t0=v.catch(8),s=!0,f=v.t0;case 26:v.prev=26,v.prev=27,l||null==m.return||m.return();case 29:if(v.prev=29,!s){v.next=32;break}throw f;case 32:return v.finish(29);case 33:return v.finish(26);case 34:case"end":return v.stop()}}),null,null,[[8,22,26,34],[27,,29,33]])};return function(e){var t;return Pe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<w)){n.next=7;break}return n.next=4,Pe.a.awrap(Promise.all([i(t,e),Object(qa.b)(100)]));case 4:t++,n.next=1;break;case 7:case"end":return n.stop()}}))}(e).catch((function(e){if("AbortError"!==e.name)throw l.onClose(),e})),function(){e.abort()}}),[]),i.a.createElement(mt.a,ct()({title:Object($.c)("Title").t(of()),onSubmit:function(){return e=h.join("\n"),t=new Blob([e],{type:"data:text/plain;charset=utf-8;"}),Object(Ru.a)(t,"".concat("protonContacts","-").concat(Object(Ju.a)(Date.now(),"yyyy-MM-dd"),".vcf")),u(),void l.onClose();var e,t},footer:(t={loading:h.length+j.length!==x},n=t.loading,i.a.createElement(i.a.Fragment,null,i.a.createElement(dt.a,null,Object($.c)("Action").t(sf())),i.a.createElement(lt.a,{loading:n,type:"submit"},Object($.c)("Action").t(lf())))),loading:p},l),i.a.createElement(ft.a,null,Object($.c)("Description").t(cf())),i.a.createElement(Ya,{id:"progress-export-contacts",alt:"contact-loader",value:yc(h.length,j.length,x),failed:!h.length,displaySuccess:Object($.c)("Progress bar description").t(af(),h.length,x),displayFailed:Object($.c)("Progress bar description").t(rf())}))};function df(){var e=J()(["Merge"]);return df=function(){return e},e}function mf(){var e=J()([""," Do you want to merge these contacts now?"]);return mf=function(){return e},e}function pf(){var e=J()(["Two or more contacts appear to be identical."]);return pf=function(){return e},e}var bf=function(e){var t=e.loadingUserKeys,n=e.style,r=e.onMerge,a=it()(e,["loadingUserKeys","style","onMerge"]),c=i.a.createElement("b",{key:"boldface"},Object($.c)("Info").t(pf()));return i.a.createElement("div",ct()({style:n,className:"p1 flex flex-nowrap flex-items-center bg-primary color-white"},a),i.a.createElement("div",{className:"mr1 flex-item-noshrink"},i.a.createElement(vt.a,{name:"merge",color:"white"})),i.a.createElement("div",{className:"alignleft"},i.a.createElement("span",{className:"mr0-5"},Object($.c)("Info").jt(mf(),c)),i.a.createElement(ht.a,{className:"pm-button--small pm-button--primary pm-button--whiteborder alignbaseline",disabled:t,onClick:r},Object($.c)("Action").t(df()))))};function vf(){var e=J()(["Settings"]);return vf=function(){return e},e}function hf(){var e=J()(["You can decide whether or not contacts are automatically added to your address book by navigating to ",""]);return hf=function(){return e},e}function gf(){var e=J()(["You have "," in your address book"]);return gf=function(){return e},e}function Of(){var e=J()(["Contacts"]);return Of=function(){return e},e}function yf(){var e=J()(["Settings > General > Contacts"]);return yf=function(){return e},e}function jf(){var e=J()([""," contacts"]);return jf=function(){return e},e}function Ef(){var e=J()(["one contact"]);return Ef=function(){return e},e}function xf(){var e=J()(["Export"]);return xf=function(){return e},e}function wf(){var e=J()(["Edit"]);return wf=function(){return e},e}function Cf(){var e=J()(["You have "," in this group."]);return Cf=function(){return e},e}function kf(){var e=J()([""," contacts"]);return kf=function(){return e},e}function Pf(){var e=J()(["1 contact"]);return Pf=function(){return e},e}function Nf(){var e=J()(["Deselect"]);return Nf=function(){return e},e}function Df(){var e=J()(["You selected "," from your address book."]);return Df=function(){return e},e}function If(){var e=J()(["1 contact"]);return If=function(){return e},e}function Sf(){var e=J()(["Upgrade"]);return Sf=function(){return e},e}function Af(){var e=J()(["Upgrade to a paid plan to enable encrypted contact details and manage contact groups."]);return Af=function(){return e},e}function Mf(){var e=J()(["Unlock features"]);return Mf=function(){return e},e}function Tf(){var e=J()(["Export"]);return Tf=function(){return e},e}function Lf(){var e=J()(["Create a backup of your ProtonMail contacts by exporting them to a vCard file."]);return Lf=function(){return e},e}function Kf(){var e=J()(["Export contacts"]);return Kf=function(){return e},e}function Gf(){var e=J()(["Import"]);return Gf=function(){return e},e}function Rf(){var e=J()(["Add contacts to your ProtonMail account by importing them from a CSV or vCard file."]);return Rf=function(){return e},e}function Ff(){var e=J()(["Import contacts"]);return Ff=function(){return e},e}function Uf(){var e=J()(["Groups"]);return Uf=function(){return e},e}function Bf(){var e=J()(["Use groups to send email to a list of addresses you regularly communicate with."]);return Bf=function(){return e},e}function zf(){var e=J()(["Manage groups"]);return zf=function(){return e},e}function Vf(){var e=J()(["Export"]);return Vf=function(){return e},e}function Wf(){var e=J()(["Create a backup of your ProtonMail contacts by exporting them to a vCard file."]);return Wf=function(){return e},e}function Yf(){var e=J()(["Export contacts"]);return Yf=function(){return e},e}function Hf(){var e=J()(["Import"]);return Hf=function(){return e},e}function Xf(){var e=J()(["Add contacts to your ProtonMail account by importing them from a CSV or vCard file."]);return Xf=function(){return e},e}function Jf(){var e=J()(["Import contacts"]);return Jf=function(){return e},e}var Qf=function(e){var t=e.loadingUserKeys,n=e.onImport,r=e.onExport,a=e.onGroups;return i.a.createElement("div",{className:"flex flex-nowrap onmobile-flex-column"},i.a.createElement("div",{className:"bordered-container flex-item-fluid mr1 onmobile-mr0 onmobile-mb1 p1 aligncenter flex flex-column"},i.a.createElement("div",{className:"flex-item-fluid"},i.a.createElement("img",{src:_s.a,alt:"contact-import",className:"mb1"}),i.a.createElement("div",{className:"bold"},Object($.c)("Title").t(Jf())),i.a.createElement("p",null,Object($.c)("Info").t(Xf()))),i.a.createElement("div",{className:"flex-item-noshrink mt2"},i.a.createElement(lt.a,{className:"bold",onClick:n,disabled:t},Object($.c)("Action").t(Hf())))),i.a.createElement("div",{className:"bordered-container flex-item-fluid mr1 onmobile-mr0 onmobile-mb1 p1 aligncenter flex flex-column"},i.a.createElement("div",{className:"flex-item-fluid"},i.a.createElement("img",{src:$s.a,alt:"contact-export",className:"mb1"}),i.a.createElement("div",{className:"bold"},Object($.c)("Title").t(Yf())),i.a.createElement("p",null,Object($.c)("Info").t(Wf()))),i.a.createElement("div",{className:"flex-item-noshrink mt2"},i.a.createElement(lt.a,{className:"bold",onClick:r,disabled:t},Object($.c)("Action").t(Vf())))),i.a.createElement("div",{className:"bordered-container flex-item-fluid onmobile-mr0 onmobile-mb1 p1 aligncenter"},i.a.createElement("div",{className:"flex-item-fluid"},i.a.createElement("img",{src:ef.a,alt:"contact-groups",className:"mb1"}),i.a.createElement("div",{className:"bold"},Object($.c)("Title").t(zf())),i.a.createElement("p",null,Object($.c)("Info").t(Bf()))),i.a.createElement("div",{className:"flex-item-noshrink mt2"},i.a.createElement(lt.a,{className:"bold",onClick:a},Object($.c)("Action").t(Uf())))))},Zf=function(e){var t=e.loadingUserKeys,n=e.onImport,r=e.onExport;return i.a.createElement("div",{className:"flex flex-nowrap onmobile-flex-column"},i.a.createElement("div",{className:"bordered-container flex-item-fluid mr1 onmobile-mr0 onmobile-mb1 p1 aligncenter flex flex-column"},i.a.createElement("div",{className:"flex-item-fluid"},i.a.createElement("img",{src:_s.a,alt:"contact-import",className:"mb1"}),i.a.createElement("div",{className:"bold"},Object($.c)("Title").t(Ff())),i.a.createElement("p",null,Object($.c)("Info").t(Rf()))),i.a.createElement("div",{className:"flex-item-noshrink mt2"},i.a.createElement(lt.a,{className:"bold",onClick:n,disabled:t},Object($.c)("Action").t(Gf())))),i.a.createElement("div",{className:"bordered-container flex-item-fluid mr1 onmobile-mr0 onmobile-mb1 p1 aligncenter flex flex-column"},i.a.createElement("div",{className:"flex-item-fluid"},i.a.createElement("img",{src:$s.a,alt:"contact-export",className:"mb1"}),i.a.createElement("div",{className:"bold"},Object($.c)("Title").t(Kf())),i.a.createElement("p",null,Object($.c)("Info").t(Lf()))),i.a.createElement("div",{className:"flex-item-noshrink mt2"},i.a.createElement(lt.a,{className:"bold",onClick:r,disabled:t},Object($.c)("Action").t(Tf())))),i.a.createElement("div",{className:"bordered-container flex-item-fluid onmobile-mr0 onmobile-mb1 p1 aligncenter"},i.a.createElement("div",{className:"flex-item-fluid"},i.a.createElement("img",{src:tf.a,alt:"contact-unlock-features",className:"mb1"}),i.a.createElement("div",{className:"bold"},Object($.c)("Title").t(Mf())),i.a.createElement("p",null,Object($.c)("Info").t(Af()))),i.a.createElement("div",{className:"flex-item-noshrink mt2"},i.a.createElement(lt.a,{className:"bold",onClick:function(){return Object(f.h)("/settings/subscription")}},Object($.c)("Action").t(Sf())))))},qf=function(e){var t=e.totalContacts,n=void 0===t?0:t,r=e.selectedContacts,a=void 0===r?0:r,c=e.totalContactsInGroup,o=void 0===c?0:c,u=e.contactGroupID,l=e.contactGroupName,s=e.user,f=e.userKeysList,d=e.loadingUserKeys,m=e.onUncheck,p=e.canMerge,b=e.onMerge,v=e.onImport,h=e.onExport,g=e.onGroups,O=s.hasPaidMail,y=Object(te.a)().createModal;if(a){var j=i.a.createElement("b",{key:"total-contacts"},Object($.c)("Info").ngettext(Object($.msgid)(If()),"".concat(a," contacts"),a));return i.a.createElement("div",{className:"p2 view-column-detail flex flex-item-fluid scroll-if-needed"},i.a.createElement("div",{className:"aligncenter center mbauto mtauto"},i.a.createElement("div",{className:"mb2"},Object($.c)("Info").jt(Df(),j)),i.a.createElement("div",{className:"aligncenter mb2"},i.a.createElement("img",{src:nf.a,alt:"contact-group-card"})),i.a.createElement("div",{className:"mb2"},i.a.createElement(ht.a,{className:"mr1",onClick:m},Object($.c)("Action").ngettext(Object($.msgid)(Nf()),"Deselect all",a)))))}if(u){var E=i.a.createElement("b",{key:"total-contacts"},1===o?Object($.c)("Info").t(Pf()):Object($.c)("Info").t(kf(),o));return i.a.createElement("div",{className:"p2 view-column-detail flex flex-item-fluid scroll-if-needed"},i.a.createElement("div",{className:"aligncenter center mbauto mtauto"},i.a.createElement("h1",{className:"ellipsis lh-standard"},l),i.a.createElement("div",{className:"mb2"},Object($.c)("Info").jt(Cf(),E)),i.a.createElement("div",{className:"aligncenter mb2"},i.a.createElement("img",{src:nf.a,alt:"contact-group-card"})),i.a.createElement("div",{className:"mb2"},i.a.createElement(ht.a,{className:"mr1",onClick:function(){return y(i.a.createElement(eu,{contactGroupID:u}))}},Object($.c)("Action").t(wf())),!!o&&i.a.createElement(ht.a,{onClick:function(){return y(i.a.createElement(ff,{contactGroupID:u,userKeysList:f}))},disabled:d},Object($.c)("Action").t(xf())))))}var x=1===n?i.a.createElement("b",{key:"boldface"},Object($.c)("Info").t(Ef())):i.a.createElement("b",{key:"boldface"},Object($.c)("Info").t(jf(),n)),w=i.a.createElement("b",{key:"boldface-2"},Object($.c)("Info").t(yf()));return i.a.createElement("div",{className:"p2 view-column-detail flex-item-fluid scroll-if-needed"},i.a.createElement("div",{className:"aligncenter mt2"},i.a.createElement("h1",null,Object($.c)("Title").t(Of())),i.a.createElement("div",{className:"mb2"},Object($.c)("Info").jt(gf(),x)),i.a.createElement("div",{className:"mb1"},Object($.c)("Info").jt(hf(),w)),i.a.createElement("div",{className:"mb1"},i.a.createElement(qs.a,{to:"/contacts/settings",className:"inline-flex flex-nowrap nodecoration"},i.a.createElement(vt.a,{className:"mr0-5 flex-item-centered-vert fill-primary",name:"settings-master"}),i.a.createElement("span",null,Object($.c)("Title").t(vf())))),p&&i.a.createElement("div",{className:"mb2"},i.a.createElement(bf,{loadingUserKeys:d,onMerge:b}))),O?i.a.createElement(Qf,{userKeysList:f,loadingUserKeys:d,onImport:v,onExport:function(){return h()},onGroups:g}):i.a.createElement(Zf,{loadingUserKeys:d,onImport:v,onExport:function(){return h()}}))},_f=n("a5Ah");function $f(){var e=J()(["Delete"]);return $f=function(){return e},e}var ed=function(e){var t=e.user,n=e.onCheck,r=e.onDelete,a=e.checked,c=void 0!==a&&a,u=e.activeIDs,l=void 0===u?[]:u,s=e.contactEmailsMap,f=void 0===s?{}:s,d=e.simplified,m=void 0!==d&&d,p=Object(o.useMemo)((function(){return l.reduce((function(e,t){return f[t]?e.concat(f[t]):e}),[])}),[l,f]);return m?i.a.createElement("div",{className:"toolbar flex noprint"},i.a.createElement(qs.a,{to:"/contacts",className:"toolbar-button"},i.a.createElement(vt.a,{name:"arrow-left",className:"toolbar-icon mauto"}))):i.a.createElement("div",{className:"toolbar flex noprint"},i.a.createElement(Kt.a,{className:"flex pm-select-all ml0-75 pl1 pr1",checked:c,onChange:function(e){var t=e.target;return n(t.checked)}}),i.a.createElement(_f.a,null),i.a.createElement("button",{type:"button",title:Object($.c)("Tooltip").t($f()),className:"toolbar-button",onClick:r,disabled:!l.length},i.a.createElement(vt.a,{name:"delete",className:"toolbar-icon mauto"})),t.hasPaidMail?i.a.createElement(pl,{className:"toolbar-button toolbar-button--dropdown",disabled:!p.length,contactEmails:p,forToolbar:!0},i.a.createElement(vt.a,{name:"contacts-groups",className:"toolbar-icon mauto"})):null)},td=n("llAM"),nd=n("VjF5"),rd=n("+4In"),ad=n("c47Q"),cd=n("domY"),od=n("SOA7"),id=n("K/no"),ud=n("JjEE");function ld(){var e=J()(["Settings"]);return ld=function(){return e},e}function sd(){var e=J()(["Search contacts"]);return sd=function(){return e},e}function fd(){var e=J()(["Contacts"]);return fd=function(){return e},e}function dd(){var e=J()(["Search"]);return dd=function(){return e},e}var md=function(e){var t=e.title,n=e.search,r=e.onSearch,a=e.onClearSearch,c=e.expanded,o=e.onToggleExpand,u=e.inSettings,l=void 0!==u&&u,s=e.isNarrow,f=void 0!==s&&s,d=e.history,m=Object(ce.b)(),p=_()(m,1)[0].hasPaidMail,b=Object(te.a)().createModal;return i.a.createElement("header",{className:"header flex flex-items-center flex-nowrap reset4print"},i.a.createElement(td.a,{url:"/contacts",className:"nomobile"}),i.a.createElement(nd.a,{expanded:c,onToggle:o}),t&&f?i.a.createElement("span",{className:"h3 mb0 ellipsis lh-standard"},t):null,l||f?null:i.a.createElement(rd.a,{placeholder:Object($.c)("Placeholder").t(dd()),value:n,onChange:r}),i.a.createElement(ad.a,null,p||f?null:i.a.createElement(cd.a,{external:!0}),f&&!l?null:i.a.createElement(od.a,{className:"nomobile",to:"/contacts",icon:"contacts",text:Object($.c)("Title").t(fd()),"aria-current":!l}),!l&&f?i.a.createElement(id.a,{content:i.a.createElement(vt.a,{name:"search",size:25,className:"topnav-icon mr0-5 flex-item-centered-vert fill-white"}),placeholder:Object($.c)("Placeholder").t(sd()),search:n,onSearch:r,hasCaret:!1}):null,f&&l?null:i.a.createElement(od.a,{to:"/contacts/settings/general",icon:"settings-master",text:Object($.c)("Title").t(ld()),"aria-current":l})),f&&!l?i.a.createElement(ud.a,{onClick:function(){return b(i.a.createElement(Ni,{history:d,onAdd:a}))},icon:"plus"}):null)},pd=n("BMtv");function bd(){var e=J()(["This feature requires a paid Proton account"]);return bd=function(){return e},e}function vd(){var e=J()(["Upgrade"]);return vd=function(){return e},e}function hd(){var e=J()(["Upgrade required"]);return hd=function(){return e},e}var gd=function(e){var t=e.onConfirm,n=e.onClose,r=it()(e,["onConfirm","onClose"]);return i.a.createElement(st.a,ct()({title:Object($.c)("Title").t(hd()),onConfirm:function(){Object(f.h)("/settings/subscription"),t&&t()},onClose:n,confirm:Object($.c)("Action").t(vd())},r),i.a.createElement(ft.a,{type:"warning"},Object($.c)("Warning").t(bd())))};function Od(){var e=J()(["Add contact"]);return Od=function(){return e},e}function yd(){var e=J()(["Groups"]);return yd=function(){return e},e}function jd(){var e=J()(["Export all"]);return jd=function(){return e},e}function Ed(){var e=J()(["Import"]);return Ed=function(){return e},e}function xd(){var e=J()(["Contacts"]);return xd=function(){return e},e}var wd=function(e){var t=e.url,n=e.user,r=e.userKeysList,a=void 0===r?[]:r,c=e.loadingUserKeys,o=e.totalContacts,u=e.contactGroups,l=void 0===u?[]:u,s=e.expanded,f=e.onToggleExpand,d=e.onClearSearch,m=e.history,p=n.hasPaidMail,b=Object(te.a)().createModal,v=[{icon:"contacts",isActive:function(e,t){return!!e&&!new URLSearchParams(t.search).get("contactGroupID")},text:Object($.c)("Link").t(xd()),link:"/contacts"},!c&&{type:"button",className:"alignleft",icon:"import",text:Object($.c)("Link").t(Ed()),onClick:function(){b(i.a.createElement(oo,{userKeysList:a}))}},o&&!c&&{type:"button",className:"alignleft",icon:"export",text:Object($.c)("Link").t(jd()),onClick:function(){b(i.a.createElement(ff,{userKeysList:a}))}},{type:"button",className:"alignleft",icon:"settings-singular",text:Object($.c)("Link").t(yd()),onClick:function(){if(!p)return b(i.a.createElement(gd,null));m.push("/contacts/settings/groups")}}];p&&v.push.apply(v,me()(l.map((function(e){var t=e.Name,n=e.Color,r=e.ID;return{icon:"contacts-groups",isActive:function(e,t){return new URLSearchParams(t.search).get("contactGroupID")===r},color:n,text:t,link:"/contacts?contactGroupID=".concat(r)}}))));return i.a.createElement(pd.a,{expanded:s,onToggleExpand:f,url:t,list:v.filter(Boolean),mobileLinks:[{to:"/inbox",icon:"protonmail",external:!0,current:!1},{to:"/contacts",icon:"protoncontacts",external:!1,current:!0}]},i.a.createElement("div",{className:"pl1 pr1 nomobile"},i.a.createElement(lt.a,{className:"pm-button--large bold mt0-25 w100",onClick:function(){return b(i.a.createElement(Ni,{history:m,onAdd:d}))}},Object($.c)("Action").t(Od()))))},Cd=function(e,t,n){var r=n.oldIndex,a=n.newIndex;return e.map((function(e,n){return n===t?Object(Ce.c)(e,r,a):e}))},kd=function(e){var t=e.properties,n=void 0===t?[]:t,r=e.hasPaidMail,a=xe(n,"fn"),c=we(n,"email"),o=we(n,"tel"),u=we(n,"adr"),l=we(n,"org"),s=we(n,"note"),f=[[{prop:"Name",icon:"contact",component:a}],c.length&&c.map((function(e){return{prop:"Email",icon:"email",component:i.a.createElement("a",{href:"mailto:".concat(e)},e)}})),r&&o.length&&o.map((function(e){return{prop:"Phone",icon:"phone",component:i.a.createElement("a",{href:"tel:".concat(e)},e)}})),r&&u.length&&u.map((function(e){return{prop:"Address",icon:"address",component:Te(e)}})),r&&l.length&&l.map((function(e){return{prop:"Organization",icon:"organization",component:e}})),r&&s.length&&s.map((function(e){return{prop:"Note",icon:"note",component:e}}))].filter(Boolean);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Pt.a,{className:"flex flex-nowrap"},i.a.createElement("div",{className:"flex flex-column flex-nowrap mr2"},f.map((function(e){return i.a.createElement("div",{key:e[0].prop,className:"mb1"},e.map((function(e,t){var n=e.prop,r=e.icon;return i.a.createElement("div",{key:"icon-".concat(t),className:"flex flex-items-center flex-nowrap"},i.a.createElement(vt.a,{name:r,className:Object(jo.a)(["mr0-5 flex-item-noshrink",t&&"nonvisible"])}),i.a.createElement("span",null,n))})))}))),i.a.createElement("div",{className:"flex flex-column"},f.map((function(e){return i.a.createElement("div",{key:e[0].prop,className:"mb1"},e.map((function(e,t){var n=e.component;return i.a.createElement("div",{key:"icon-".concat(t),className:"flex flex-items-center mw100 ellipsis"},n)})))})))),!r&&!![].concat(me()(o),me()(u),me()(l),me()(s)).length&&i.a.createElement(Pt.a,null,i.a.createElement(si,null)))};function Pd(){var e=J()(["Close"]);return Pd=function(){return e},e}function Nd(){var e=J()(["Contact Details"]);return Nd=function(){return e},e}function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Id=function(e){var t=e.contactID,n=e.userKeysList,r=e.hasPaidMail,a=it()(e,["contactID","userKeysList","hasPaidMail"]),c=Object(Ba.a)(),u=Object(Ct.a)(!0),l=_()(u,2),s=l[0],f=l[1],d=Object(o.useState)({properties:[],errors:[]}),m=_()(d,2),p=m[0],b=m[1];return Object(o.useEffect)((function(){var e,r,a,o,i;try{f(Pe.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Pe.a.awrap(c(Object(Za.d)(t)));case 2:return e=u.sent,r=e.Contact,u.next=6,Pe.a.awrap(Nu(r,Object(hu.f)(n)));case 6:a=u.sent,o=a.properties,i=a.errors,b({properties:o,errors:i});case 10:case"end":return u.stop()}})))}catch(u){b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dd(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p,{errors:[3]}))}}),[]),i.a.createElement(mt.a,ct()({small:!0,title:Object($.c)("Title").t(Nd()),onSubmit:a.onClose,footer:i.a.createElement(lt.a,{type:"submit"},Object($.c)("Action").t(Pd()))},a),s?i.a.createElement(le.a,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(Gu,{errors:p.errors}),i.a.createElement(kd,{properties:p.properties,hasPaidMail:r})))},Sd=function(e){var t=e.error;return i.a.createElement("div",{className:"bg-global-attention p1"},i.a.createElement(vt.a,{name:"attention",className:"mr1"}),i.a.createElement("span",{className:"mr1"},t))},Ad=n("wIs1");function Md(){var e=J()(["No contacts merged."]);return Md=function(){return e},e}function Td(){var e=J()([""," out of "," contacts successfully merged."]);return Td=function(){return e},e}function Ld(){var e=J()(["Merging contacts... This may take a few minutes. When the process is completed, you can close this modal."]);return Ld=function(){return e},e}function Kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rd=oc,Fd=uc,Ud=ic,Bd=V.b.SINGLE_SUCCESS,zd=Object(Ad.a)((function(e){var t=e.contactID,n=e.userKeysList,r=e.alreadyMerged,a=e.beMergedModel,c=void 0===a?{}:a,u=e.beDeletedModel,l=void 0===u?{}:u,s=e.totalBeMerged,f=void 0===s?0:s,d=e.onFinish,m=e.history,p=e.location,b=Object(Ba.a)(),v=Object(o.useMemo)((function(){return Object(hu.f)(n)}),[]),h=v.privateKeys,g=v.publicKeys,O=Object(Ct.a)(!0),y=_()(O,2),j=y[0],E=y[1],x=Object(o.useState)({mergedAndEncrypted:[],failedOnMergeAndEncrypt:[],submitted:[],failedOnSubmit:[]}),w=_()(x,2),C=w[0],k=w[1];Object(o.useEffect)((function(){var e,n,a,o,i,u,s=new AbortController,f=function(e){return b(Gd({},e,{signal:s.signal}))},v=function(e,t){var n,r,a,c;return Pe.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.signal.aborted){o.next=3;break}return o.abrupt("return",[]);case 3:return o.next=5,Pe.a.awrap(f(Object(Za.d)(e)));case 5:return n=o.sent,r=n.Contact,o.next=9,Pe.a.awrap(Nu(r,{privateKeys:h,publicKeys:g}));case 9:if(a=o.sent,c=a.properties,!a.errors.length){o.next=14;break}throw new Error("Error decrypting contact ".concat(e));case 14:return o.abrupt("return",c);case 15:case"end":return o.stop()}}))},O=function(){var e,t,n,r,a,c,o,i,u,l,s,f,d,m=arguments;return Pe.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:e=m.length>0&&void 0!==m[0]?m[0]:[],t=m.length>1?m[1]:void 0,n=t.signal,r=[],a=!0,c=!1,o=void 0,p.prev=6,i=e[Symbol.iterator]();case 8:if(a=(u=i.next()).done){p.next=19;break}return l=u.value,p.next=12,Pe.a.awrap(Promise.all([v(l,{signal:n}),Object(qa.b)(100)]));case 12:s=p.sent,f=_()(s,1),d=f[0],r.push(d);case 16:a=!0,p.next=8;break;case 19:p.next=25;break;case 21:p.prev=21,p.t0=p.catch(6),c=!0,o=p.t0;case 25:p.prev=25,p.prev=26,a||null==i.return||i.return();case 28:if(p.prev=28,!c){p.next=31;break}throw o;case 31:return p.finish(28);case 32:return p.finish(25);case 33:return p.abrupt("return",r);case 34:case"end":return p.stop()}}),null,null,[[6,21,25,33],[26,,28,32]])},y=function(e){var t,n,a,o,i,u;return Pe.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(!(t=e.signal).aborted){l.next=3;break}return l.abrupt("return",{});case 3:return n=Object.values(c),a=_()(n,1),o=a[0],i=[],l.prev=5,l.next=8,Pe.a.awrap(bc(r,{privateKey:h[0],publicKey:g[0]}));case 8:u=l.sent,i.push({contact:u}),!t.aborted&&k((function(e){return Gd({},e,{mergedAndEncrypted:[].concat(me()(e.mergedAndEncrypted),me()(o))})})),l.next=16;break;case 13:l.prev=13,l.t0=l.catch(5),!t.aborted&&k((function(e){return Gd({},e,{failedOnMergeAndEncrypt:[].concat(me()(e.failedOnMergeAndEncrypt),me()(o))})}));case 16:return l.abrupt("return",i);case 17:case"end":return l.stop()}}),null,null,[[5,13]])},j=function(e){var t,n,r,a,o,i;return Pe.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:t=e.signal,n=[],r=function(){var e,r,c;return Pe.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=o[a],!t.aborted){i.next=3;break}return i.abrupt("return",{v:{}});case 3:return i.prev=3,i.next=6,Pe.a.awrap(O(e,{signal:t}));case 6:return r=i.sent,i.next=9,Pe.a.awrap(bc(Je(r),{privateKey:h[0],publicKey:g[0]}));case 9:c=i.sent,n.push({contact:c}),!t.aborted&&k((function(t){return Gd({},t,{mergedAndEncrypted:[].concat(me()(t.mergedAndEncrypted),me()(e))})})),i.next=17;break;case 14:i.prev=14,i.t0=i.catch(3),!t.aborted&&k((function(t){return Gd({},t,{failedOnMergeAndEncrypt:[].concat(me()(t.failedOnMergeAndEncrypt),me()(e))})}));case 17:case"end":return i.stop()}}),null,null,[[3,14]])},a=0,o=Object.values(c);case 4:if(!(a<o.length)){u.next=13;break}return u.next=7,Pe.a.awrap(r());case 7:if("object"!=typeof(i=u.sent)){u.next=10;break}return u.abrupt("return",i.v);case 10:a++,u.next=4;break;case 13:return u.abrupt("return",n);case 14:case"end":return u.stop()}}))},x=function(e,n){var r,a,o,i,u,l,s,d,b,v,h,g;return Pe.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:if(r=e.contacts,a=void 0===r?[]:r,o=e.labels,!(i=n.signal).aborted&&a.length){O.next=4;break}return O.abrupt("return");case 4:return u=[],O.next=7,Pe.a.awrap(f(Object(Za.a)({Contacts:a.map((function(e){return e.contact})),Overwrite:Rd,Labels:o})));case 7:if(O.t0=function(e){return e.Response},l=O.sent.Responses.map(O.t0),!i.aborted){O.next=11;break}return O.abrupt("return");case 11:for(s=!0,d=!1,b=void 0,O.prev=14,v=function(){var e=g.value,n=e.Code,r=e.Contact.ID,a=c[r],o=a.slice(1);n===Bd?(!i.aborted&&k((function(e){return Gd({},e,{submitted:[].concat(me()(e.submitted),me()(a))})})),u.push.apply(u,me()(o)),!i.aborted&&o.includes(t)&&m.replace(Gd({},p,{state:{ignoreClose:!0},pathname:"/contacts/".concat(r)}))):!i.aborted&&k((function(e){return Gd({},e,{failedOnSubmit:[].concat(me()(e.failedOnSubmit),me()(a))})}))},h=l[Symbol.iterator]();!(s=(g=h.next()).done);s=!0)v();O.next=23;break;case 19:O.prev=19,O.t1=O.catch(14),d=!0,b=O.t1;case 23:O.prev=23,O.prev=24,s||null==h.return||h.return();case 26:if(O.prev=26,!d){O.next=29;break}throw b;case 29:return O.finish(26);case 30:return O.finish(23);case 31:if(O.t2=!i.aborted&&!!u.length,!O.t2){O.next=35;break}return O.next=35,Pe.a.awrap(f(Object(Za.c)(u)));case 35:case"end":return O.stop()}}),null,null,[[14,19,23,31],[24,,26,30]])},w=function(e,t){var n,r,a,c,o,i,u;return Pe.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=e.contacts,r=void 0===n?[]:n,a=e.labels,!(c=t.signal).aborted){l.next=4;break}return l.abrupt("return");case 4:o=Object(Ce.a)(r,100),i=o.length,u=0;case 7:if(!(u<i)){l.next=13;break}return l.next=10,Pe.a.awrap(Promise.all([x({contacts:o[u],labels:a},{signal:c}),Object(qa.b)(100)]));case 10:u++,l.next=7;break;case 13:case"end":return l.stop()}}))},C=function(e){var n,r;return Pe.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.signal,r=Object.keys(l),n.aborted||!r.length){a.next=5;break}return a.next=5,Pe.a.awrap(f(Object(Za.c)(r)));case 5:!n.aborted&&r.includes(t)&&m.replace(Gd({},p,{state:{ignoreClose:!0},pathname:"/contacts/".concat(l[t])}));case 6:case"end":return a.stop()}}))};return E((e=s,Pe.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.signal,r){t.next=7;break}return t.next=4,Pe.a.awrap(j({signal:n}));case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,Pe.a.awrap(y({signal:n}));case 9:t.t0=t.sent;case 10:return a=t.t0,o=Oc(a),i=o.withCategories,u=o.withoutCategories,t.next=14,Pe.a.awrap(w({contacts:i,labels:Fd},{signal:n}));case 14:return t.next=16,Pe.a.awrap(w({contacts:u,labels:Ud},{signal:n}));case 16:return t.next=18,Pe.a.awrap(C({signal:n}));case 18:if(t.t1=!n.aborted,!t.t1){t.next=22;break}return t.next=22,Pe.a.awrap(d());case 22:case"end":return t.stop()}})))),function(){s.abort()}}),[]);var P=jc([{allocated:.9,successful:C.mergedAndEncrypted.length,failed:C.failedOnMergeAndEncrypt.length,total:f},{allocated:.1,successful:C.submitted.length,failed:C.failedOnSubmit.length,total:f-C.failedOnMergeAndEncrypt.length}]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ft.a,null,Object($.c)("Description").t(Ld())),i.a.createElement(Ya,{id:"progress-merge-contacts",alt:"contact-loader",value:P,failed:!C.submitted.length,displaySuccess:Object($.c)("Progress bar description").t(Td(),C.submitted.length,f),displayFailed:Object($.c)("Progress bar description").t(Md()),endPostponed:j}))}));function Vd(){var e=J()(["Merging contacts"]);return Vd=function(){return e},e}function Wd(){var e=J()(["Close"]);return Wd=function(){return e},e}function Yd(){var e=J()(["Cancel"]);return Yd=function(){return e},e}function Hd(){var e=J()(["Contact Details"]);return Hd=function(){return e},e}function Xd(){var e=J()(["Contacts could not be merged"]);return Xd=function(){return e},e}function Jd(){var e=J()(["Some of the contacts to be merged display errors. Please review them individually"]);return Jd=function(){return e},e}function Qd(){var e=J()(["Merge"]);return Qd=function(){return e},e}function Zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zd(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _d=function(e){var t=e.contactID,n=e.userKeysList,r=e.hasPaidMail,a=e.beMergedModel,c=e.beDeletedModel,u=e.updateModel,l=it()(e,["contactID","userKeysList","hasPaidMail","beMergedModel","beDeletedModel","updateModel"]),s=Object(F.a)().call,f=Object(Ba.a)(),d=Object(o.useMemo)((function(){return Object(hu.f)(n)}),[]),m=d.privateKeys,p=d.publicKeys,b=Object(Ct.a)(!0),v=_()(b,2),h=v[0],g=v[1],O=Object(o.useState)(!1),y=_()(O,2),j=y[0],E=y[1],x=Object(o.useState)(!1),w=_()(x,2),C=w[0],k=w[1],P=Object(o.useState)({}),N=_()(P,2),D=N[0],I=N[1],S=Object.values(a),A=_()(S,1)[0],M=Object.keys(c),T=function(){var e=A.slice(1).concat(M);u((function(t){return qd({},t,{orderedContacts:t.orderedContacts.map((function(t){return t.filter((function(t){var n=t.ID;return!e.includes(n)}))})).filter((function(e){return e.length>1}))})}))};Object(o.useEffect)((function(){var e,t,n,r,a,c,o,i,u,l,s;g(Pe.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:d.prev=0,e=[],t=!0,n=!1,r=void 0,d.prev=5,a=A[Symbol.iterator]();case 7:if(t=(c=a.next()).done){d.next=25;break}return o=c.value,d.next=11,Pe.a.awrap(f(Object(Za.d)(o)));case 11:return i=d.sent,u=i.Contact,d.next=15,Pe.a.awrap(Nu(u,{privateKeys:m,publicKeys:p}));case 15:if(l=d.sent,s=l.properties,!l.errors.length){d.next=21;break}throw I(qd({},D,{errorOnLoad:!0})),new Error("Error decrypting contact");case 21:e.push(s);case 22:t=!0,d.next=7;break;case 25:d.next=31;break;case 27:d.prev=27,d.t0=d.catch(5),n=!0,r=d.t0;case 31:d.prev=31,d.prev=32,t||null==a.return||a.return();case 34:if(d.prev=34,!n){d.next=37;break}throw r;case 37:return d.finish(34);case 38:return d.finish(31);case 39:I(qd({},D,{mergedContact:Je(e)})),d.next=45;break;case 42:d.prev=42,d.t1=d.catch(0),I(qd({},D,{errorOnMerge:!0}));case 45:case"end":return d.stop()}}),null,null,[[0,42],[5,27,31,39],[32,,34,38]]))}),[]);var L=function(){if(!j){var e=i.a.createElement(lt.a,{type:"submit",disabled:!D.mergedContact},Object($.c)("Action").t(Qd()));return qd({content:function(){if(h)return i.a.createElement(le.a,null);if(D.errorOnLoad||D.errorOnMerge){var e=D.errorOnLoad?Object($.c)("Warning").t(Jd()):Object($.c)("Warning").t(Xd());return i.a.createElement(Sd,{error:e})}return i.a.createElement(kd,{properties:D.mergedContact,hasPaidMail:r})}(),title:Object($.c)("Title").t(Hd()),submit:e,onSubmit:function(){return E(!0)}},l)}var o=!C&&i.a.createElement(dt.a,null,Object($.c)("Action").t(Yd())),u=i.a.createElement(lt.a,{type:"submit",loading:!C},Object($.c)("Action").t(Wd()));return qd({title:Object($.c)("Title").t(Vd()),hasClose:!1,content:i.a.createElement(zd,{contactID:t,userKeysList:n,alreadyMerged:D.mergedContact,beMergedModel:a,beDeletedModel:c,totalBeMerged:A.length,onFinish:function(){return Pe.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return T(),e.next=3,Pe.a.awrap(s());case 3:k(!0);case 4:case"end":return e.stop()}}))}}),close:o,submit:u,onSubmit:l.onClose},l)}(),K=L.content,G=it()(L,["content"]);return i.a.createElement(mt.a,G,K)},$d=n("YjUZ"),em=n("adk/"),tm=n("8QwH"),nm=function(e){return e?"opacity-50":""},rm=function(e){var t=e.name,n=e.contactID,r=e.highlightedID,a=e.checked,c=e.deleted,o=e.greyedOut,u=e.onToggle;return i.a.createElement("div",{className:"flex flex-nowrap flex-items-center"},i.a.createElement(Kt.a,{checked:a,onChange:function(){return u(n)},className:"flex flex-items-center flex-item-noshrink mr0-5 ".concat(c?"nonvisible":"")}),i.a.createElement("span",{className:Object(jo.a)(["mw100","inbl","ellipsis",nm(o),n===r&&"bold"])},t))},am=function(e){var t=e.contactID,n=e.emails,r=void 0===n?[]:n,a=e.highlightedID,c=e.greyedOut;return i.a.createElement("div",{className:Object(jo.a)(["flex","flex-items-center","mw100",nm(c),t===a&&"bold"])},i.a.createElement("span",{className:"inbl ellipsis"},r.map((function(e){return"<".concat(e,">")})).join(", ")))};function cm(){var e=J()(["Mark for deletion"]);return cm=function(){return e},e}function om(){var e=J()(["Unmark for deletion"]);return om=function(){return e},e}function im(){var e=J()(["Contact details"]);return im=function(){return e},e}var um=function(e){var t=e.contacts,n=e.highlightedID,r=e.isChecked,a=e.beDeleted,c=e.onClickCheckbox,o=e.onClickDetails,u=e.onToggleDelete,l=it()(e,["contacts","highlightedID","isChecked","beDeleted","onClickCheckbox","onClickDetails","onToggleDelete"]);return i.a.createElement(em.a,ct()({colSpan:4},l),t.map((function(e,t){var l=e.ID,s=e.Name,f=e.emails,d=a[l],m=[!d&&{text:Object($.c)("Action").t(im()),onClick:function(){o(l)}},{text:d?Object($.c)("Action").t(om()):Object($.c)("Action").t(cm()),onClick:function(){u(l)}}].filter(Boolean),p=[i.a.createElement(rm,{key:"name",name:s,contactID:l,highlightedID:n,checked:r[l],deleted:d,greyedOut:d,onToggle:c}),i.a.createElement(am,{key:"email",contactID:l,highlightedID:n,emails:f,greyedOut:d}),i.a.createElement(so.a,{key:"options",className:"pm-button--small",list:m})];return d?i.a.createElement(Mi.a,{key:"".concat(l),index:t,cells:[null].concat(p)}):i.a.createElement(tm.a,{key:"".concat(l),index:t,cells:p})})))};function lm(){var e=J()(["Preview contact"]);return lm=function(){return e},e}function sm(){var e=J()(["ACTIONS"]);return sm=function(){return e},e}function fm(){var e=J()(["ADDRESS"]);return fm=function(){return e},e}function dm(){var e=J()(["NAME"]);return dm=function(){return e},e}var mm=function(){return i.a.createElement("thead",{className:"orderableTableHeader"},i.a.createElement("tr",null,i.a.createElement(Nt.a,{type:"header"}),i.a.createElement(Nt.a,{type:"header"},Object($.c)("TableHeader").t(dm())),i.a.createElement(Nt.a,{type:"header"},Object($.c)("TableHeader").t(fm())),i.a.createElement(Nt.a,{type:"header"},Object($.c)("TableHeader").t(sm()))))},pm=function(e){var t=e.contacts,n=void 0===t?[]:t,r=e.isChecked,a=void 0===r?{}:r,c=e.beDeleted,o=void 0===c?{}:c,u=e.onClickCheckbox,l=e.onClickDetails,s=e.onToggleDelete,f=e.onClickPreview,d=e.onSortEnd;return i.a.createElement(i.a.Fragment,null,n.map((function(e,t){var n=e.map((function(e){var t=e.ID;return a[t]&&!o[t]&&t})).filter(Boolean),r=e.map((function(e){var t=e.ID;return o[t]&&t})).filter(Boolean),c=n.length>1?n:[];return i.a.createElement(Pt.a,{key:"".concat(e&&e[0].Name),className:"mb2 flex flex-column flex-items-center"},i.a.createElement($d.a,{onSortEnd:d(t),className:"mb1"},i.a.createElement(mm,null),i.a.createElement(um,{contacts:e,highlightedID:c[0],isChecked:a,beDeleted:o,onClickCheckbox:u,onClickDetails:l,onToggleDelete:s})),i.a.createElement(ht.a,{className:"aligcenter",disabled:!c.length,type:"button",onClick:function(){return f(c[0],r)}},Object($.c)("Action").t(lm())))})))};function bm(){var e=J()(["You can mark for deletion the contacts that you do not want neither to merge nor to keep.\n                    Deletion will only take place after the merge button is clicked"]);return bm=function(){return e},e}function vm(){var e=J()(["Use Drag and Drop to rank merging priority between contacts. Uncheck the contacts you do not want to merge."]);return vm=function(){return e},e}function hm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hm(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Om=function(e){var t=e.contactID,n=e.userKeysList,r=e.hasPaidMail,a=e.model,c=e.updateModel,o=e.beMergedModel,u=e.beDeletedModel,l=Object(te.a)().createModal,s=a.orderedContacts,f=a.isChecked,d=a.beDeleted;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ft.a,null,Object($.c)("Description").t(vm())),i.a.createElement(ft.a,{type:"warning"},Object($.c)("Description").t(bm())),i.a.createElement(pm,{onSortEnd:function(e){return function(t){var n=t.oldIndex,r=t.newIndex;c((function(t){return gm({},t,{orderedContacts:Cd(s,e,{oldIndex:n,newIndex:r})})}))}},contacts:s,isChecked:f,beDeleted:d,onClickCheckbox:function(e){c((function(t){return gm({},t,{isChecked:gm({},f,Z()({},e,!f[e]))})}))},onClickDetails:function(e){l(i.a.createElement(Id,{contactID:e,userKeysList:n,hasPaidMail:r}))},onToggleDelete:function(e){c((function(t){return gm({},t,{beDeleted:gm({},d,Z()({},e,!d[e]))})}))},onClickPreview:function(e,a){var s=Z()({},e,o[e]),f=a.reduce((function(e,t){return e[t]=u[t],e}),{});l(i.a.createElement(_d,{contactID:t,userKeysList:n,hasPaidMail:r,beMergedModel:s,beDeletedModel:f,updateModel:c}))}}))};function ym(){var e=J()(["Merging contacts"]);return ym=function(){return e},e}function jm(){var e=J()(["Close"]);return jm=function(){return e},e}function Em(){var e=J()(["Cancel"]);return Em=function(){return e},e}function xm(){var e=J()(["Merge contacts"]);return xm=function(){return e},e}function wm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wm(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function km(){var e=J()(["Merge"]);return km=function(){return e},e}var Pm=function(e){var t=e.contacts,n=e.contactID,r=e.userKeysList,a=e.hasPaidMail,c=it()(e,["contacts","contactID","userKeysList","hasPaidMail"]),u=Object(F.a)().call,l=Object(o.useState)(!1),s=_()(l,2),f=s[0],d=s[1],m=Object(o.useState)(!1),p=_()(m,2),b=p[0],v=p[1],h=Object(o.useState)((function(){return{orderedContacts:t,isChecked:t.flat().reduce((function(e,t){return e[t.ID]=!0,e}),{}),beDeleted:t.flat().reduce((function(e,t){return e[t.ID]=!1,e}),{})}})),g=_()(h,2),O=g[0],y=g[1],j=O.orderedContacts,E=O.isChecked,x=O.beDeleted;Object(o.useEffect)((function(){j.flat().length||c.onClose()}),[j]);var w=Object(o.useMemo)((function(){return j.reduce((function(e,t){var n=t.map((function(e){return e.ID})),r=n.map((function(e){return E[e]&&!x[e]&&e})).filter(Boolean),a=n.map((function(e){return x[e]&&e})).filter(Boolean),c=r.length>1;c&&(e.beMergedModel[r[0]]=r,e.totalBeMerged+=r.length);var o=!0,i=!1,u=void 0;try{for(var l,s=a[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var f=l.value;e.beDeletedModel[f]=c?r[0]:""}}catch(d){i=!0,u=d}finally{try{o||null==s.return||s.return()}finally{if(i)throw u}}return e}),{beMergedModel:{},beDeletedModel:{},totalBeMerged:0})}),[j,E,x]),C=w.beMergedModel,k=w.beDeletedModel,P=w.totalBeMerged,N=function(){if(!f){var e=i.a.createElement(lt.a,{type:"submit",disabled:!P},Object($.c)("Action").t(km()));return Cm({title:Object($.c)("Title").t(xm()),content:i.a.createElement(Om,{contactID:n,userKeysList:r,hasPaidMail:!!a,model:O,updateModel:y,beMergedModel:C,beDeletedModel:k}),submit:e,onSubmit:function(){return d(!0)}},c)}var t=!b&&i.a.createElement(dt.a,null,Object($.c)("Action").t(Em())),o=i.a.createElement(lt.a,{type:"submit",loading:!b},Object($.c)("Action").t(jm()));return Cm({title:Object($.c)("Title").t(ym()),hasClose:!1,content:i.a.createElement(zd,{contactID:n,userKeysList:r,beMergedModel:C,beDeletedModel:k,totalBeMerged:P,onFinish:function(){return Pe.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.awrap(u());case 2:v(!0);case 3:case"end":return e.stop()}}))}}),close:t,submit:o,onSubmit:c.onClose},c)}(),D=N.content,I=it()(N,["content"]);return i.a.createElement(mt.a,I,D)},Nm=n("5Bhs"),Dm=n("DInE");function Im(){var e=J()(["This action will permanently delete the selected contact. Are you sure you want to delete this contact?"]);return Im=function(){return e},e}function Sm(){var e=J()(["Delete"]);return Sm=function(){return e},e}function Am(){var e=J()(["Contact deleted"]);return Am=function(){return e},e}function Mm(){var e=J()(["Some contacts could not be deleted"]);return Mm=function(){return e},e}function Tm(){var e=J()(["Contacts deleted"]);return Tm=function(){return e},e}function Lm(){var e=J()(["Delete"]);return Lm=function(){return e},e}var Km=function(e){var t=e.contactIDs,n=void 0===t?[]:t,r=e.deleteAll,a=e.onDelete,c=it()(e,["contactIDs","deleteAll","onDelete"]),o=Object(Ba.a)(),u=Object(ut.a)().createNotification,l=Object(F.a)().call,s=Object(Ct.a)(),f=_()(s,2),d=f[0],m=f[1],p=i.a.createElement(Nm.a,{type:"submit",loading:d},Object($.c)("Action").t(Lm()));return i.a.createElement(mt.a,ct()({title:Object($.c)("Title").t(Sm()),onSubmit:function(){return m(Pe.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,Pe.a.awrap(o(Object(Za.b)()));case 3:return a&&a(),t.next=6,Pe.a.awrap(l());case 6:return c.onClose(),t.abrupt("return",u({text:Object($.c)("Success").t(Tm())}));case 8:return t.t0=Dm.a,t.next=11,Pe.a.awrap(o(Object(Za.c)(n)));case 11:return t.t1=t.sent,e=(0,t.t0)(t.t1),a&&a(),t.next=16,Pe.a.awrap(l());case 16:if(c.onClose(),e){t.next=19;break}return t.abrupt("return",u({text:Object($.c)("Error").t(Mm()),type:"warning"}));case 19:u({text:Object($.c)("Success").ngettext(Object($.msgid)(Am()),"Contacts deleted",n.length)});case 20:case"end":return t.stop()}})));var e},submit:p,loading:d},c),i.a.createElement(ft.a,{type:"warning"},Object($.c)("Warning").ngettext(Object($.msgid)(Im()),"This action will permanently delete selected contacts. Are you sure you want to delete these contacts?",n.length)))},Gm=n("kJz7"),Rm=n("6UvI");function Fm(){var e=J()(["Upgrade"]);return Fm=function(){return e},e}var Um=function(e){var t=e.children,n=e.title;return Object(o.useEffect)((function(){document.title="".concat(n," - ProtonContacts")}),[n]),i.a.createElement("div",{className:"flex flex-nowrap no-scroll"},i.a.createElement(Gm.a,{items:[i.a.createElement(Rm.a,{key:"storage",upgradeButton:i.a.createElement(Du.a,{url:"/settings/subscription",target:"_self",className:"pm-button pm-button--primary"},Object($.c)("Action").t(Fm()))})]}),i.a.createElement("div",{className:"content flex-item-fluid h100v reset4print"},t))};function Bm(){var e=J()(["Contacts"]);return Bm=function(){return e},e}function zm(){var e=J()(["Search"]);return zm=function(){return e},e}function Vm(){var e=J()(["Contacts"]);return Vm=function(){return e},e}function Wm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ym(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wm(Object(n),!0).forEach((function(t){Z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hm=function(e){var t=e.location,n=e.history,r=Object(ee.a)(),a=r.state,c=r.toggle,u=r.set,l=Object(te.a)().createModal,s=Object(o.useState)(""),f=_()(s,2),d=f[0],m=f[1],p=Object(se.g)(d),b=Object(ne.a)(),v=_()(b,2),h=v[0],g=v[1],O=Object(re.a)(),y=_()(O,2),j=y[0],E=y[1],x=Object(ae.a)(),w=_()(x,2),C=w[0],k=w[1],P=Object(o.useState)(Object.create(null)),D=_()(P,2),I=D[0],S=D[1],A=Object(ce.b)(),M=_()(A,1)[0],T=Object(oe.c)(M),L=_()(T,2),K=L[0],G=L[1],R=Object(ie.a)(),F=R.isDesktop,U=R.isNarrow,B=Object(o.useMemo)((function(){var e=t.pathname.split("/contacts/");return _()(e,2)[1]}),[t]),z=Object(o.useMemo)((function(){return new URLSearchParams(t.search).get("contactGroupID")}),[t.search]),V=Object(o.useMemo)((function(){return C&&z?{contactGroupName:C.find((function(e){return e.ID===z})).Name,totalContactsInGroup:j.filter((function(e){var t=e.LabelIDs;return(void 0===t?[]:t).includes(z)})).length}:Object.create(null)}),[j,z]),W=V.contactGroupName,Y=V.totalContactsInGroup,H=Object(o.useMemo)((function(){return Object.keys(I).some((function(e){return I[e]}))}),[I]);Object(o.useEffect)((function(){S(Object.create(null)),u(!1),m("")}),[z]);var X=Object(o.useMemo)((function(){return Array.isArray(h)?h.reduce((function(e,t){var n=t.ContactID;return e[n]||(e[n]=[]),e[n].push(t),e}),Object.create(null)):{}}),[h]),J=Object(o.useMemo)((function(){return Object(fe.a)(C)}),[C]),Q=Object(o.useMemo)((function(){return Array.isArray(j)?j.filter((function(e){var t=e.Name,n=e.ID,r=e.LabelIDs,a=X[n]?X[n].map((function(e){return e.Email})).join(" "):"",c=!p.length||Object(se.g)("".concat(t," ").concat(a)).includes(p),o=!z||r.includes(z);return c&&o})):[]}),[j,z,p,X]),Z=Object(o.useMemo)((function(){return Q.map((function(e){var t=e.ID;return Ym({},e,{emails:(X[t]||[]).map((function(e){return e.Email})),isChecked:!!I[t]})}))}),[Q,I,X]),q=Object(o.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object.values(e.reduce((function(e,t,n){var r=t.Name,a=Object(se.g)(r);return e[a]?e[a].push(n):e[a]=[n],e}),Object.create(null))).map(Ce.e).filter((function(e){return e.length>1})),n=Object.values(e.reduce((function(e,t,n){return t.emails.map(se.g).forEach((function(t){e[t]?e[t].push(n):e[t]=[n]})),e}),Object.create(null))).map(Ce.e).filter((function(e){return e.length>1})),r=He([].concat(me()(t),me()(n)));return r.map((function(t){return t.map((function(t){return e[t]}))}))}(Z)}),[Z]),de=q.length>0,pe=M.hasPaidMail,be=Object(o.useMemo)((function(){return Z.filter((function(e){return e.isChecked})).map((function(e){return e.ID}))}),[Z,B]),ve=Object(o.useMemo)((function(){var e=Q.length;return!!e&&be.length===e}),[Q,be]),he=Object(o.useMemo)((function(){return!be.length&&B?[B]:be}),[be,B]),ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.reduce((function(e,n){return e[n]=t,e}),Object.create(null));S(Ym({},I,{},n))},Oe=function(){m("")},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ge(Q.map((function(e){return e.ID})),e)},je=function(){ye(!1)},Ee=g||E||k||G,xe=j?j.length:0,we=U&&B?"--noHeader":"",ke=B&&!!xe&&!H&&i.a.createElement(N.a,{key:B,component:i.a.createElement(ue.a,{className:"pt2 view-column-detail flex-item-fluid"})},i.a.createElement(Zs,{contactID:B,contactEmails:X[B],contactGroupsMap:J,userKeysList:K})),Pe=(F||!ke)&&i.a.createElement(vu,{emptyAddressBook:!xe,contactID:B,contactGroupID:z,totalContacts:xe,totalContactsInGroup:Y,contacts:Z,contactGroupsMap:J,user:M,userKeysList:K,loadingUserKeys:G,onCheck:ge,onClearSearch:Oe,onClearSelection:je,isDesktop:F}),Ne=F&&!ke&&!!Z.length&&i.a.createElement(qf,{history:n,user:M,userKeysList:K,loadingUserKeys:G,totalContacts:xe,totalContactsInGroup:Y,selectedContacts:be.length,contactGroupID:z,contactGroupName:W,onUncheck:je,canMerge:de,onMerge:function(){l(i.a.createElement(Pm,{contacts:q,contactID:B,userKeysList:K,hasPaidMail:!!pe}))},onImport:function(){return l(i.a.createElement(oo,{userKeysList:K}))},onExport:function(e){return l(i.a.createElement(ff,{contactGroupID:e,userKeysList:K}))},onGroups:function(){return n.replace("/contacts/settings/groups")}}),De=""===d?Object($.c)("Title").t(Vm()):Object($.c)("Title").t(zm());return i.a.createElement(Um,{title:W||Object($.c)("Title").t(Bm())},(!U||!B)&&i.a.createElement(md,{title:De,expanded:a,onToggleExpand:c,search:d,onSearch:m,onClearSearch:Oe,isNarrow:U,history:n}),i.a.createElement("div",{className:"flex flex-nowrap"},i.a.createElement(wd,{url:"/contacts",history:n,user:M,expanded:a,onToggleExpand:c,onClearSearch:Oe,totalContacts:xe,contactGroups:C,userKeysList:K}),i.a.createElement("div",{className:"main flex-item-fluid"},i.a.createElement(ed,{user:M,contactEmailsMap:X,activeIDs:he,checked:ve,onCheck:ye,onDelete:function(){var e=he.length===j.length;l(i.a.createElement(Km,{contactIDs:he,deleteAll:e,onDelete:function(){if(e)return n.replace(Ym({},t,{state:{ignoreClose:!0},pathname:"/contacts"})),S(Object.create(null));he.length===Q.length&&Oe(),B&&he.includes(B)&&n.replace(Ym({},t,{state:{ignoreClose:!0},pathname:"/contacts"})),ge(be,!1)}}))},simplified:!!B&&!F}),i.a.createElement("div",{className:"main-area--withToolbar".concat(we," no-scroll flex flex-nowrap")},Ee?i.a.createElement(le.a,null):i.a.createElement(i.a.Fragment,null,Pe,ke,Ne)))))},Xm=n("P2jq"),Jm=n("2cEl"),Qm=function(e){var t=e.title,n=e.children;return i.a.createElement("main",{className:"main-area-content relative flex-item-fluid"},i.a.createElement(Jm.a,null,t),i.a.createElement("div",{className:"container-section-sticky"},n))},Zm=n("9E8O"),qm=n("hsnk");function _m(){var e=J()(["Automatically save contacts"]);return _m=function(){return e},e}function $m(){var e=J()(["Contacts"]);return $m=function(){return e},e}var ep=function(){var e=Object(Fu.a)(),t=_()(e,1)[0],n=(t=void 0===t?{}:t).AutoSaveContacts;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Zm.a,null,Object($.c)("Title").t($m())),i.a.createElement(Fc.a,null,i.a.createElement(Gt.a,{htmlFor:"saveContactToggle"},i.a.createElement("span",{className:"mr0-5"},Object($.c)("Label").t(_m())),i.a.createElement(bl.a,{url:"https://protonmail.com/support/knowledge-base/autosave-contact-list/"})),i.a.createElement(Io.a,null,i.a.createElement(qm.a,{autoSaveContacts:!!n,id:"saveContactToggle"}))))};function tp(){var e=J()(["General"]);return tp=function(){return e},e}var np=function(){return i.a.createElement(Qm,{title:Object($.c)("Title").t(tp())},i.a.createElement(ep,null))},rp=n("0HG9");function ap(){var e=J()([""," email address"]);return ap=function(){return e},e}function cp(){var e=J()(["Contacts in the group aren't deleted if the contact group is deleted."]);return cp=function(){return e},e}function op(){var e=J()(["Are you sure you want to delete this contact group?"]);return op=function(){return e},e}function ip(){var e=J()(["Delete contact group"]);return ip=function(){return e},e}function up(){var e=J()(["Delete"]);return up=function(){return e},e}function lp(){var e=J()(["Edit"]);return lp=function(){return e},e}function sp(){var e=J()(["Actions"]);return sp=function(){return e},e}function fp(){var e=J()(["Group size"]);return fp=function(){return e},e}function dp(){var e=J()(["Name"]);return dp=function(){return e},e}function mp(){var e=J()(["Contact group removed"]);return mp=function(){return e},e}var pp=function(){var e=Object(ae.a)(),t=_()(e,1)[0],n=Object(ne.a)(),r=_()(n,1)[0],a=Object(ut.a)().createNotification,c=Object(te.a)().createModal,u=Object(Ba.a)(),l=Object(F.a)().call,s=Object(o.useState)(t),f=_()(s,2),d=f[0],m=void 0===d?[]:d,p=f[1];Object(o.useEffect)((function(){p(t)}),[t]);var b=function(e){return function(){return Pe.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pe.a.awrap(u(Object(Di.b)(e)));case 2:return t.next=4,Pe.a.awrap(l());case 4:a({text:Object($.c)("Contact group notification").t(mp())});case 5:case"end":return t.stop()}}))}},v=Object(o.useCallback)((function(e){var n,r,a;return Pe.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.oldIndex,r=e.newIndex,c.prev=1,a=Object(Ce.c)(m,n,r),p(a),c.next=6,Pe.a.awrap(u(Object(Di.d)({LabelIDs:a.map((function(e){return e.ID}))})));case 6:l(),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),p(t);case 12:case"end":return c.stop()}}),null,null,[[1,9]])}),[m,t]),h=[Object($.c)("Table header").t(dp()),Object($.c)("Table header").t(fp()),Object($.c)("Table header").t(sp())];return i.a.createElement($d.a,{className:"noborder",onSortEnd:v},i.a.createElement(rp.a,{cells:h}),i.a.createElement(em.a,null,m.map((function(e,t){var n=e.ID,a=e.Name,o=e.Color,u=(r||[]).filter((function(e){var t=e.LabelIDs;return(void 0===t?[]:t).includes(n)})).length,l=[{text:Object($.c)("Action").t(lp()),onClick:function(){c(i.a.createElement(eu,{contactGroupID:n}))}},{text:Object($.c)("Action").t(up()),onClick:function(){c(i.a.createElement(st.a,{onConfirm:b(n),title:Object($.c)("Title").t(ip())},i.a.createElement(ft.a,{type:"warning"},i.a.createElement("p",null,Object($.c)("Info").t(op())),i.a.createElement("p",null,Object($.c)("Info").t(cp())))))}}],s=[i.a.createElement("div",{key:n,className:"flex"},i.a.createElement("span",{className:"ellipsis"},i.a.createElement(nu,{name:a,color:o})," ",a)),Object($.c)("Info").ngettext(Object($.msgid)(ap(),u),"".concat(u," email addresses"),u),i.a.createElement(so.a,{key:n,className:"pm-button--small",list:l})];return i.a.createElement(tm.a,{key:n,index:t,cells:s})}))))};function bp(){var e=J()(["Add group"]);return bp=function(){return e},e}function vp(){var e=J()(["A group can contain multiple email addresses from the same contact. Please note that a sending limit may apply and prevent you from sending emails to excessively large groups."]);return vp=function(){return e},e}function hp(){var e=J()(["Contact groups"]);return hp=function(){return e},e}var gp=function(){var e=Object(te.a)().createModal;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Zm.a,null,Object($.c)("Title").t(hp())),i.a.createElement(ft.a,null,Object($.c)("Info").t(vp())),i.a.createElement("div",{className:"mb1"},i.a.createElement(lt.a,{onClick:function(){return e(i.a.createElement(eu,null))}},Object($.c)("Action").t(bp()))),i.a.createElement(pp,null))};function Op(){var e=J()(["Contact groups"]);return Op=function(){return e},e}var yp=function(){return i.a.createElement(Qm,{title:Object($.c)("Title").t(Op())},i.a.createElement(gp,null))};function jp(){var e=J()(["Settings"]);return jp=function(){return e},e}function Ep(){var e=J()(["Contact settings"]);return Ep=function(){return e},e}function xp(){var e=J()(["Contact groups"]);return xp=function(){return e},e}function wp(){var e=J()(["General"]);return wp=function(){return e},e}var Cp=function(e){var t=e.location,n=Object(o.useRef)(),r=Object(ce.b)(),a=_()(r,1)[0].hasPaidMail,c=Object(ee.a)(),u=c.state,l=c.toggle,s=c.set,f=Object(ie.a)().isNarrow;Object(o.useEffect)((function(){s(!1),n.current.scrollTop=0}),[t.pathname]);var d=[{link:"/contacts/settings/general",icon:"settings-singular",text:Object($.c)("Link").t(wp())},a&&{link:"/contacts/settings/groups",icon:"contacts-groups",text:Object($.c)("Link").t(xp())}].filter(Boolean);return i.a.createElement(Um,{title:Object($.c)("Title").t(Ep())},i.a.createElement(md,{inSettings:!0,title:Object($.c)("Title").t(jp()),expanded:u,onToggleExpand:l,isNarrow:f}),i.a.createElement("div",{className:"flex flex-nowrap"},i.a.createElement(pd.a,{url:"/contacts",list:d,expanded:u,onToggleExpand:l,mobileLinks:[{to:"/inbox",icon:"protonmail",external:!0,current:!1},{to:"/contacts",icon:"protoncontacts",external:!1,current:!0}]}),i.a.createElement("div",{className:"main flex-item-fluid main-area",ref:n},i.a.createElement("div",{className:"flex flex-reverse"},i.a.createElement(Xm.a.Provider,{value:n},i.a.createElement(D.a,null,i.a.createElement(I.a,{path:"/contacts/settings/general",component:np}),i.a.createElement(I.a,{path:"/contacts/settings/groups",component:yp}),i.a.createElement(S.a,{to:"/contacts/settings/general"})))))))},kp=[A.a,M.a,T.a,L.a,K.a,G.a,R.a],Pp=[M.a,A.a],Np=function(e){var t=e.onLogout;return i.a.createElement(P.a,{onLogout:t,locales:{},preloadModels:Pp,eventModels:kp},i.a.createElement(H,null,i.a.createElement(N.a,null,i.a.createElement(D.a,null,i.a.createElement(I.a,{path:"/contacts/settings",render:function(e){var t=e.location;return i.a.createElement(Cp,{location:t})}}),i.a.createElement(I.a,{path:"/contacts",render:function(e){var t=e.location,n=e.history;return i.a.createElement(Hm,{location:t,history:n})}}),i.a.createElement(S.a,{to:"/contacts"})))))},Dp=n("jKe7"),Ip=n("2INN"),Sp=n("RRB+"),Ap=n("plUg"),Mp=n("xpwl"),Tp=function(e){var t=e.onLogin;return i.a.createElement(Sp.a,null,i.a.createElement(Ap.a,null),i.a.createElement(Dp.a,null,i.a.createElement(Ip.a,{render:function(){return i.a.createElement(Mp.a,{onLogin:t})}})))};n("wdeV");Object(d.a)(r);var Lp=function(){var e=Object(l.a)(),t=e.UID,n=e.login,r=e.logout;return t?i.a.createElement(Np,{onLogout:r}):i.a.createElement(Tp,{onLogin:n})},Kp=Object(u.hot)((function(){return i.a.createElement(s.a,{config:r},i.a.createElement(Lp,null))}));c.a.render(i.a.createElement(Kp,null),document.querySelector(".app-root"))},0:function(e,t,n){n("+wUL"),e.exports=n("1UW9")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"5FMj":function(e,t,n){var r={"./3-d-secure.svg":"0gKn","./american-express-safekey.svg":"Jui7","./cc-american-express.svg":"/qD2","./cc-dankort.svg":"0T0d","./cc-diners-club.svg":"vuvo","./cc-discover.svg":"AZZk","./cc-forbrugs.svg":"k2eZ","./cc-jcb.svg":"7Amw","./cc-maestro.svg":"lXKh","./cc-mastercard.svg":"ZUPP","./cc-paypal.svg":"egYP","./cc-unionpay.svg":"ma7A","./cc-visa.svg":"vO2o","./cc-visaelectron.svg":"RMFI","./discover-protectbuy.svg":"qsy5","./mastercard-securecode.svg":"6Bn0","./verified-by-visa.svg":"Q7qE"};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id="5FMj"},Cq9y:function(e,t,n){},YO3j:function(e,t,n){var r={"./af/index.js":["IqAn",11],"./ar-DZ/index.js":["JVC1",12],"./ar-SA/index.js":["xMju",13],"./be/index.js":["YEhR",3],"./bg/index.js":["isx8",4],"./bn/index.js":["+b7I",14],"./ca/index.js":["Vwa+",15],"./cs/index.js":["dvhP",16],"./cy/index.js":["HQUR",17],"./da/index.js":["7ur/",18],"./de/index.js":["bgw5",19],"./el/index.js":["dH0v",20],"./en-AU/index.js":["VHew",21],"./en-CA/index.js":["wXhn",22],"./en-GB/index.js":["nwJ3",23],"./en-US/index.js":["IogR",24],"./eo/index.js":["UB7v",25],"./es/index.js":["/S0t",26],"./et/index.js":["Br0m",27],"./fa-IR/index.js":["gEFy",28],"./fi/index.js":["ndVD",29],"./fr-CA/index.js":["KTij",30],"./fr/index.js":["LKA2",31],"./gl/index.js":["4bge",32],"./gu/index.js":["3t4y",33],"./he/index.js":["75M+",34],"./hi/index.js":["CUe2",35],"./hr/index.js":["L9Jq",36],"./hu/index.js":["Nm+E",37],"./hy/index.js":["netp",38],"./id/index.js":["A6C3",39],"./is/index.js":["N4bE",40],"./it/index.js":["hmb4",41],"./ja/index.js":["uAXs",42],"./ka/index.js":["pwL5",43],"./kk/index.js":["zGPi",5],"./ko/index.js":["iW8+",44],"./lt/index.js":["xj+b",45],"./lv/index.js":["x5pY",6],"./ms/index.js":["gUWk",46],"./nb/index.js":["73vv",47],"./nl/index.js":["hCQt",48],"./nn/index.js":["vORL",49],"./pl/index.js":["B6yL",7],"./pt-BR/index.js":["2dYp",50],"./pt/index.js":["gdks",51],"./ro/index.js":["r2yp",52],"./ru/index.js":["nz/o",8],"./sk/index.js":["Wqan",9],"./sl/index.js":["KYSo",53],"./sr/index.js":["7mU3",54],"./sv/index.js":["hxgj",55],"./ta/index.js":["1ssA",56],"./te/index.js":["SGoj",57],"./th/index.js":["Pk+z",58],"./tr/index.js":["3ZWG",59],"./ug/index.js":["yT3n",60],"./uk/index.js":["LCGg",10],"./vi/index.js":["dGQT",61],"./zh-CN/index.js":["UJqf",62],"./zh-TW/index.js":["zn9v",63]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id="YO3j",e.exports=a},wdeV:function(e,t,n){}});
//# sourceMappingURL=index.1dcce3e8.js.map